var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,a,R as n}from"./vendor-BXk_ma1u.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var r={exports:{}},l={},i=s,o=Symbol.for("react.element"),d=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,m=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,s){var a,n={},r=null,l=null;for(a in void 0!==s&&(r=""+s),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(l=t.ref),t)c.call(t,a)&&!p.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:o,type:e,key:r,ref:l,props:n,_owner:m.current}}l.Fragment=d,l.jsx=x,l.jsxs=x,r.exports=l;var u,h=r.exports,b=a;u=b.createRoot,b.hydrateRoot;
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=(e,t)=>{const a=s.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:i="",children:o,...d},c)=>{return s.createElement("svg",{ref:c,...g,width:n,height:n,stroke:a,strokeWidth:l?24*Number(r)/Number(n):r,className:["lucide",`lucide-${m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...d},[...t.map(([e,t])=>s.createElement(e,t)),...Array.isArray(o)?o:[o]]);var m});return a.displayName=`${e}`,a},y=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),j=f("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),v=f("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),N=f("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),w=f("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),k=f("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),C=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),S=f("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),T=f("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),E=f("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),L=f("Figma",[["path",{d:"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z",key:"1340ok"}],["path",{d:"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z",key:"1hz3m3"}],["path",{d:"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z",key:"1oz8n2"}],["path",{d:"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z",key:"1ff65i"}],["path",{d:"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z",key:"pdip6e"}]]),A=f("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),P=f("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),$=f("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),M=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),I=f("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),O=f("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),F=f("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),_=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R=f("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),z=f("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),K=f("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),q=f("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),D=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),G=f("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),U=f("TestTubes",[["path",{d:"M9 2v17.5A2.5 2.5 0 0 1 6.5 22v0A2.5 2.5 0 0 1 4 19.5V2",key:"12z67u"}],["path",{d:"M20 2v17.5a2.5 2.5 0 0 1-2.5 2.5v0a2.5 2.5 0 0 1-2.5-2.5V2",key:"1q2nfy"}],["path",{d:"M3 2h7",key:"7s29d5"}],["path",{d:"M14 2h7",key:"7sicin"}],["path",{d:"M9 16H4",key:"1bfye3"}],["path",{d:"M20 16h-5",key:"ddnjpe"}]]),V=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),J=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),W=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H={};function B(e){return"object"==typeof e&&null!==e&&"error"in e}async function Y(){try{const e=await fetch("/api/jira/stories",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!e.ok){const t=await e.json(),s=B(t)?t.error:`HTTP ${e.status}`;throw new Error(`Failed to fetch Jira stories: ${s}`)}return(await e.json()).stories||[]}catch(e){if(e instanceof Error)throw e;throw new Error("Failed to fetch Jira stories: Unknown error")}}async function Z(){try{const e=await fetch("/api/servicenow/stories",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!e.ok){const t=await e.json(),s=B(t)?t.error:`HTTP ${e.status}`;throw new Error(`Failed to fetch ServiceNow stories: ${s}`)}return(await e.json()).stories||[]}catch(e){if(e instanceof Error)throw e;throw new Error("Failed to fetch ServiceNow stories: Unknown error")}}async function Q(){const e=await Promise.allSettled([Y(),Z()]),t=[];return e.forEach(e=>{"fulfilled"===e.status&&t.push(...e.value)}),t}function X(){const[e,t]=s.useState([]),[a,n]=s.useState(null),[r,l]=s.useState(""),[i,o]=s.useState(!1),[d,c]=s.useState(null),[m,p]=s.useState(!0),[x,u]=s.useState(null),[b,g]=s.useState(null);s.useEffect(()=>{(async()=>{try{p(!0),u(null);const e=await Q();t(e),e.length>0&&n(e[0])}catch(e){const t=e instanceof Error?e.message:"Failed to load stories";u(t)}finally{p(!1)}})()},[]);const f=e.filter(e=>e.key.toLowerCase().includes(r.toLowerCase())||e.title.toLowerCase().includes(r.toLowerCase())||e.description.toLowerCase().includes(r.toLowerCase())),j=e=>{if(!e)return[];const t=document.createElement("div");t.innerHTML=e;const s=t.querySelectorAll("li"),a=[];if(s.forEach(e=>{var t;const s=(null==(t=e.textContent)?void 0:t.trim())||"";s&&a.push(s)}),0===a.length){return[e.replace(/<[^>]*>/g,"").replace(/&#\d+;/g,e=>{const t=parseInt(e.substring(2,e.length-1));return String.fromCharCode(t)}).replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").trim()].filter(e=>e.length>0)}return a};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(G,{className:"w-8 h-8 text-blue-600"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Requirement Analysis"}),h.jsx("p",{className:"text-slate-600 mt-1",children:"Analyze user stories from Jira & ServiceNow using AI"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4",children:[h.jsx("h3",{className:"font-semibold text-slate-900 text-lg",children:"Stories"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Search Stories"}),h.jsx("input",{type:"text",placeholder:"Search by Story ID or text...",value:r,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx(I,{className:"w-5 h-5 animate-spin text-blue-600"})}):0===f.length?h.jsxs("div",{className:"text-center py-4",children:[h.jsx("p",{className:"text-sm text-slate-600",children:"No stories found"}),h.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Configure Jira or ServiceNow credentials"})]}):h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:f.map(e=>h.jsxs("button",{onClick:()=>n(e),className:"w-full text-left p-3 rounded-lg border-2 transition-all "+((null==a?void 0:a.id)===e.id&&(null==a?void 0:a.source)===e.source?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"),children:[h.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:e.key}),h.jsx("div",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:e.title})]},`${e.source}-${e.id}`))})]}),h.jsx("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6",children:a?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsx("h3",{className:"font-semibold text-slate-900",children:"Selected Story"})}),x&&h.jsxs("div",{className:"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[h.jsx(y,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:x})]}),b&&h.jsxs("div",{className:"flex gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:[h.jsx(N,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:b})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Key:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.key})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Title:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.title})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Status:"}),h.jsx("span",{className:"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:a.status})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Priority:"}),h.jsx("span",{className:"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:a.priority})]})]}),a.assignee&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Assignee:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.assignee})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Description:"}),h.jsx("p",{className:"text-slate-600 mt-1 bg-slate-50 p-2 rounded max-h-24 overflow-y-auto",children:a.description})]}),a.acceptanceCriteria&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Acceptance Criteria:"}),h.jsx("ul",{className:"text-slate-600 mt-2 bg-slate-50 p-3 rounded max-h-32 overflow-y-auto space-y-2 list-disc list-inside text-sm",children:j(a.acceptanceCriteria).map((e,t)=>h.jsx("li",{className:"text-slate-700",children:e},t))})]}),a&&(a.epicKey||a.epicTitle)&&h.jsxs("div",{className:"space-y-2 pt-3 border-t border-slate-200",children:[h.jsx("h4",{className:"font-semibold text-slate-900",children:"Epic Information"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Epic Number:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.epicKey||"-"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Epic Short Description:"}),h.jsx("p",{className:"text-slate-600 mt-1 truncate",title:a.epicTitle,children:a.epicTitle||"-"})]})]})]})]}),h.jsx("button",{onClick:async()=>{if(a)try{o(!0),u(null),g(null),c(null);const{llmService:e}=await function(e,t){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in H)return;H[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(async()=>{const{llmService:e}=await Promise.resolve().then(()=>le);return{llmService:e}},void 0),t=e.getConfiguredProviders();if(0===t.length)return void u("No LLM providers configured. Please configure at least one provider in Settings.");const s=t[0],n=e.getConfig(s);if(!n)return void u(`Provider ${s} is not properly configured`);const r=a.acceptanceCriteria?j(a.acceptanceCriteria).map(e=>`â€¢ ${e}`).join("\n"):"No acceptance criteria provided",l=`You are an expert QA analyst specializing in user story quality assessment. Review the following user story and provide a comprehensive analysis using the INVEST methodology.\n\nUSER STORY DETAILS:\n================\nStory ID: ${a.key}\nTitle: ${a.title}\nDescription: ${a.description}\n\nAcceptance Criteria:\n${r}\n\nStatus: ${a.status}\nPriority: ${a.priority}\n${a.epicKey?`Epic Number: ${a.epicKey}`:""}\n${a.epicTitle?`Epic Title: ${a.epicTitle}`:""}\n\nANALYSIS REQUIREMENTS:\n====================\nAnalyze this user story against the INVEST methodology framework with the following criteria:\n\n1. INDEPENDENT - Is the story independent from other stories?\n2. NEGOTIABLE - Are the details open to discussion?\n3. VALUABLE - Does it deliver clear value to the user/business?\n4. ESTIMABLE - Can the work be estimated?\n5. SMALL - Can it be completed within one sprint?\n6. TESTABLE - Are acceptance criteria clearly testable?\n\nPlease provide:\n1. A brief score (0-10) for each INVEST criterion\n2. Current gaps or issues in the user story\n3. Specific recommendations for improvement\n4. Any missing acceptance criteria that should be added\n5. Overall assessment and priority for refinement\n\nFormat your response in a clear, structured manner with sections for each criterion.`;let i,d="",m={"Content-Type":"application/json"};if("azure-openai"===s){const e=n.endpoint.endsWith("/")?n.endpoint:`${n.endpoint}/`,t=n.deploymentName||n.model;d=`${e}openai/deployments/${t}/chat/completions?api-version=${n.apiVersion||"2024-02-15-preview"}`,m["api-key"]=n.apiKey}else if("openai"===s)d="https://api.openai.com/v1/chat/completions",m.Authorization=`Bearer ${n.apiKey}`;else if("groq"===s){d=n.endpoint.endsWith("/chat/completions")?n.endpoint:`${n.endpoint}/chat/completions`,m.Authorization=`Bearer ${n.apiKey}`}else if("claude"===s)d="https://api.anthropic.com/v1/messages",m["x-api-key"]=n.apiKey,m["anthropic-version"]="2023-06-01";else{if("testleaf"!==s)throw new Error(`Unknown provider: ${s}`);d=`${n.endpoint.endsWith("/")?n.endpoint:`${n.endpoint}/`}chat/completions`,m.Authorization=`Bearer ${n.apiKey}`}i="claude"===s?JSON.stringify({model:n.model,max_tokens:2048,messages:[{role:"user",content:l}]}):JSON.stringify({model:n.model,messages:[{role:"system",content:"You are an expert QA analyst specializing in user story quality assessment using INVEST methodology."},{role:"user",content:l}],temperature:.7,max_tokens:2048});const p=await fetch(d,{method:"POST",headers:m,body:i});if(!p.ok){const e=await p.text();throw new Error(`LLM API error: ${p.statusText} - ${e}`)}const x=await p.json();let h="";h="claude"===s?x.content[0].text:x.choices[0].message.content,c(h),g("User story analysis completed successfully")}catch(e){const t=e instanceof Error?e.message:"Analysis failed";u(t),console.error("Error analyzing user story:",e)}finally{o(!1)}else u("Please select a story to analyze")},disabled:i||!a,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2 mt-6",children:i?h.jsxs(h.Fragment,{children:[h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Analyzing..."]}):h.jsxs(h.Fragment,{children:[h.jsx(G,{className:"w-4 h-4"}),"User Story Analysis"]})})]}):h.jsx("p",{className:"text-slate-600 text-center py-8",children:"Select a story to view details and perform analysis"})})]}),d&&h.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4",children:[h.jsx("h3",{className:"font-semibold text-slate-900",children:"Analysis Results"}),h.jsx("div",{className:"bg-slate-50 p-4 rounded-lg whitespace-pre-wrap text-slate-700 max-h-96 overflow-y-auto text-sm border border-slate-200",children:d})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ’¡ How it works"}),h.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[h.jsx("li",{children:"â€¢ Stories are automatically fetched from configured Jira and ServiceNow instances"}),h.jsx("li",{children:"â€¢ Search and select a story to view its complete details"}),h.jsx("li",{children:'â€¢ Click "User Story Analysis" to analyze the requirement using AI'}),h.jsx("li",{children:"â€¢ Review the comprehensive analysis results including acceptance criteria validation"})]})]})]})}const ee={openai:[{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Latest GPT-4 with improved instruction following",contextWindow:128e3,costPer1kTokens:{input:.01,output:.03}},{id:"gpt-4",name:"GPT-4",description:"Most capable model for complex reasoning",contextWindow:8192,costPer1kTokens:{input:.03,output:.06}},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo",description:"Fast and efficient for most tasks",contextWindow:4096,costPer1kTokens:{input:.0015,output:.002}},{id:"gpt-4o",name:"GPT-4o",description:"Omni model - multimodal capabilities",contextWindow:128e3,costPer1kTokens:{input:.005,output:.015}}],groq:[{id:"openai/gpt-oss-120b",name:"openai/gpt-oss-120b",description:"Open-source reasoning model by OpenAI",contextWindow:8192},{id:"qwen/qwen3-32b",name:"qwen/qwen3-32b",description:"Fast, open-source mixture of experts model",contextWindow:32768},{id:"llama-3.1-8b-instant",name:"Llama 3.1 8B Instant",description:"Lightweight and fast Llama 3.1 model",contextWindow:131072}],"azure-openai":[{id:"gpt-4",name:"GPT-4",description:"Azure-hosted GPT-4 model",contextWindow:8192},{id:"gpt-4-32k",name:"GPT-4 32K",description:"GPT-4 with extended context",contextWindow:32768},{id:"gpt-35-turbo",name:"GPT-3.5 Turbo",description:"Azure-hosted GPT-3.5 Turbo",contextWindow:4096},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Azure-hosted GPT-4 Turbo with vision",contextWindow:128e3}],claude:[{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most intelligent model - best for complex tasks",contextWindow:2e5,costPer1kTokens:{input:.015,output:.075}},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet",description:"Balanced performance and speed",contextWindow:2e5,costPer1kTokens:{input:.003,output:.015}},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Fastest and most compact",contextWindow:2e5,costPer1kTokens:{input:25e-5,output:.00125}},{id:"claude-2.1",name:"Claude 2.1",description:"Previous version with 100k context",contextWindow:1e5,costPer1kTokens:{input:.008,output:.024}}],testleaf:[{id:"testleaf-sft",name:"TestLeaf SFT",description:"Specialized fine-tuned model for QA automation",contextWindow:8192},{id:"testleaf-pro",name:"TestLeaf Pro",description:"Enhanced model with better test case generation",contextWindow:16384},{id:"testleaf-enterprise",name:"TestLeaf Enterprise",description:"Enterprise model with advanced analytics",contextWindow:32768}]},te={openai:{id:"openai",name:"OpenAI",description:"GPT-4, GPT-3.5 Turbo, and other OpenAI models",icon:"ðŸ¤–",models:ee.openai,defaultModel:"gpt-4-turbo",endpoint:"https://api.openai.com/v1",apiKeyLabel:"OpenAI API Key (sk-...)",docLink:"https://platform.openai.com/docs"},groq:{id:"groq",name:"Groq",description:"Fast inference with Mixtral, Llama, and other open models",icon:"âš¡",models:ee.groq,defaultModel:"mixtral-8x7b-32768",endpoint:"https://api.groq.com/openai/v1",apiKeyLabel:"Groq API Key",docLink:"https://console.groq.com/docs"},"azure-openai":{id:"azure-openai",name:"Azure OpenAI",description:"Enterprise OpenAI models hosted on Azure",icon:"â˜ï¸",models:ee["azure-openai"],defaultModel:"gpt-4",endpoint:"https://your-resource.openai.azure.com/",apiKeyLabel:"Azure API Key",docLink:"https://learn.microsoft.com/azure/ai-services/openai/",additionalFields:[{name:"deploymentName",label:"Deployment Name",placeholder:"your-deployment-name",required:!0},{name:"apiVersion",label:"API Version",placeholder:"2024-02-15-preview",required:!0}]},claude:{id:"claude",name:"Claude",description:"Anthropic Claude models - Claude 3 Opus, Sonnet, Haiku",icon:"ðŸ§ ",models:ee.claude,defaultModel:"claude-3-opus-20240229",endpoint:"https://api.anthropic.com",apiKeyLabel:"Claude API Key (sk-ant-...)",docLink:"https://docs.anthropic.com"},testleaf:{id:"testleaf",name:"TestLeaf",description:"TestLeaf SFT - Specialized for QA test automation",icon:"ðŸƒ",models:ee.testleaf,defaultModel:"testleaf-sft",endpoint:"https://api.testleaf.com/v1",apiKeyLabel:"TestLeaf API Key",docLink:"https://testleaf.com/docs"}};function se(e){return ee[e]||[]}function ae(e,t){const s=ee[e];return(null==s?void 0:s.some(e=>e.id===t))??!1}class ne{constructor(){t(this,"configs",new Map),t(this,"connectionCache",new Map),t(this,"CACHE_DURATION",3e5)}addConfig(e,t){if(!t.apiKey||!t.apiKey.trim())throw new Error("API Key is required and cannot be empty");if(!t.endpoint||!t.endpoint.trim())throw new Error("Endpoint is required and cannot be empty");if(!t.model||!t.model.trim())throw new Error("Model is required and cannot be empty");this.configs.set(e,{...t,apiKey:t.apiKey.trim(),endpoint:t.endpoint.trim(),model:t.model.trim()}),this.connectionCache.delete(e)}getConfig(e){return this.configs.get(e)}getAllConfigs(){return Array.from(this.configs.values())}getConfiguredProviders(){return Array.from(this.configs.keys())}removeConfig(e){this.configs.delete(e),this.connectionCache.delete(e)}isConfigured(e){return this.configs.has(e)}async testConnection(e){const t=this.getConfig(e);if(!t)return{success:!1,message:"Provider not configured"};const s=this.connectionCache.get(e);if(s&&Date.now()-s.timestamp<this.CACHE_DURATION)return{success:s.result,message:s.result?"Connection successful (cached)":"Last connection failed (cached)"};try{const s=new Promise((e,t)=>setTimeout(()=>t(new Error("Connection timeout")),1e4)),a=await Promise.race([this.makeTestRequest(t),s]),n=a.ok;return this.connectionCache.set(e,{timestamp:Date.now(),result:n}),n?{success:!0,message:"Connection successful"}:{success:!1,message:`Connection failed: ${a.statusText}`}}catch(a){this.connectionCache.set(e,{timestamp:Date.now(),result:!1});return{success:!1,message:`Connection error: ${a instanceof Error?a.message:"Unknown error"}`}}}async makeTestRequest(e){const t={"Content-Type":"application/json"};let s,a,n="GET";if("openai"===e.provider)t.Authorization=`Bearer ${e.apiKey}`,s="https://api.openai.com/v1/models";else if("groq"===e.provider)t.Authorization=`Bearer ${e.apiKey}`,s="https://api.groq.com/openai/v1/models";else if("azure-openai"===e.provider){t["api-key"]=e.apiKey;const r=e.apiVersion||"2024-02-15-preview";s=`${e.endpoint.endsWith("/")?e.endpoint:`${e.endpoint}/`}openai/deployments/${e.deploymentName||"test"}/chat/completions?api-version=${r}`,n="POST",a=JSON.stringify({messages:[{role:"user",content:"test"}],max_tokens:1})}else if("claude"===e.provider)t["x-api-key"]=e.apiKey,t["anthropic-version"]="2023-06-01",s="https://api.anthropic.com/v1/models";else{if("testleaf"!==e.provider)throw new Error("Unknown provider");t.Authorization=`Bearer ${e.apiKey}`;s=`${e.endpoint.endsWith("/")?e.endpoint:`${e.endpoint}/`}models`}const r={method:n,headers:t};return a&&(r.body=a),fetch(s,r)}clearCache(){this.connectionCache.clear()}exportConfigSummary(){return Array.from(this.configs.entries()).map(([e,t])=>({provider:e,isConfigured:!0,model:t.model,endpoint:t.endpoint}))}}const re=new ne,le=Object.freeze(Object.defineProperty({__proto__:null,LLMService:ne,llmService:re},Symbol.toStringTag,{value:"Module"}));function ie(){const[e,t]=s.useState([]),[a,n]=s.useState(null),[r,l]=s.useState({}),[i,o]=s.useState(null),[d,c]=s.useState({}),[m,p]=s.useState(!1),[x,u]=s.useState(null);s.useEffect(()=>{const e=function(){const e={openai:null,groq:null,"azure-openai":null,claude:null,testleaf:null};return e.openai={provider:"openai",apiKey:"sk-...",endpoint:"https://api.openai.com/v1",model:"gpt-4-turbo"},e.groq={provider:"groq",apiKey:"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",endpoint:"https://api.groq.com/openai/v1",model:"openai/gpt-oss-120b"},e["azure-openai"]={provider:"azure-openai",apiKey:"8Nwn5j5xyBE26ya1w2P5zRZpfhvTfZdKvN9H53tZJBK7neSeLbnrJQQJ99BKACYeBjFXJ3w3AAABACOG8Rp0",endpoint:"https://r-automations.cognitiveservices.azure.com/",model:"gpt-4",deploymentName:"gpt-4.1",apiVersion:"2025-01-01-preview"},e.claude={provider:"claude",apiKey:"sk-ant-...",endpoint:"https://api.anthropic.com",model:"claude-3-opus-20240229"},e.testleaf={provider:"testleaf",apiKey:"...",endpoint:"https://api.testleaf.com/v1",model:"testleaf-sft"},e}(),s=Object.keys(te).map(t=>{const s=t,a=e[s]||null;return{provider:s,config:a,hasConfig:!!(null==a?void 0:a.apiKey),isConnected:!1,isTesting:!1,testResult:null,error:null}});t(s),re.clearCache()},[]);const b=s.useCallback(e=>{const t={};if(r.apiKey&&r.apiKey.trim()||(t.apiKey="API Key is required"),r.endpoint&&r.endpoint.trim())try{new URL(r.endpoint)}catch{t.endpoint="Invalid URL format"}else t.endpoint="Endpoint is required";r.model&&r.model.trim()?ae(e,r.model)||(t.model="Invalid model for this provider"):t.model="Model selection is required";const s=te[e];if(s.additionalFields)for(const a of s.additionalFields){const e=r[a.name];!a.required||e&&e.trim()||(t[a.name]=`${a.label} is required`)}return c(t),0===Object.keys(t).length},[r]),g=s.useCallback(t=>{if(x&&x!==t)return;const s=e.find(e=>e.provider===t);if(null==s?void 0:s.config)l({...s.config});else{const e=te[t];l({provider:t,apiKey:"",endpoint:e.endpoint,model:e.defaultModel})}n(t),c({})},[e,x]),f=s.useCallback(async e=>{if((!x||x===e)&&b(e)){p(!0);try{const s={provider:r.provider||e,apiKey:r.apiKey,endpoint:r.endpoint,model:r.model,deploymentName:r.deploymentName,apiVersion:r.apiVersion};re.addConfig(e,s),t(t=>t.map(t=>t.provider===e?{...t,config:s,isConnected:!0,hasConfig:!0,testResult:null,error:null}:t)),n(null),c({})}catch(s){c({submit:s instanceof Error?s.message:"Failed to save configuration"})}finally{p(!1)}}},[r,b,x]),v=s.useCallback(async e=>{if(!x||x!==e)return;t(t=>t.map(t=>t.provider===e?{...t,isTesting:!0,testResult:null}:t));const s=await re.testConnection(e);t(t=>t.map(t=>t.provider===e?{...t,isTesting:!1,testResult:s,isConnected:s.success}:t))},[x]),k=s.useCallback(e=>{x&&x===e&&(re.removeConfig(e),t(t=>t.map(t=>t.provider===e?{...t,config:null,hasConfig:!1,isConnected:!1,testResult:null,error:null}:t)),n(null),c({}))},[x]),C=s.useCallback(e=>{l(t=>({...t,model:e})),c(e=>{const t={...e};return delete t.model,t})},[]),S=Object.keys(te),T=(e,t)=>se(e).find(e=>e.id===t);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:[h.jsx(j,{className:"w-6 h-6 inline-block mr-2 text-blue-600"}),"LLM Model Integration"]}),h.jsx("p",{className:"text-slate-600",children:"Select one provider to enable editing and connection. Other providers will be disabled."})]}),h.jsxs("div",{className:"max-w-md",children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select LLM Provider to enable"}),h.jsxs("select",{value:x||"",onChange:e=>u(e.target.value||null),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all border-slate-300 focus:ring-blue-500 bg-white",children:[h.jsx("option",{value:"",children:"-- Choose provider to enable --"}),S.map(e=>h.jsx("option",{value:e,children:te[e].name},e))]}),h.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Only the selected provider can be configured and connected."})]}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(e=>{var t,s,p,u,b,j,S,L,A,P,M;const O=te[e.provider],F=a===e.provider,R=se(e.provider),z=e.config?T(e.provider,e.config.model):null,K=!!x&&x!==e.provider;return h.jsxs("div",{className:"relative bg-white border border-slate-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow "+(K?"opacity-60 pointer-events-none":""),children:[K&&h.jsx("div",{className:"absolute inset-0 pointer-events-none"}),h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"text-3xl",children:O.icon}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-bold text-slate-900",children:O.name}),h.jsx("p",{className:"text-sm text-slate-600 mt-1",children:O.description})]})]}),h.jsx("div",{className:"flex gap-2",children:e.isConnected?h.jsxs("div",{className:"flex items-center gap-1 bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-semibold",children:[h.jsx(N,{className:"w-3 h-3"}),"Connected"]}):e.hasConfig?h.jsx("div",{className:"flex items-center gap-1 bg-yellow-50 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold",children:"âš ï¸ Configured"}):null})]}),F?h.jsxs("div",{className:"space-y-4 border-t border-slate-200 pt-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:O.apiKeyLabel}),h.jsx("input",{type:"password",value:r.apiKey||"",onChange:e=>{l({...r,apiKey:e.target.value}),c(e=>{const t={...e};return delete t.apiKey,t})},placeholder:"Enter your API key",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all "+(d.apiKey?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500")}),d.apiKey&&h.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[h.jsx(y,{className:"w-3 h-3"})," ",d.apiKey]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"API Endpoint"}),h.jsx("input",{type:"text",value:r.endpoint||"",onChange:e=>{l({...r,endpoint:e.target.value}),c(e=>{const t={...e};return delete t.endpoint,t})},placeholder:"https://api.example.com",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all "+(d.endpoint?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500")}),d.endpoint&&h.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[h.jsx(y,{className:"w-3 h-3"})," ",d.endpoint]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Model"}),h.jsxs("select",{value:r.model||"",onChange:e=>C(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all bg-white "+(d.model?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"),children:[h.jsx("option",{value:"",children:"Choose a model..."}),R.map(e=>h.jsxs("option",{value:e.id,children:[e.name,e.contextWindow?` (${e.contextWindow.toLocaleString()} tokens)`:""]},e.id))]}),d.model&&h.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[h.jsx(y,{className:"w-3 h-3"})," ",d.model]}),r.model&&ae(e.provider,r.model)&&h.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg text-sm text-slate-700",children:[h.jsx("p",{className:"font-semibold",children:null==(t=T(e.provider,r.model))?void 0:t.name}),h.jsx("p",{className:"text-slate-600 mt-1",children:null==(s=T(e.provider,r.model))?void 0:s.description}),(null==(p=T(e.provider,r.model))?void 0:p.contextWindow)&&h.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["ðŸ“Š Context:"," ",null==(b=null==(u=T(e.provider,r.model))?void 0:u.contextWindow)?void 0:b.toLocaleString()," ","tokens"]}),(null==(j=T(e.provider,r.model))?void 0:j.costPer1kTokens)&&h.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["ðŸ’° Cost: $",null==(L=null==(S=T(e.provider,r.model))?void 0:S.costPer1kTokens)?void 0:L.input,"/1k input, $",null==(P=null==(A=T(e.provider,r.model))?void 0:A.costPer1kTokens)?void 0:P.output,"/1k output"]})]})]}),null==(M=O.additionalFields)?void 0:M.map(e=>h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[e.label,e.required&&h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"text",value:r[e.name]||"",onChange:t=>{l({...r,[e.name]:t.target.value}),c(t=>{const s={...t};return delete s[e.name],s})},placeholder:e.placeholder,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all "+(d[e.name]?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500")}),d[e.name]&&h.jsxs("p",{className:"text-red-600 text-xs mt-1 flex items-center gap-1",children:[h.jsx(y,{className:"w-3 h-3"})," ",d[e.name]]})]},e.name)),d.submit&&h.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-start gap-2",children:[h.jsx(y,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),h.jsx("span",{children:d.submit})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>f(e.provider),disabled:m,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2",children:[m&&h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Save Configuration"]}),h.jsx("button",{onClick:()=>{n(null),c({})},className:"flex-1 bg-slate-300 text-slate-700 py-2 rounded-lg hover:bg-slate-400 transition-colors font-semibold",children:"Cancel"})]})]}):h.jsxs("div",{className:"space-y-3 border-t border-slate-200 pt-4",children:[e.config&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-sm text-slate-600 space-y-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold",children:"Model:"})," ",(null==z?void 0:z.name)||e.config.model]}),(null==z?void 0:z.contextWindow)&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold",children:"Context:"})," ",z.contextWindow.toLocaleString()," tokens"]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold",children:"Endpoint:"})," ",e.config.endpoint]})]}),h.jsxs("div",{className:"mt-3",children:[h.jsxs("button",{onClick:()=>o(i===e.provider?null:e.provider),className:"w-full flex items-center justify-between px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[h.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"View available models"}),h.jsx(w,{className:"w-4 h-4 transition-transform "+(i===e.provider?"rotate-180":"")})]}),i===e.provider&&h.jsx("div",{className:"mt-2 border border-slate-200 rounded-lg overflow-hidden max-h-96 overflow-y-auto",children:R.map(t=>{var s,a;return h.jsx("div",{className:`p-3 border-b border-slate-100 last:border-b-0 ${(null==(s=e.config)?void 0:s.model)===t.id?"bg-blue-50":"bg-white"} hover:bg-slate-50 transition-colors cursor-pointer`,children:h.jsx("div",{className:"flex items-start justify-between",children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("p",{className:"font-semibold text-slate-900 text-sm",children:[t.name,(null==(a=e.config)?void 0:a.model)===t.id&&h.jsx(N,{className:"w-3 h-3 inline-block ml-2 text-green-600"})]}),h.jsx("p",{className:"text-xs text-slate-600 mt-1",children:t.description}),h.jsxs("div",{className:"flex gap-3 mt-2 text-xs text-slate-500 flex-wrap",children:[t.contextWindow&&h.jsxs("span",{children:["ðŸ“Š ",t.contextWindow.toLocaleString()," tokens"]}),t.costPer1kTokens&&h.jsxs("span",{children:["ðŸ’° $",t.costPer1kTokens.input,"/$",t.costPer1kTokens.output," per 1k"]})]})]})})},t.id)})})]}),e.testResult&&h.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm font-semibold "+(e.testResult.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:[e.testResult.success?h.jsx(N,{className:"w-4 h-4"}):h.jsx(W,{className:"w-4 h-4"}),e.testResult.message]})]}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsxs("button",{onClick:()=>g(e.provider),disabled:!!x&&x!==e.provider,className:"flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white py-2 rounded-lg transition-colors font-semibold text-sm "+(x&&x!==e.provider?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),children:[h.jsx(_,{className:"w-4 h-4"}),e.isConnected?"Edit":"Configure"]}),e.isConnected&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>v(e.provider),disabled:e.isTesting||!!x&&x!==e.provider,className:"flex-1 flex items-center justify-center gap-2 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors font-semibold text-sm",children:e.isTesting?h.jsxs(h.Fragment,{children:[h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Testing..."]}):h.jsxs(h.Fragment,{children:[h.jsx($,{className:"w-4 h-4"}),"Test"]})}),h.jsx("button",{onClick:()=>k(e.provider),disabled:!!x&&x!==e.provider,className:"flex items-center justify-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-semibold text-sm",children:h.jsx(V,{className:"w-4 h-4"})})]}),h.jsx("a",{href:O.docLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors font-semibold text-sm",children:h.jsx(E,{className:"w-4 h-4"})})]})]})]},e.provider)})}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ“ Configuration Guide"}),h.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[h.jsx("li",{children:"â€¢ Store API keys in your `.env.local` file using the `VITE_*` prefix"}),h.jsx("li",{children:"â€¢ Never commit `.env.local` to version control - add it to `.gitignore`"}),h.jsx("li",{children:"â€¢ Each provider supports multiple models with different capabilities"}),h.jsx("li",{children:"â€¢ Test connections to verify API credentials before using in production"}),h.jsx("li",{children:"â€¢ Model pricing and context window information is displayed for reference"}),h.jsx("li",{children:"â€¢ Only the selected provider will be used by the app; others remain disabled"})]})]}),h.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Active Integrations"}),h.jsx("div",{className:"text-sm text-slate-700",children:0===e.filter(e=>e.isConnected).length?h.jsx("p",{className:"text-slate-500",children:"No integrations connected yet. Select a provider, configure it, and save to connect."}):h.jsx("ul",{className:"space-y-1",children:e.filter(e=>e.isConnected).map(e=>{var t;return h.jsxs("li",{children:["âœ… ",te[e.provider].name," - Model: ",null==(t=e.config)?void 0:t.model]},e.provider)})})})]})]})}function oe(){const[e,t]=s.useState("llm"),[a,n]=s.useState([{id:"jira",title:"Jira Integration",description:"Sync with Jira for issue tracking and project management",icon:h.jsx(L,{className:"w-8 h-8"}),isConnected:!1,isConnecting:!1,endpoint:"",username:"",apiKey:"",docLink:"https://developer.atlassian.com/cloud/jira/rest/v3/"},{id:"servicenow",title:"ServiceNow Integration",description:"Connect to ServiceNow for incident and change management",icon:h.jsx(q,{className:"w-8 h-8"}),isConnected:!1,isConnecting:!1,endpoint:"",username:"",password:"",docLink:"https://developer.servicenow.com/dev_portal_landing.do"}]),[r,l]=s.useState(null),[i,o]=s.useState({});s.useEffect(()=>{const e=function(){const e={jira:{endpoint:"https://your-domain.atlassian.net",username:"your-email@example.com",apiKey:"your_jira_api_token_here"},servicenow:{endpoint:"https://dev182432.service-now.com",username:"admin",password:"xVFx2o*B5^Yi"}};return e}();(e.jira||e.servicenow)&&n(t=>t.map(t=>"jira"===t.id&&e.jira?{...t,endpoint:e.jira.endpoint,username:e.jira.username,apiKey:e.jira.apiKey}:"servicenow"===t.id&&e.servicenow?{...t,endpoint:e.servicenow.endpoint,username:e.servicenow.username,password:e.servicenow.password}:t))},[]),s.useEffect(()=>{const e=a.find(e=>"servicenow"===e.id);(null==e?void 0:e.isConnected)?localStorage.setItem("servicenow_config",JSON.stringify({endpoint:e.endpoint,username:e.username,isConnected:!0})):localStorage.removeItem("servicenow_config")},[a]);const d=e=>{const t=a.find(t=>t.id===e);t&&o({...t}),l(e)},c=async e=>{var t,s,r,l,i,o;const d=a.find(t=>t.id===e);if(d){if("jira"===e){if(!(null==(t=d.endpoint)?void 0:t.trim())||!(null==(s=d.username)?void 0:s.trim())||!(null==(r=d.apiKey)?void 0:r.trim()))return void alert("Please fill in all required fields for Jira")}else if(!("servicenow"!==e||(null==(l=d.endpoint)?void 0:l.trim())&&(null==(i=d.username)?void 0:i.trim())&&(null==(o=d.password)?void 0:o.trim())))return void alert("Please fill in all required fields for ServiceNow");n(a.map(t=>t.id===e?{...t,isConnecting:!0}:t));try{let t;if("jira"===e){const e=await async function(e,t,s){try{const a=await fetch("/api/jira/connect",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({baseUrl:e,email:t,apiToken:s})});if(!a.ok){const e=await a.json();return{success:!1,message:B(e)?e.error:`HTTP ${a.status}`}}const n=await a.json();return{success:!0,message:n.message,user:n.user}}catch(a){return a instanceof Error?{success:!1,message:a.message}:{success:!1,message:"Connection failed: Unknown error"}}}(d.endpoint||"",d.username||"",d.apiKey||"");t={success:e.success,message:e.message}}else if("servicenow"===e){const e=await async function(e,t,s){try{const a=await fetch("/api/servicenow/connect",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({instanceUrl:e,username:t,password:s})});if(!a.ok){const e=await a.json();return{success:!1,message:B(e)?e.error:`HTTP ${a.status}`}}return{success:!0,message:(await a.json()).message}}catch(a){return a instanceof Error?{success:!1,message:a.message}:{success:!1,message:"Connection failed: Unknown error"}}}(d.endpoint||"",d.username||"",d.password||"");t={success:e.success,message:e.message}}t&&(n(a.map(s=>s.id===e?{...s,isConnecting:!1,isConnected:t.success,testResult:t}:s)),t.success||alert(t.message))}catch(c){const t=c instanceof Error?c.message:"Unknown error";n(a.map(s=>s.id===e?{...s,isConnecting:!1,isConnected:!1,testResult:{success:!1,message:t}}:s)),alert(`Connection error: ${t}`)}}},m=(e,t)=>{o(s=>({...s,[e]:t}))};return"llm"===e?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[h.jsx("button",{onClick:()=>t("llm"),className:"px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600",children:"LLM Integration"}),h.jsx("button",{onClick:()=>t("other"),className:"px-4 py-2 font-semibold text-slate-600 hover:text-slate-900",children:"Other Integrations"})]}),h.jsx(ie,{})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[h.jsx("button",{onClick:()=>t("llm"),className:"px-4 py-2 font-semibold text-slate-600 hover:text-slate-900",children:"LLM Integration"}),h.jsx("button",{onClick:()=>t("other"),className:"px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600",children:"Other Integrations"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Other Integrations"}),h.jsx("p",{className:"text-slate-600",children:"Configure and manage your external service integrations. Credentials are securely stored in your session."})]}),h.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.map(e=>h.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow",children:[h.jsx("div",{className:"flex items-start justify-between mb-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"text-blue-600 bg-blue-50 p-3 rounded-lg",children:e.icon}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-bold text-slate-900",children:e.title}),h.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e.description})]})]})}),r===e.id?h.jsxs("div",{className:"space-y-4 border-t border-slate-200 pt-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["jira"===e.id?"Jira Instance URL":"ServiceNow Instance URL",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"text",value:i.endpoint||"",onChange:e=>m("endpoint",e.target.value),placeholder:"jira"===e.id?"https://your-domain.atlassian.net":"https://your-instance.service-now.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Username / Email",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"text",value:i.username||"",onChange:e=>m("username",e.target.value),placeholder:"your-username@email.com",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"jira"===e.id?h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["API Token",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"password",value:i.apiKey||"",onChange:e=>m("apiKey",e.target.value),placeholder:"Enter your Jira API token",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),h.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Get your API token from"," ",h.jsx("a",{href:"https://id.atlassian.com/manage-profile/security/api-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Atlassian API Tokens"})]})]}):h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Password",h.jsx("span",{className:"text-red-500",children:"*"})]}),h.jsx("input",{type:"password",value:i.password||"",onChange:e=>m("password",e.target.value),placeholder:"Enter your ServiceNow password",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>(e=>{var t,s,r,o,d,c;if("jira"===e){if(!(null==(t=i.endpoint)?void 0:t.trim())||!(null==(s=i.username)?void 0:s.trim())||!(null==(r=i.apiKey)?void 0:r.trim()))return void alert("Please fill in all required fields for Jira")}else if(!("servicenow"!==e||(null==(o=i.endpoint)?void 0:o.trim())&&(null==(d=i.username)?void 0:d.trim())&&(null==(c=i.password)?void 0:c.trim())))return void alert("Please fill in all required fields for ServiceNow");n(a.map(t=>t.id===e?{...t,...i}:t)),l(null)})(e.id),className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Save"}),h.jsx("button",{onClick:()=>l(null),className:"flex-1 bg-slate-300 text-slate-700 py-2 rounded-lg hover:bg-slate-400 transition-colors font-semibold",children:"Cancel"})]})]}):h.jsxs("div",{className:"space-y-3 border-t border-slate-200 pt-4",children:[e.endpoint&&h.jsxs("div",{className:"text-sm space-y-2 bg-slate-50 p-3 rounded-lg border border-slate-200",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"URL:"}),h.jsx("p",{className:"text-slate-600 break-all text-xs",children:e.endpoint})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Username:"}),h.jsx("p",{className:"text-slate-600",children:e.username})]}),"jira"===e.id&&e.apiKey&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"API Key:"}),h.jsx("p",{className:"text-slate-600",children:"â€¢".repeat(20)})]}),"servicenow"===e.id&&e.password&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Password:"}),h.jsx("p",{className:"text-slate-600",children:"â€¢".repeat(20)})]})]}),e.testResult&&h.jsxs("div",{className:"flex gap-2 p-3 rounded-lg border text-sm "+(e.testResult.success?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"),children:[h.jsx(v,{className:"w-5 h-5 flex-shrink-0 mt-0.5 "+(e.testResult.success?"text-green-600":"text-red-600")}),h.jsx("div",{children:e.testResult.message})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[e.isConnecting&&h.jsx(I,{className:"w-5 h-5 text-blue-600 animate-spin"}),e.isConnected&&!e.isConnecting&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),h.jsx("span",{className:"text-sm font-semibold text-green-700",children:"Connected"})]}),!e.isConnected&&!e.isConnecting&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"w-3 h-3 bg-slate-400 rounded-full"}),h.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Not Connected"})]})]}),h.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.isConnected?h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>d(e.id),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-semibold text-sm",children:"Update"}),h.jsx("button",{onClick:()=>{return t=e.id,n(a.map(e=>e.id===t?{...e,isConnected:!1,isConnecting:!1,testResult:void 0}:e)),void l(null);var t},className:"flex-1 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors font-semibold text-sm",children:"Disconnect"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>d(e.id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm",children:"Configure"}),e.endpoint&&e.username&&h.jsx("button",{onClick:()=>c(e.id),disabled:e.isConnecting,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors font-semibold text-sm flex items-center justify-center gap-2",children:e.isConnecting?h.jsxs(h.Fragment,{children:[h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):"Connect"})]}),e.docLink&&h.jsxs("a",{href:e.docLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors font-semibold text-sm",children:[h.jsx(E,{className:"w-4 h-4"}),"Docs"]})]})]})]},e.id))}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8",children:[h.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"How It Works"}),h.jsxs("ul",{className:"text-sm text-slate-700 space-y-2",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Jira:"}),' Enter your Jira instance URL, email, and API token. Click "Connect" to establish a secure session-based connection.']}),h.jsxs("li",{children:[h.jsx("strong",{children:"ServiceNow:"}),' Enter your ServiceNow instance URL, username, and password. Click "Connect" to establish a secure session-based connection.']}),h.jsxs("li",{children:[h.jsx("strong",{children:"Secure Session Storage:"})," Your credentials are validated once and stored securely in your session (not in the browser or .env). No repeated prompts!"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Test Cases Generator:"})," Once connected, you can select stories from Jira or ServiceNow and generate test cases using AI."]})]})]})]})}const de=[{id:"1",testCaseId:"TC-001",module:"Authentication",testCaseTitle:"User Login with Valid Credentials",testCaseDescription:"Verify that users can successfully login with valid email and password",preconditions:"User account must exist in the system",testSteps:"1. Navigate to login page\n2. Enter valid email\n3. Enter valid password\n4. Click Login button\n5. Verify redirect to dashboard",expectedResults:"User is logged in successfully and redirected to dashboard",priority:"P1",testType:"Functional",riskLevel:"Critical",linkedUserStories:["US-001","US-002"],sourceCitations:["REQ-AUTH-001"],complianceNotes:"Must comply with OWASP authentication standards",estimatedExecutionTime:"5 minutes"},{id:"2",testCaseId:"TC-002",module:"Authentication",testCaseTitle:"User Login with Invalid Credentials",testCaseDescription:"Verify that login fails with invalid credentials",preconditions:"User account must exist in the system",testSteps:"1. Navigate to login page\n2. Enter invalid email\n3. Enter invalid password\n4. Click Login button\n5. Verify error message",expectedResults:"Error message is displayed, user is not logged in",priority:"P1",testType:"Functional",riskLevel:"Critical",linkedUserStories:["US-001"],sourceCitations:["REQ-AUTH-002"],complianceNotes:"Must provide security warnings",estimatedExecutionTime:"5 minutes"}];function ce(){const[e]=s.useState(de),[t,a]=s.useState(null),n=e=>{switch(e){case"P1":return"bg-red-100 text-red-700 border-red-300";case"P2":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"P3":return"bg-green-100 text-green-700 border-green-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}},r=e=>{switch(e){case"Critical":return"bg-red-100 text-red-700 border-red-300";case"High":return"bg-orange-100 text-orange-700 border-orange-300";case"Medium":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"Low":return"bg-green-100 text-green-700 border-green-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}};return 0===e.length?h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 border border-slate-200 text-center",children:[h.jsx("div",{className:"text-slate-400 mb-4",children:h.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),h.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No Test Cases Found"}),h.jsx("p",{className:"text-slate-600",children:"Generate test cases from the Test Cases Generator module to see them here."})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Test Cases"}),h.jsxs("p",{className:"text-slate-600 mt-1",children:["Total: ",e.length," test cases"]})]})}),h.jsx("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Test Case ID"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Module"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Title"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Priority"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Test Type"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Risk Level"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Est. Time"}),h.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-200",children:e.map(e=>h.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[h.jsx("td",{className:"px-4 py-3 text-sm font-mono text-slate-900",children:e.testCaseId}),h.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:e.module}),h.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 font-medium max-w-xs truncate",children:e.testCaseTitle}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded border ${n(e.priority)}`,children:e.priority})}),h.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:e.testType}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded border ${r(e.riskLevel)}`,children:e.riskLevel})}),h.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:e.estimatedExecutionTime||"N/A"}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("button",{onClick:()=>a(e),className:"text-blue-600 hover:text-blue-800 text-sm font-semibold",children:"View Details"})})]},e.id))})]})})}),t&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Test Case Details"}),h.jsx("button",{onClick:()=>a(null),className:"text-slate-400 hover:text-slate-600",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Test Case ID"}),h.jsx("p",{className:"text-sm font-mono text-slate-900 mt-1",children:t.testCaseId})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Module"}),h.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.module})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Title"}),h.jsx("p",{className:"text-base font-semibold text-slate-900 mt-1",children:t.testCaseTitle})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Description"}),h.jsx("p",{className:"text-sm text-slate-700 mt-1 leading-relaxed",children:t.testCaseDescription})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Priority"}),h.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded border mt-2 ${n(t.priority)}`,children:t.priority})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Test Type"}),h.jsx("p",{className:"text-sm text-slate-900 mt-2",children:t.testType})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Risk Level"}),h.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded border mt-2 ${r(t.riskLevel)}`,children:t.riskLevel})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Preconditions"}),h.jsx("p",{className:"text-sm text-slate-700 mt-1 whitespace-pre-wrap",children:t.preconditions})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Test Steps"}),h.jsx("div",{className:"text-sm text-slate-700 mt-1 whitespace-pre-wrap bg-slate-50 p-4 rounded border border-slate-200",children:t.testSteps})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Expected Results"}),h.jsx("p",{className:"text-sm text-slate-700 mt-1 whitespace-pre-wrap",children:t.expectedResults})]}),t.linkedUserStories.length>0&&h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Linked User Stories"}),h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.linkedUserStories.map((e,t)=>h.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 text-sm rounded border border-blue-200",children:e},t))})]}),t.complianceNotes&&h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Compliance Notes"}),h.jsx("p",{className:"text-sm text-slate-700 mt-1",children:t.complianceNotes})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Estimated Execution Time"}),h.jsx("p",{className:"text-sm text-slate-900 mt-1",children:t.estimatedExecutionTime||"Not specified"})]})]})]})})]})}const me=new class{generateScenarioOutline(e){var t,s,a;const n=e.featureName||(null==(t=e.story)?void 0:t.title)||"Generated Feature",r=(null==(s=e.story)?void 0:s.description)||"",l=(null==(a=e.story)?void 0:a.epicTitle)?`Epic: ${e.story.epicTitle}`:"";let i=`Feature: ${n}\n`;if(l&&(i+=`  ${l}\n`),r&&(i+=`  ${r}\n`),i+="\n",e.testCases.length>0){const t=e.testCases[0].steps||[],s=this.generateScenarioName(e.testCases);i+=`  Scenario Outline: ${s}\n`;const a=[],n=[],r=[],l=new Set;t.forEach((e,s)=>{var i,o;const d=e.step.trim(),c=t.length>1?s/(t.length-1):0,m=null==(i=e.test_data)?void 0:i.match(/:\s*(.+?)(?:$|,)/);if(m&&m[1]){const t=e.test_data.match(/^([^:]+):/);t&&l.add(t[1].trim())}c<.33?a.push(d):c<.67?n.push(d):r.push({step:d,assertion:null==(o=e.expected_result)?void 0:o.trim()})}),a.forEach(e=>{i+=`    Given ${e}\n`}),n.forEach(e=>{i+=`    When ${e}\n`}),r.forEach((e,t)=>{if(i+=0===t?`    Then ${e.step}\n`:`    And ${e.step}\n`,e.assertion){this.splitAndFormatAssertions(e.assertion).forEach(e=>{i+=`    And ${e}\n`})}});const o=this.extractExampleColumns(e.testCases),d=Array.from(o.keys());d.length>0&&(i+="\n    Examples:\n",i+=`      | ${d.join(" | ")} |\n`,e.testCases.forEach(e=>{const t=d.map(t=>{var s;return(null==(s=o.get(t))?void 0:s.get(e.id))||"-"});i+=`      | ${t.join(" | ")} |\n`}))}return i}extractExampleColumns(e){const t=new Map;return e.forEach(e=>{if(!e.steps||0===e.steps.length)return;e.steps.forEach(s=>{if(!s.test_data)return;const a=s.test_data.split(":");if(2===a.length){const s=this.sanitizeForTable(a[0].trim()),n=this.sanitizeForTable(a[1].trim());t.has(s)||t.set(s,new Map),t.get(s).set(e.id,n)}}),t.has("test_case")||t.set("test_case",new Map),t.get("test_case").set(e.id,this.sanitizeForTable(e.name)),t.has("expected_result")||t.set("expected_result",new Map);const s=e.steps[e.steps.length-1];t.get("expected_result").set(e.id,this.sanitizeForTable((null==s?void 0:s.expected_result)||"")),t.has("priority")||t.set("priority",new Map),t.get("priority").set(e.id,e.priority),t.has("type")||t.set("type",new Map),t.get("type").set(e.id,e.test_type)}),t}async generateViaLLM(e,t){const s=await fetch("/api/feature-file/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testCases:e.testCases,story:e.story,featureName:e.featureName,llmProvider:t})});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to generate feature file via LLM")}return s.json()}splitAndFormatAssertions(e){if(!e)return[];return e.split(/[;]|(?:\s+and\s+)|(?:\s*\.\s*)/).map(e=>e.trim()).filter(e=>e.length>0).map(e=>["Verify","Check","Validate","Ensure","Confirm","Assert","Should"].some(t=>e.toLowerCase().startsWith(t.toLowerCase()))?e:e.toLowerCase().includes("disabled")||e.toLowerCase().includes("hidden")||e.toLowerCase().includes("not ")||e.toLowerCase().includes("show")||e.toLowerCase().includes("display")||e.toLowerCase().includes("appear")?`Verify ${e}`:e.toLowerCase().includes("error")||e.toLowerCase().includes("message")?`Check ${e}`:`Verify ${e}`)}generateScenarioName(e){if(1===e.length)return`Verify ${e[0].name}`;const t=[...new Set(e.map(e=>e.test_type))],s=t.join(" and ");return`Execute ${1===t.length?s:"multiple"} test scenarios`}sanitizeForTable(e){return e.replace(/\|/g," ").replace(/\n/g," ").substring(0,50)}downloadFeatureFile(e,t="features.feature"){const s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}async copyToClipboard(e){await navigator.clipboard.writeText(e)}getFileStats(e){const t=e.split("\n").length,s=(e.match(/Scenario Outline:/g)||[]).length,a=new Blob([e]).size;return{lines:t,size:a<1024?`${a}B`:a<1048576?`${(a/1024).toFixed(2)}KB`:`${(a/1048576).toFixed(2)}MB`,scenarios:s}}};function pe({testCases:e,story:t,onClose:a,currentLLMProvider:n}){const[r,l]=s.useState((null==t?void 0:t.title)||"Feature"),[i,o]=s.useState(null),[d,c]=s.useState(!1),[m,p]=s.useState(!1),[x,u]=s.useState(null),b=i?me.getFileStats(i):null;return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"sticky top-0 bg-slate-100 border-b border-slate-300 p-6 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(A,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Generate Gherkin Feature File"})]}),h.jsx("button",{onClick:a,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-200 rounded-lg transition-colors",children:h.jsx(W,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Feature Name"}),h.jsx("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"e.g., User Authentication",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x&&h.jsxs("div",{className:"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[h.jsx(y,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:x})]}),h.jsx("button",{onClick:async()=>{try{u(null),p(!0);try{const s=await me.generateViaLLM({testCases:e,story:t,featureName:r},n);o(s.featureFile)}catch(s){console.warn("LLM generation failed, falling back to local generation:",s);const a=me.generateScenarioOutline({testCases:e,story:t,featureName:r});o(a)}}catch(a){u(a instanceof Error?a.message:"Failed to generate feature file")}finally{p(!1)}},disabled:m,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2",children:m?h.jsxs(h.Fragment,{children:[h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):h.jsxs(h.Fragment,{children:[h.jsx(G,{className:"w-4 h-4"}),"Generate Feature File"]})})]}),h.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(G,{className:"w-4 h-4 text-blue-600"}),h.jsx("span",{className:"font-semibold text-slate-900",children:"AI-Powered Generation"})]}),h.jsxs("div",{className:"text-sm text-slate-700",children:["Generating with ",h.jsx("span",{className:"font-semibold",children:n.toUpperCase()})," provider"]}),h.jsx("div",{className:"text-xs text-slate-600 mt-2",children:"Enhanced scenarios using LLM provider. Falls back to local generation if needed."})]}),i&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-slate-900",children:"Generated Feature File"}),h.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[null==b?void 0:b.lines," lines Â· ",null==b?void 0:b.size," Â· ",null==b?void 0:b.scenarios," scenario(s)"]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:async()=>{if(i)try{await me.copyToClipboard(i),c(!0),setTimeout(()=>c(!1),2e3)}catch(e){u("Failed to copy to clipboard")}},className:"flex items-center gap-2 px-4 py-2 bg-slate-200 text-slate-900 rounded-lg hover:bg-slate-300 transition-colors text-sm font-medium",children:d?h.jsxs(h.Fragment,{children:[h.jsx(N,{className:"w-4 h-4"}),"Copied!"]}):h.jsxs(h.Fragment,{children:[h.jsx(C,{className:"w-4 h-4"}),"Copy"]})}),h.jsxs("button",{onClick:()=>{if(i){const e=`${r.toLowerCase().replace(/\s+/g,"_")}.feature`;me.downloadFeatureFile(i,e)}},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[h.jsx(T,{className:"w-4 h-4"}),"Download"]})]})]}),h.jsx("div",{className:"bg-slate-900 text-slate-50 rounded-lg p-4 overflow-x-auto font-mono text-sm",children:h.jsx("pre",{className:"whitespace-pre-wrap break-words",children:i})})]})]})]})})}function xe(){const[e,t]=s.useState([]),[a,r]=s.useState(null),[l,i]=s.useState(!1),[o,d]=s.useState(null),[c,m]=s.useState((()=>{const e=localStorage.getItem("selected_llm_provider"),t=re.getConfiguredProviders();return e&&t.includes(e)?e:t.length>0?t[0]:"openai"})()),[p,x]=s.useState((e=>{var t;const s=localStorage.getItem(`selected_llm_model_${e}`),a=se(e);return s&&a.some(e=>e.id===s)?s:(null==(t=a[0])?void 0:t.id)||"gpt-4-turbo"})(c)),[u,b]=s.useState([]),[g,f]=s.useState(!1),[j,v]=s.useState(null),[k,S]=s.useState(null),[E,L]=s.useState(3),[P,$]=s.useState(null),[M,O]=s.useState(null),[F,_]=s.useState(""),[z,q]=s.useState(new Set),[D,V]=s.useState(!1),J=re.getConfiguredProviders();s.useEffect(()=>{W()},[]),s.useEffect(()=>{localStorage.setItem("selected_llm_provider",c)},[c]),s.useEffect(()=>{localStorage.setItem(`selected_llm_model_${c}`,p)},[p,c]);const W=async()=>{i(!0),d(null);try{const e=await Q();t(e),e.length>0&&r(e[0])}catch(e){const t=e instanceof Error?e.message:"Failed to load stories";d(t)}finally{i(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(U,{className:"w-8 h-8 text-blue-600"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Test Cases Generator"}),h.jsx("p",{className:"text-slate-600 mt-1",children:"Generate test cases from Jira & ServiceNow stories using AI"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsx("div",{className:"lg:col-span-1 space-y-4",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"font-semibold text-slate-900",children:"Stories"}),h.jsx("button",{onClick:W,disabled:l,className:"p-2 text-slate-600 hover:text-slate-900 disabled:text-gray-400",title:"Refresh stories",children:h.jsx(R,{className:"w-4 h-4 "+(l?"animate-spin":"")})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Number of Test Cases"}),h.jsx("select",{value:E,onChange:e=>L(parseInt(e.target.value)),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[1,2,3,5,10].map(e=>h.jsxs("option",{value:e,children:[e," test case",1!==e?"s":""]},e))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Search Stories"}),h.jsx("input",{type:"text",placeholder:"Search by Story ID or text...",value:F,onChange:e=>_(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"})]}),o&&h.jsxs("div",{className:"flex gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-700 text-sm",children:[h.jsx(y,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:o})]}),l?h.jsx("div",{className:"flex items-center justify-center py-8",children:h.jsx(I,{className:"w-5 h-5 animate-spin text-blue-600"})}):0===e.length?h.jsxs("div",{className:"text-center py-4",children:[h.jsx("p",{className:"text-sm text-slate-600",children:"No stories found"}),h.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Configure Jira or ServiceNow credentials"})]}):h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:e.filter(e=>{const t=F.toLowerCase();return e.key.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)}).map(e=>h.jsxs("button",{onClick:()=>r(e),className:"w-full text-left p-3 rounded-lg border-2 transition-all "+((null==a?void 0:a.id)===e.id&&(null==a?void 0:a.source)===e.source?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"),children:[h.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:e.key}),h.jsx("div",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:e.title})]},`${e.source}-${e.id}`))})]})}),h.jsx("div",{className:"lg:col-span-1 space-y-4",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"font-semibold text-slate-900",children:"Selected Story"}),u.length>0&&h.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold",children:[u.length," Test Case",1!==u.length?"s":""]})]}),a?h.jsxs("div",{className:"space-y-4",children:[j&&h.jsxs("div",{className:"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:[h.jsx(y,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:j})]}),k&&h.jsxs("div",{className:"flex gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:[h.jsx(N,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),h.jsx("div",{children:k})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Key:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.key})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Title:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.title})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Status:"}),h.jsx("span",{className:"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:a.status})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Priority:"}),h.jsx("span",{className:"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:a.priority})]})]}),a.assignee&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Assignee:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.assignee})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Description:"}),h.jsx("p",{className:"text-slate-600 mt-1 bg-slate-50 p-2 rounded max-h-32 overflow-y-auto",children:a.description})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Acceptance Criteria:"}),a.acceptanceCriteria?h.jsx("ul",{className:"text-slate-600 mt-2 bg-slate-50 p-4 rounded max-h-40 overflow-y-auto space-y-2 list-disc list-inside",children:(e=>{if(!e)return[];const t=document.createElement("div");t.innerHTML=e;const s=t.querySelectorAll("li"),a=[];if(s.forEach(e=>{var t;const s=(null==(t=e.textContent)?void 0:t.trim())||"";s&&a.push(s)}),0===a.length){return e.replace(/<[^>]*>/g,"").replace(/&#\d+;/g,e=>{const t=parseInt(e.substring(2,e.length-1));return String.fromCharCode(t)}).replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").split("\n").map(e=>e.trim()).filter(e=>e.length>0)}return a})(a.acceptanceCriteria).map((e,t)=>h.jsx("li",{className:"text-sm text-slate-700",children:e},t))}):h.jsx("p",{className:"text-slate-500 italic mt-1",children:"No acceptance criteria provided"})]}),(a.epicKey||a.epicTitle)&&h.jsxs("div",{className:"border-t pt-4 mt-4",children:[h.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Epic Information"}),h.jsxs("div",{className:"space-y-2",children:[a.epicKey&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Epic Number:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.epicKey})]}),a.epicTitle&&h.jsxs("div",{children:[h.jsx("span",{className:"font-semibold text-slate-700",children:"Epic Short Description:"}),h.jsx("p",{className:"text-slate-600 mt-1",children:a.epicTitle})]})]})]})]}),h.jsx("button",{onClick:async()=>{var e,t,s;if(!a)return void v("Please select a story to generate test cases");if(0===J.length)return void v("No LLM providers configured. Please configure at least one provider in Settings.");const n=J.includes(c)?c:J[0],r=re.getConfig(n);if(r){f(!0),v(null),S(null);try{const l=`You are a QA test case generation expert. Generate ${E} comprehensive test cases based on the following user story:\n\nSTORY ID: ${a.key}\nTITLE: ${a.title}\nDESCRIPTION: ${a.description}\n${a.acceptanceCriteria?`ACCEPTANCE CRITERIA:\n${a.acceptanceCriteria}`:""}\nSTATUS: ${a.status}\nPRIORITY: ${a.priority}\nSOURCE: ${a.source.toUpperCase()}\n\nIMPORTANT: Return ONLY valid JSON with NO markdown formatting, NO code blocks, NO \`\`\` markers. Just raw JSON.\n\nGenerate test cases in the following FLAT JSON format (NO NESTED OBJECTS):\n\n{\n  "test_cases": [\n    {\n      "name": "Test Case Name",\n      "short_description": "Brief description",\n      "description": "Detailed test case description",\n      "test_type": "Positive",\n      "priority": "High",\n      "state": "draft",\n      "version": "1.0",\n      "steps": [\n        {\n          "order": 100,\n          "step": "Step description",\n          "expected_result": "Expected outcome",\n          "test_data": "Test data if applicable"\n        }\n      ]\n    }\n  ]\n}\n\nRequirements:\n- Each test case MUST have: name, short_description, description, test_type, priority, state, version, steps\n- short_description and description MUST start with an action verb (Verify, Check, Validate, Test, Ensure, Confirm, etc.)\n- Examples: "Verify user can login with valid credentials", "Check that error message displays", "Validate page loads successfully"\n- NO nested testData or versionData objects - use flat properties only\n- Include steps array with ordered steps (order field: 100, 200, 300, etc.)\n- Each step must have: order, step, expected_result, and test_data fields\n- Priority values: "Critical", "High", "Medium", "Low"\n- test_type values: "Positive", "Negative", "End to End", "Edge Cases"\n- Return valid JSON object with a "test_cases" array containing exactly ${E} test cases\n- DO NOT wrap the JSON in markdown code blocks (no \`\`\`json)\n- DO NOT add any text before or after the JSON\n- Return ONLY the JSON object`;let i="",o={"Content-Type":"application/json"};if("azure-openai"===n){const e=r.endpoint.endsWith("/")?r.endpoint:`${r.endpoint}/`,t=r.deploymentName||p;i=`${e}openai/deployments/${t}/chat/completions?api-version=${r.apiVersion||"2024-02-15-preview"}`,o["api-key"]=r.apiKey}else{i=r.endpoint.endsWith("/chat/completions")?r.endpoint:`${r.endpoint}/chat/completions`,o.Authorization=`Bearer ${r.apiKey}`}const d={model:p,messages:[{role:"user",content:l}],temperature:.7,max_tokens:"groq"===n?4096:2048},c=await fetch(i,{method:"POST",headers:o,body:JSON.stringify(d)});if(!c.ok){let t=c.statusText;try{const s=await c.json();t=(null==(e=s.error)?void 0:e.message)||s.message||JSON.stringify(s).substring(0,200)}catch{try{t=await c.text()}catch{}}throw new Error(`LLM API error (${c.status}): ${t}`)}const m=(null==(s=null==(t=(await c.json()).choices[0])?void 0:t.message)?void 0:s.content)||"";if(!m)throw new Error("Empty response from LLM - no content generated");const x=(e=>{let t=e.replace(/^```[\w]*\n/m,"").replace(/\n```\s*$/m,"").trim();try{const e=JSON.parse(t);if(e.test_cases&&Array.isArray(e.test_cases)&&e.test_cases.length>0)return e}catch{}try{const e=t.match(/"test_cases"\s*:\s*(\[[\s\S]*\])/);if(e&&e[1]){const t=e[1],s=JSON.parse(t);if(Array.isArray(s)&&s.length>0)return{test_cases:s}}}catch{}throw new Error("Could not extract valid JSON with test_cases from response")})(m).test_cases;if(!Array.isArray(x)||0===x.length)throw new Error("No test cases found in response");console.log("[TestCases] Successfully extracted test cases:",x.length),console.log("[TestCases] First test case structure:",JSON.stringify(x[0],null,2));const u=x.map((e,t)=>({...e,id:`gen-${Date.now()}-${t}`}));b(u),S(`Successfully generated ${u.length} test cases!`)}catch(l){const e=l instanceof Error?l.message:"Unknown error occurred";v(`Failed to generate test cases: ${e}`)}finally{f(!1)}}else v(`Provider ${n} is not properly configured`)},disabled:g||!a||0===J.length,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2 mt-6",children:g?h.jsxs(h.Fragment,{children:[h.jsx(I,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):h.jsxs(h.Fragment,{children:[h.jsx(G,{className:"w-4 h-4"}),"Generate Test Cases"]})})]}):h.jsx("p",{className:"text-slate-600 text-center py-8",children:"Select a story to view details and generate test cases"})]})})]}),u.length>0&&h.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4",children:[h.jsxs("h3",{className:"font-semibold text-slate-900",children:["Generated Test Cases (",u.length,")"]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-slate-100 border-b border-slate-300",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 text-center w-10",children:h.jsx("input",{type:"checkbox",checked:z.size===u.length&&u.length>0,onChange:()=>{z.size===u.length?q(new Set):q(new Set(u.map(e=>e.id)))},className:"w-4 h-4 cursor-pointer accent-blue-600"})}),h.jsx("th",{className:"px-4 py-3 text-center w-10"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Test Case Name"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Description"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Type"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Priority"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Story ID"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",children:"Epic Number"}),h.jsx("th",{className:"px-4 py-3 text-left font-semibold text-slate-700",title:"Epic Short Description",children:"Epic Description"}),h.jsx("th",{className:"px-4 py-3 text-center font-semibold text-slate-700",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-200",children:u.map(e=>h.jsxs(n.Fragment,{children:[h.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[h.jsx("td",{className:"px-4 py-3 text-center",children:h.jsx("input",{type:"checkbox",checked:z.has(e.id),onChange:()=>(e=>{const t=new Set(z);t.has(e)?t.delete(e):t.add(e),q(t)})(e.id),className:"w-4 h-4 cursor-pointer accent-blue-600"})}),h.jsx("td",{className:"px-4 py-3 text-center cursor-pointer",children:h.jsx(w,{className:"w-5 h-5 text-slate-400 transition-transform inline "+(M===e.id?"rotate-180":""),onClick:()=>O(M===e.id?null:e.id)})}),h.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900 max-w-xs truncate",children:e.name}),h.jsx("td",{className:"px-4 py-3 text-slate-600 max-w-sm truncate",children:e.short_description}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-blue-100 text-blue-700 border border-blue-300 inline-block",children:e.test_type})}),h.jsx("td",{className:"px-4 py-3",children:h.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-orange-100 text-orange-700 border border-orange-300 inline-block",children:e.priority})}),h.jsx("td",{className:"px-4 py-3 text-slate-600 font-mono text-sm",title:null==a?void 0:a.key,children:(null==a?void 0:a.key)||"â€”"}),h.jsx("td",{className:"px-4 py-3 text-slate-600 max-w-xs truncate",title:null==a?void 0:a.epicKey,children:(null==a?void 0:a.epicKey)||"â€”"}),h.jsx("td",{className:"px-4 py-3 text-slate-600 max-w-sm truncate",title:null==a?void 0:a.epicTitle,children:(null==a?void 0:a.epicTitle)||"â€”"}),h.jsx("td",{className:"px-4 py-3 text-center",children:h.jsx("button",{onClick:()=>(e=>{const t=JSON.stringify(e,null,2);navigator.clipboard.writeText(t),$(e.id),setTimeout(()=>$(null),2e3)})(e),className:"text-slate-400 hover:text-slate-600 transition-colors",title:"Copy to clipboard",children:P===e.id?h.jsx(N,{className:"w-4 h-4 text-green-600"}):h.jsx(C,{className:"w-4 h-4"})})})]}),M===e.id&&h.jsx("tr",{className:"bg-slate-50 border-l-4 border-blue-500",children:h.jsx("td",{colSpan:6,className:"px-4 py-4",children:h.jsxs("div",{className:"space-y-6",children:[e.description?h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-bold text-slate-900",children:"Description"}),h.jsx("p",{className:"text-sm text-slate-700 bg-white p-3 rounded border border-slate-200",children:String(e.description)})]}):null,e.steps&&e.steps.length>0?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("h4",{className:"font-bold text-slate-900 text-md border-b-2 border-purple-500 pb-2",children:["Test Steps (",e.steps.length,")"]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-xs border-collapse",children:[h.jsx("thead",{className:"bg-slate-200 border border-slate-300",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300 w-16",children:"Step #"}),h.jsx("th",{className:"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300",children:"Step Description"}),h.jsx("th",{className:"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300",children:"Expected Result"}),h.jsx("th",{className:"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300 w-32",children:"Test Data"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-300",children:e.steps.sort((e,t)=>e.order-t.order).map((e,t)=>h.jsxs("tr",{className:"bg-white hover:bg-slate-50 border border-slate-300",children:[h.jsx("td",{className:"px-3 py-2 text-slate-700 font-bold border border-slate-300 bg-slate-50",children:e.order}),h.jsx("td",{className:"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal",children:e.step}),h.jsx("td",{className:"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal",children:e.expected_result}),h.jsx("td",{className:"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal text-xs bg-slate-50 font-mono",children:e.test_data||"â€”"})]},t))})]})})]}):h.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800",children:"No test steps available. The LLM did not include step details in the response."})]})})})]},e.id))})]})}),u.length>0&&h.jsx("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsx("div",{className:"text-sm font-medium text-slate-700",children:z.size>0?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"font-semibold text-blue-600",children:z.size})," ","test case",1!==z.size?"s":""," selected"]}):h.jsx("span",{className:"text-slate-500",children:"Select test cases to perform bulk actions"})}),z.size>0&&h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:()=>{const e=u.filter(e=>z.has(e.id));console.log("[TestCases] Send to ServiceNow:",e),S(`Ready to send ${e.length} test case(s) to ServiceNow`),setTimeout(()=>S(null),3e3)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[h.jsx(K,{className:"w-4 h-4"}),"Send to ServiceNow"]}),h.jsxs("button",{onClick:()=>{const e=u.filter(e=>z.has(e.id));console.log("[TestCases] Export to CSV/Excel:",e),S(`Ready to export ${e.length} test case(s) to CSV/Excel`),setTimeout(()=>S(null),3e3)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[h.jsx(T,{className:"w-4 h-4"}),"Export CSV/Excel"]}),h.jsxs("button",{onClick:()=>{if(0===u.filter(e=>z.has(e.id)).length)return v("Please select at least one test case"),void setTimeout(()=>v(null),3e3);V(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:[h.jsx(A,{className:"w-4 h-4"}),"Generate Feature File"]})]})]})})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ’¡ How it works"}),h.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[h.jsx("li",{children:"â€¢ Stories are automatically fetched from configured Jira and ServiceNow instances"}),h.jsx("li",{children:"â€¢ Select a story from the list to view its details"}),h.jsx("li",{children:"â€¢ Choose an LLM provider and model for test case generation"}),h.jsx("li",{children:"â€¢ AI generates comprehensive test cases with structured steps and test data"}),h.jsx("li",{children:"â€¢ Select test cases and export them to CSV, Excel, or generate Gherkin Feature files"})]})]}),D&&h.jsx(pe,{testCases:Array.from(z).map(e=>u.find(t=>t.id===e)).filter(e=>void 0!==e),story:a,onClose:()=>V(!1),currentLLMProvider:c})]})}const ue="http://localhost:3001/api";const he=new class{async generateTests(e,t=2,s="both"){return(await fetch(`${ue}/tests/generate-rag`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:e,count:t,type:s})})).json()}async generateTestsFromDocument(e,t,s=2,a="both"){return(await fetch(`${ue}/tests/generate-document`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,endpoint:t,count:s,type:a})})).json()}async generateTestsFromFile(e,t,s=2,a="both"){const n=new FormData;n.append("file",e),t&&n.append("endpoint",t),n.append("count",s.toString()),n.append("type",a);return(await fetch(`${ue}/tests/generate-file`,{method:"POST",body:n})).json()}async generateTestsFromUrl(e,t,s=2,a="both"){return(await fetch(`${ue}/tests/generate-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,endpoint:t,count:s,type:a})})).json()}async generateTestsFromPrompt(e,t,s=2,a="both"){return(await fetch(`${ue}/tests/generate-prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,endpoint:t,count:s,type:a})})).json()}async ingestDocument(e){const t=new FormData;t.append("file",e);return(await fetch(`${ue}/documents/ingest`,{method:"POST",body:t})).json()}async searchRAG(e,t="hybrid",s=5){return(await fetch(`${ue}/rag/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,mode:t,limit:s})})).json()}};function be(){const[e,t]=s.useState(""),[a,n]=s.useState(2),[r,l]=s.useState("both"),[i,o]=s.useState(""),[d,c]=s.useState(2),[m,p]=s.useState("both"),[x,u]=s.useState(""),[b,g]=s.useState(null),[f,y]=s.useState(""),[j,v]=s.useState(""),[N,w]=s.useState("hybrid"),[k,C]=s.useState(5),[T,E]=s.useState(null),[L,$]=s.useState(!1),[I,O]=s.useState(!1),[_,R]=s.useState(!1),[K,q]=s.useState(!1),[D,G]=s.useState(!1),[U,V]=s.useState(!1),[H,B]=s.useState(!1),[Y,Z]=s.useState(null);return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-slate-200",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(S,{className:"w-6 h-6 text-blue-600"}),h.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Generate Tests from RAG"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endpoint"}),h.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"GET /users",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Test Count"}),h.jsx("select",{value:a,onChange:e=>n(Number(e.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10].map(e=>h.jsx("option",{value:e,children:e},e))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Test Type"}),h.jsxs("select",{value:r,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"both",children:"Both"}),h.jsx("option",{value:"positive",children:"Positive"}),h.jsx("option",{value:"negative",children:"Negative"})]})]})]}),h.jsxs("button",{onClick:async()=>{if(e){$(!0);try{const t=await he.generateTests(e,a,r);Z(t)}catch(t){console.error("Error:",t),Z({error:"Failed to generate tests"})}$(!1)}},disabled:!e||L,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[L?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(S,{className:"w-4 h-4"}),"Generate from RAG"]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-slate-200",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(A,{className:"w-6 h-6 text-green-600"}),h.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Generate Tests from Document"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endpoint (Optional)"}),h.jsx("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"GET /users",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Test Count"}),h.jsx("select",{value:d,onChange:e=>c(Number(e.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,6,7,8,9,10].map(e=>h.jsx("option",{value:e,children:e},e))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Test Type"}),h.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"both",children:"Both"}),h.jsx("option",{value:"positive",children:"Positive"}),h.jsx("option",{value:"negative",children:"Negative"})]})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Document Content"}),h.jsx("textarea",{value:x,onChange:e=>u(e.target.value),placeholder:"Paste your API specification or documentation here...",rows:6,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Or Upload File"}),h.jsx("input",{type:"file",onChange:e=>{var t;return g((null==(t=e.target.files)?void 0:t[0])||null)},accept:".yaml,.yml,.json,.pdf,.xlsx,.xls,.csv,.docx,.doc,.txt,.md",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Or Enter URL"}),h.jsx("input",{type:"url",value:f,onChange:e=>y(e.target.value),placeholder:"https://petstore3.swagger.io/",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:async()=>{if(x){O(!0);try{const e=await he.generateTestsFromDocument(x,i,d,m);Z(e)}catch(e){console.error("Error:",e),Z({error:"Document test generation failed"})}O(!1)}},disabled:!x||I,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[I?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(A,{className:"w-4 h-4"}),"Generate from Content"]}),h.jsxs("button",{onClick:async()=>{if(b){R(!0);try{const e=await he.generateTestsFromFile(b,i,d,m);Z(e)}catch(e){console.error("Error:",e),Z({error:"File test generation failed"})}R(!1)}},disabled:!b||_,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[_?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(J,{className:"w-4 h-4"}),"Generate from File"]}),h.jsxs("button",{onClick:async()=>{if(f){q(!0);try{const e=await he.generateTestsFromUrl(f,i,d,m);Z(e)}catch(e){console.error("Error:",e),Z({error:"URL test generation failed"})}q(!1)}},disabled:!f||K,className:"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[K?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(P,{className:"w-4 h-4"}),"Generate from URL"]}),h.jsxs("button",{onClick:async()=>{const e=window.prompt("Enter custom prompt for test generation:");if(e){G(!0);try{const t=await he.generateTestsFromPrompt(e,i,d,m);Z(t)}catch(t){console.error("Error:",t),Z({error:"Prompt test generation failed"})}G(!1)}},disabled:D,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[D?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(F,{className:"w-4 h-4"}),"Generate from Prompt"]})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-slate-200",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(z,{className:"w-6 h-6 text-purple-600"}),h.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"RAG Management"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-slate-800 mb-3",children:"Add Document to Knowledge Base"}),h.jsx("input",{type:"file",onChange:e=>{var t;return E((null==(t=e.target.files)?void 0:t[0])||null)},accept:".yaml,.yml,.json,.pdf,.xlsx,.xls,.csv,.docx,.doc,.txt,.md",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3"}),h.jsxs("button",{onClick:async()=>{if(T){B(!0);try{const e=await he.ingestDocument(T);Z(e),E(null)}catch(e){console.error("Error:",e),Z({error:"Document ingestion failed"})}B(!1)}},disabled:!T||H,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[H?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(J,{className:"w-4 h-4"}),"Ingest Document"]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-slate-800 mb-3",children:"Search Knowledge Base"}),h.jsx("input",{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:"Search query...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-2"}),h.jsxs("div",{className:"flex gap-2 mb-3",children:[h.jsxs("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[h.jsx("option",{value:"hybrid",children:"Hybrid"}),h.jsx("option",{value:"vector",children:"Vector"}),h.jsx("option",{value:"keyword",children:"Keyword"})]}),h.jsx("select",{value:k,onChange:e=>C(Number(e.target.value)),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[1,2,3,4,5,10,15,20].map(e=>h.jsx("option",{value:e,children:e},e))})]}),h.jsxs("button",{onClick:async()=>{if(j){V(!0);try{const e=await he.searchRAG(j,N,k);Z(e)}catch(e){console.error("Error:",e),Z({error:"Search failed"})}V(!1)}},disabled:!j||U,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[U?h.jsx(M,{className:"w-4 h-4 animate-spin"}):h.jsx(z,{className:"w-4 h-4"}),"Search"]})]})]})]}),Y&&h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-slate-200",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Results"}),h.jsx("button",{onClick:()=>Z(null),className:"p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg",children:h.jsx(W,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"bg-slate-50 rounded-lg p-4 max-h-96 overflow-auto",children:h.jsx("pre",{className:"text-sm text-slate-800 whitespace-pre-wrap",children:JSON.stringify(Y,null,2)})})]})]})}function ge({provider:e,isConnected:t,isLoading:s=!1}){const a=s?"text-yellow-500":t?"text-green-500":"text-red-500",n=s?"bg-yellow-50":t?"bg-green-50":"bg-red-50";return h.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full ${n} border ${s?"border-yellow-200":t?"border-green-200":"border-red-200"}`,children:[h.jsx(k,{className:`w-2 h-2 ${a}`,fill:"currentColor"}),h.jsx("span",{className:"text-xs font-semibold "+(s?"text-yellow-700":t?"text-green-700":"text-red-700"),children:e})]})}const fe=[{id:1,title:"Requirement Analysis",icon:h.jsx(A,{className:"w-5 h-5"})},{id:2,title:"Test Cases Generator",icon:h.jsx(U,{className:"w-5 h-5"})},{id:3,title:"Swagger - API Testcase Generator",icon:h.jsx(S,{className:"w-5 h-5"})},{id:13,title:"Settings",icon:h.jsx(D,{className:"w-5 h-5"})}];function ye(){var e;const[t,a]=s.useState(1),[n,r]=s.useState(!0),[l,i]=s.useState({provider:null,isConnected:!1,isLoading:!1}),[o,d]=s.useState({isConnected:!1,isLoading:!1});s.useEffect(()=>{const e=async()=>{const e=re.getConfiguredProviders();if(e.length>0){const t=e[0];i(e=>({...e,provider:t,isLoading:!0}));const s=await re.testConnection(t);i({provider:t,isConnected:s.success,isLoading:!1})}else i({provider:null,isConnected:!1,isLoading:!1});const t=localStorage.getItem("servicenow_config");d({isConnected:!!t,isLoading:!1})};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const c=fe.find(e=>e.id===t);return h.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[h.jsxs("div",{className:(n?"w-64":"w-0")+" bg-gradient-to-b from-blue-900 to-blue-800 transition-all duration-300 overflow-hidden",children:[h.jsxs("div",{className:"p-6 border-b border-blue-700",children:[h.jsx("h1",{className:"text-2xl font-bold text-white",children:"QA Suite"}),h.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Automation Tools"})]}),h.jsx("nav",{className:"mt-6 space-y-1 px-3",children:fe.map(e=>h.jsxs("button",{onClick:()=>a(e.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 text-left group "+(t===e.id?"bg-blue-600 text-white shadow-md":"text-blue-100 hover:bg-blue-700 hover:text-white"),children:[h.jsx("div",{className:"flex-shrink-0",children:e.icon}),h.jsx("span",{className:"flex-1 text-sm font-medium truncate",children:e.title})]},e.id))})]}),h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[h.jsx("button",{onClick:()=>r(!n),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-700",children:n?h.jsx(W,{className:"w-5 h-5"}):h.jsx(O,{className:"w-5 h-5"})}),h.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:null==c?void 0:c.title}),h.jsxs("div",{className:"flex items-center gap-3",children:[l.provider&&h.jsx(ge,{provider:(null==(e=te[l.provider])?void 0:e.name)||l.provider,isConnected:l.isConnected,isLoading:l.isLoading}),o.isConnected&&h.jsx(ge,{provider:"ServiceNow",isConnected:o.isConnected,isLoading:o.isLoading}),!l.provider&&!o.isConnected&&h.jsx("div",{className:"text-xs text-slate-500",children:"No integrations configured"})]})]}),h.jsx("div",{className:"flex-1 p-8 overflow-auto",children:h.jsx("div",{className:"max-w-6xl",children:1===t?h.jsx(X,{}):2===t?h.jsx(xe,{}):3===t?h.jsx(be,{}):12===t?h.jsx(ce,{}):13===t?h.jsx(oe,{}):h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 border border-slate-200",children:[h.jsx("div",{className:"flex justify-center mb-6 text-blue-600",children:h.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center",children:null==c?void 0:c.icon})}),h.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-4 text-center",children:null==c?void 0:c.title}),h.jsxs("p",{className:"text-slate-600 text-lg text-center leading-relaxed",children:["Welcome to the ",null==c?void 0:c.title," module. This is where the functionality will be implemented."]})]})})})]})]})}u(document.getElementById("root")).render(h.jsx(s.StrictMode,{children:h.jsx(ye,{})}));
//# sourceMappingURL=index-DUla-V7y.js.map
