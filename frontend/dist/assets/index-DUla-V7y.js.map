{"version":3,"mappings":"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","names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","createRoot","hydrateRoot","defaultAttributes","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","absoluteStrokeWidth","className","children","rest","createElement","Number","string","replace","toLowerCase","trim","join","map","tag","attrs","Array","isArray","displayName","AlertCircle","cx","cy","r","x1","x2","y1","y2","Brain","CheckCircle","Check","ChevronDown","CircleDot","Copy","x","y","rx","ry","Database","Download","points","ExternalLink","Figma","FileText","Globe","Link2","Loader2","Loader","Menu","MessageSquare","Plus","RefreshCw","Search","Send","Settings2","Settings","Sparkles","TestTubes","Trash2","Upload","X","isApiError","data","async","fetchJiraStories","response","fetch","method","credentials","headers","Accept","ok","json","errorMsg","error","status","Error","stories","fetchServiceNowStories","fetchAllStories","results","Promise","allSettled","forEach","result","push","value","RequirementAnalysis","setStories","useState","selectedStory","setSelectedStory","searchTerm","setSearchTerm","isAnalyzing","setIsAnalyzing","analysisResult","setAnalysisResult","loading","setLoading","setError","success","setSuccess","useEffect","fetchedStories","length","err","message","loadStories","filteredStories","filter","story","includes","title","description","parseAcceptanceCriteria","html","tempDiv","document","innerHTML","listItems","querySelectorAll","items","li","text","_a","textContent","match","code","parseInt","substring","String","fromCharCode","placeholder","onChange","target","onClick","id","source","priority","assignee","acceptanceCriteria","criterion","idx","epicKey","epicTitle","llmService","__vitePreload","resolve","then","llmService$1","__VITE_PRELOAD__","configuredProviders","getConfiguredProviders","provider","config","getConfig","acceptanceCriteriaText","prompt","body","url","endpoint","endsWith","deploymentName","model","apiVersion","apiKey","JSON","stringify","max_tokens","messages","role","content","temperature","errorData","statusText","analysis","choices","console","disabled","Fragment","LLM_MODELS","openai","name","contextWindow","costPer1kTokens","input","output","groq","claude","testleaf","LLM_PROVIDERS","icon","models","defaultModel","apiKeyLabel","docLink","additionalFields","label","required","getModelsByProvider","isValidModel","modelId","some","LLMService","constructor","__publicField","this","Map","addConfig","configs","set","connectionCache","delete","get","getAllConfigs","from","values","keys","removeConfig","isConfigured","has","testConnection","cached","Date","now","timestamp","CACHE_DURATION","timeoutPromise","_","reject","setTimeout","race","makeTestRequest","fetchOptions","clearCache","clear","exportConfigSummary","entries","LLMSettings","integrations","setIntegrations","editingProvider","setEditingProvider","tempConfig","setTempConfig","expandedModel","setExpandedModel","formErrors","setFormErrors","isSaving","setIsSaving","selectedProvider","setSelectedProvider","envConfigs","getLLMConfigFromEnv","providers","hasConfig","isConnected","isTesting","testResult","validateForm","useCallback","errors","URL","providerConfig","field","handleEdit","integration","find","i","handleSave","newConfig","prev","submit","handleTestConnection","handleDisconnect","handleModelChange","updated","providerOptions","getModelInfo","isEditing","currentModel","toLocaleString","_b","_c","_e","_d","_f","_h","_g","_j","_i","_k","href","rel","selectedTab","setSelectedTab","isConnecting","username","password","editingId","setEditingId","envConfig","getIntegrationConfigFromEnv","jira","servicenow","prevIntegrations","serviceNowIntegration","localStorage","setItem","removeItem","handleConnect","alert","baseUrl","email","apiToken","user","connectJira","instanceUrl","connectServiceNow","errorMessage","updateTempConfig","repeat","mockTestCases","testCaseId","module","testCaseTitle","testCaseDescription","preconditions","testSteps","expectedResults","testType","riskLevel","linkedUserStories","sourceCitations","complianceNotes","estimatedExecutionTime","TestCases","testCases","selectedTestCase","setSelectedTestCase","getPriorityColor","getRiskLevelColor","testCase","featureFileService","generateScenarioOutline","options","featureName","steps","scenarioName","generateScenarioName","givenSteps","whenSteps","thenSteps","testDataKeys","Set","step","index","stepText","ratio","dataMatches","test_data","keyMatch","add","assertion","expected_result","stepObj","splitAndFormatAssertions","exampleColumns","extractExampleColumns","columnHeaders","header","columns","parts","split","sanitizeForTable","lastStep","test_type","generateViaLLM","llmProvider","assertionText","s","startsWith","verb","types","tc","typesStr","downloadFeatureFile","filename","element","setAttribute","encodeURIComponent","style","display","appendChild","click","removeChild","copyToClipboard","navigator","clipboard","writeText","getFileStats","lines","scenarios","bytes","Blob","toFixed","FeatureFileGenerator","onClose","currentLLMProvider","setFeatureName","generatedContent","setGeneratedContent","copied","setCopied","stats","featureFile","llmError","warn","toUpperCase","TestCasesGenerator","loadingStories","setLoadingStories","storiesError","setStoriesError","_setSelectedProvider","saved","getItem","getPersistentProvider","selectedModel","_setSelectedModel","availableModels","getPersistentModel","generatedTestCases","setGeneratedTestCases","isGenerating","setIsGenerating","numTestCases","setNumTestCases","copiedId","setCopiedId","expandedTestCaseId","setExpandedTestCaseId","selectedTestCaseIds","setSelectedTestCaseIds","showFeatureFileModal","setShowFeatureFileModal","num","searchLower","line","requestBody","errorDetail","errorBody","cleanText","parsed","parse","test_cases","arrayStr","testCasesArray","extractAndParseJSON","log","formattedTestCases","checked","React","newSelected","handleSelectTestCase","short_description","colSpan","sort","order","selectedCases","BASE_URL","ragApiService","generateTests","count","generateTestsFromDocument","generateTestsFromFile","file","formData","FormData","append","toString","generateTestsFromUrl","generateTestsFromPrompt","ingestDocument","searchRAG","query","mode","limit","SwaggerAPI","ragEndpoint","setRagEndpoint","ragTestCount","setRagTestCount","ragTestType","setRagTestType","docEndpoint","setDocEndpoint","docTestCount","setDocTestCount","docTestType","setDocTestType","documentContent","setDocumentContent","selectedTestFile","setSelectedTestFile","setUrl","setQuery","searchMode","setSearchMode","searchLimit","setSearchLimit","selectedFile","setSelectedFile","loadingRAG","setLoadingRAG","loadingDocument","setLoadingDocument","loadingFile","setLoadingFile","loadingUrl","setLoadingUrl","loadingPrompt","setLoadingPrompt","loadingSearch","setLoadingSearch","loadingIngest","setLoadingIngest","setResults","rows","files","accept","window","StatusBadge","isLoading","statusColor","backgroundColor","menuItems","SettingsIcon","App","selectedMenu","setSelectedMenu","sidebarOpen","setSidebarOpen","llmStatus","setLlmStatus","serviceNowStatus","setServiceNowStatus","checkStatuses","serviceNowConfig","interval","setInterval","clearInterval","selectedItem","item","getElementById","render","StrictMode"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],"sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-down.js","../../node_modules/lucide-react/dist/esm/icons/circle-dot.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/external-link.js","../../node_modules/lucide-react/dist/esm/icons/figma.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/globe.js","../../node_modules/lucide-react/dist/esm/icons/link-2.js","../../node_modules/lucide-react/dist/esm/icons/loader-2.js","../../node_modules/lucide-react/dist/esm/icons/loader.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/send.js","../../node_modules/lucide-react/dist/esm/icons/settings-2.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/test-tubes.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../src/services/integrationService.ts","../../src/components/RequirementAnalysis.tsx","../../src/config/llmConfig.ts","../../src/services/llmService.ts","../../src/components/LLMSettings.tsx","../../src/components/Settings.tsx","../../src/config/integrationConfig.ts","../../src/components/TestCases.tsx","../../src/services/featureFileService.ts","../../src/components/FeatureFileGenerator.tsx","../../src/components/TestCasesGenerator.tsx","../../src/services/ragApiService.ts","../../src/components/SwaggerAPI.tsx","../../src/components/StatusBadge.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({\n      color = \"currentColor\",\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = \"\",\n      children,\n      ...rest\n    }, ref) => {\n      return createElement(\n        \"svg\",\n        {\n          ref,\n          ...defaultAttributes,\n          width: size,\n          height: size,\n          stroke: color,\n          strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n          className: [\"lucide\", `lucide-${toKebabCase(iconName)}`, className].join(\" \"),\n          ...rest\n        },\n        [\n          ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n          ...Array.isArray(children) ? children : [children]\n        ]\n      );\n    }\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"Brain\", [\n  [\n    \"path\",\n    {\n      d: \"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z\",\n      key: \"l5xja\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z\",\n      key: \"ep3f8r\"\n    }\n  ],\n  [\"path\", { d: \"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4\", key: \"1p4c4q\" }],\n  [\"path\", { d: \"M17.599 6.5a3 3 0 0 0 .399-1.375\", key: \"tmeiqw\" }],\n  [\"path\", { d: \"M6.003 5.125A3 3 0 0 0 6.401 6.5\", key: \"105sqy\" }],\n  [\"path\", { d: \"M3.477 10.896a4 4 0 0 1 .585-.396\", key: \"ql3yin\" }],\n  [\"path\", { d: \"M19.938 10.5a4 4 0 0 1 .585.396\", key: \"1qfode\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-1.967-.516\", key: \"2e4loj\" }],\n  [\"path\", { d: \"M19.967 17.484A4 4 0 0 1 18 18\", key: \"159ez6\" }]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"ChevronDown\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleDot = createLucideIcon(\"CircleDot\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }]\n]);\n\nexport { CircleDot as default };\n//# sourceMappingURL=circle-dot.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Copy = createLucideIcon(\"Copy\", [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n]);\n\nexport { Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Database = createLucideIcon(\"Database\", [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n]);\n\nexport { Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ExternalLink = createLucideIcon(\"ExternalLink\", [\n  [\"path\", { d: \"M15 3h6v6\", key: \"1q9fwt\" }],\n  [\"path\", { d: \"M10 14 21 3\", key: \"gplh6r\" }],\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }]\n]);\n\nexport { ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Figma = createLucideIcon(\"Figma\", [\n  [\"path\", { d: \"M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z\", key: \"1340ok\" }],\n  [\"path\", { d: \"M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z\", key: \"1hz3m3\" }],\n  [\"path\", { d: \"M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z\", key: \"1oz8n2\" }],\n  [\"path\", { d: \"M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z\", key: \"1ff65i\" }],\n  [\"path\", { d: \"M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z\", key: \"pdip6e\" }]\n]);\n\nexport { Figma as default };\n//# sourceMappingURL=figma.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\"path\", { d: \"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z\", key: \"1rqfz7\" }],\n  [\"path\", { d: \"M14 2v4a2 2 0 0 0 2 2h4\", key: \"tnqrlb\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"Globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Link2 = createLucideIcon(\"Link2\", [\n  [\"path\", { d: \"M9 17H7A5 5 0 0 1 7 7h2\", key: \"8i5ue5\" }],\n  [\"path\", { d: \"M15 7h2a5 5 0 1 1 0 10h-2\", key: \"1b9ql8\" }],\n  [\"line\", { x1: \"8\", x2: \"16\", y1: \"12\", y2: \"12\", key: \"1jonct\" }]\n]);\n\nexport { Link2 as default };\n//# sourceMappingURL=link-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader2 = createLucideIcon(\"Loader2\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { Loader2 as default };\n//# sourceMappingURL=loader-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\", key: \"1lielz\" }]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Send = createLucideIcon(\"Send\", [\n  [\"path\", { d: \"m22 2-7 20-4-9-9-4Z\", key: \"1q3vgg\" }],\n  [\"path\", { d: \"M22 2 11 13\", key: \"nzbqef\" }]\n]);\n\nexport { Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings2 = createLucideIcon(\"Settings2\", [\n  [\"path\", { d: \"M20 7h-9\", key: \"3s1dr2\" }],\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n]);\n\nexport { Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"Sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\",\n      key: \"17u4zn\"\n    }\n  ],\n  [\"path\", { d: \"M5 3v4\", key: \"bklmnn\" }],\n  [\"path\", { d: \"M19 17v4\", key: \"iiml17\" }],\n  [\"path\", { d: \"M3 5h4\", key: \"nem4j1\" }],\n  [\"path\", { d: \"M17 19h4\", key: \"lbex7p\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TestTubes = createLucideIcon(\"TestTubes\", [\n  [\"path\", { d: \"M9 2v17.5A2.5 2.5 0 0 1 6.5 22v0A2.5 2.5 0 0 1 4 19.5V2\", key: \"12z67u\" }],\n  [\"path\", { d: \"M20 2v17.5a2.5 2.5 0 0 1-2.5 2.5v0a2.5 2.5 0 0 1-2.5-2.5V2\", key: \"1q2nfy\" }],\n  [\"path\", { d: \"M3 2h7\", key: \"7s29d5\" }],\n  [\"path\", { d: \"M14 2h7\", key: \"7sicin\" }],\n  [\"path\", { d: \"M9 16H4\", key: \"1bfye3\" }],\n  [\"path\", { d: \"M20 16h-5\", key: \"ddnjpe\" }]\n]);\n\nexport { TestTubes as default };\n//# sourceMappingURL=test-tubes.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * @license lucide-react v0.344.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\r\n * Integration Service for ServiceNow and Jira (via Backend)\r\n * Handles fetching user stories from both platforms through Express backend\r\n * \r\n * Security: Credentials are never stored on frontend - only in server-side sessions\r\n */\r\n\r\nexport interface Story {\r\n  id: string;\r\n  key: string;\r\n  title: string;\r\n  description: string;\r\n  acceptanceCriteria?: string;\r\n  status: string;\r\n  priority: string;\r\n  assignee?: string;\r\n  epicKey?: string;\r\n  epicTitle?: string;\r\n  source: 'jira' | 'servicenow';\r\n}\r\n\r\n// Error responses from API\r\ninterface ApiError {\r\n  error: string;\r\n}\r\n\r\nfunction isApiError(data: unknown): data is ApiError {\r\n  return typeof data === 'object' && data !== null && 'error' in data;\r\n}\r\n\r\n/**\r\n * Fetch user stories from Jira via backend\r\n */\r\nexport async function fetchJiraStories(): Promise<Story[]> {\r\n  try {\r\n    const response = await fetch('/api/jira/stories', {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      const errorMsg = isApiError(data) ? data.error : `HTTP ${response.status}`;\r\n      throw new Error(`Failed to fetch Jira stories: ${errorMsg}`);\r\n    }\r\n\r\n    const data = await response.json() as { stories: Story[] };\r\n    return data.stories || [];\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      throw error;\r\n    }\r\n    throw new Error('Failed to fetch Jira stories: Unknown error');\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch incidents/user stories from ServiceNow via backend\r\n */\r\nexport async function fetchServiceNowStories(): Promise<Story[]> {\r\n  try {\r\n    const response = await fetch('/api/servicenow/stories', {\r\n      method: 'GET',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      const errorMsg = isApiError(data) ? data.error : `HTTP ${response.status}`;\r\n      throw new Error(`Failed to fetch ServiceNow stories: ${errorMsg}`);\r\n    }\r\n\r\n    const data = await response.json() as { stories: Story[] };\r\n    return data.stories || [];\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      throw error;\r\n    }\r\n    throw new Error('Failed to fetch ServiceNow stories: Unknown error');\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch all stories from both Jira and ServiceNow\r\n */\r\nexport async function fetchAllStories(): Promise<Story[]> {\r\n  const results = await Promise.allSettled([fetchJiraStories(), fetchServiceNowStories()]);\r\n\r\n  const stories: Story[] = [];\r\n\r\n  results.forEach((result) => {\r\n    if (result.status === 'fulfilled') {\r\n      stories.push(...result.value);\r\n    }\r\n  });\r\n\r\n  return stories;\r\n}\r\n\r\n/**\r\n * Connect to Jira via backend\r\n * Credentials are validated on backend and stored in secure session\r\n */\r\nexport async function connectJira(baseUrl: string, email: string, apiToken: string): Promise<{ success: boolean; message: string; user?: string }> {\r\n  try {\r\n    const response = await fetch('/api/jira/connect', {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n      },\r\n      body: JSON.stringify({ baseUrl, email, apiToken }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      const errorMsg = isApiError(data) ? data.error : `HTTP ${response.status}`;\r\n      return { success: false, message: errorMsg };\r\n    }\r\n\r\n    const data = await response.json();\r\n    return { success: true, message: data.message, user: data.user };\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      return { success: false, message: error.message };\r\n    }\r\n    return { success: false, message: 'Connection failed: Unknown error' };\r\n  }\r\n}\r\n\r\n/**\r\n * Connect to ServiceNow via backend\r\n * Credentials are validated on backend and stored in secure session\r\n */\r\nexport async function connectServiceNow(instanceUrl: string, username: string, password: string): Promise<{ success: boolean; message: string }> {\r\n  try {\r\n    const response = await fetch('/api/servicenow/connect', {\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n      },\r\n      body: JSON.stringify({ instanceUrl, username, password }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const data = await response.json();\r\n      const errorMsg = isApiError(data) ? data.error : `HTTP ${response.status}`;\r\n      return { success: false, message: errorMsg };\r\n    }\r\n\r\n    const data = await response.json();\r\n    return { success: true, message: data.message };\r\n  } catch (error) {\r\n    if (error instanceof Error) {\r\n      return { success: false, message: error.message };\r\n    }\r\n    return { success: false, message: 'Connection failed: Unknown error' };\r\n  }\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Sparkles, Loader, AlertCircle, Check } from 'lucide-react';\r\nimport type { Story } from '../services/integrationService';\r\nimport { fetchAllStories } from '../services/integrationService';\r\n\r\nexport function RequirementAnalysis() {\r\n  const [stories, setStories] = useState<Story[]>([]);\r\n  const [selectedStory, setSelectedStory] = useState<Story | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [analysisResult, setAnalysisResult] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadStories = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const fetchedStories = await fetchAllStories();\r\n        setStories(fetchedStories);\r\n        if (fetchedStories.length > 0) {\r\n          setSelectedStory(fetchedStories[0]);\r\n        }\r\n      } catch (err) {\r\n        const message = err instanceof Error ? err.message : 'Failed to load stories';\r\n        setError(message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadStories();\r\n  }, []);\r\n\r\n  const filteredStories = stories.filter(\r\n    (story) =>\r\n      story.key.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      story.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      story.description.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleUserStoryAnalysis = async () => {\r\n    if (!selectedStory) {\r\n      setError('Please select a story to analyze');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsAnalyzing(true);\r\n      setError(null);\r\n      setSuccess(null);\r\n      setAnalysisResult(null);\r\n\r\n      const { llmService } = await import('../services/llmService');\r\n      const configuredProviders = llmService.getConfiguredProviders();\r\n\r\n      if (configuredProviders.length === 0) {\r\n        setError('No LLM providers configured. Please configure at least one provider in Settings.');\r\n        return;\r\n      }\r\n\r\n      const provider = configuredProviders[0];\r\n      const config = llmService.getConfig(provider);\r\n\r\n      if (!config) {\r\n        setError(`Provider ${provider} is not properly configured`);\r\n        return;\r\n      }\r\n\r\n      const acceptanceCriteriaText = selectedStory.acceptanceCriteria\r\n        ? parseAcceptanceCriteria(selectedStory.acceptanceCriteria)\r\n            .map((criterion) => ` ${criterion}`)\r\n            .join('\\n')\r\n        : 'No acceptance criteria provided';\r\n\r\n      const prompt = `You are an expert QA analyst specializing in user story quality assessment. Review the following user story and provide a comprehensive analysis using the INVEST methodology.\r\n\r\nUSER STORY DETAILS:\r\n================\r\nStory ID: ${selectedStory.key}\r\nTitle: ${selectedStory.title}\r\nDescription: ${selectedStory.description}\r\n\r\nAcceptance Criteria:\r\n${acceptanceCriteriaText}\r\n\r\nStatus: ${selectedStory.status}\r\nPriority: ${selectedStory.priority}\r\n${selectedStory.epicKey ? `Epic Number: ${selectedStory.epicKey}` : ''}\r\n${selectedStory.epicTitle ? `Epic Title: ${selectedStory.epicTitle}` : ''}\r\n\r\nANALYSIS REQUIREMENTS:\r\n====================\r\nAnalyze this user story against the INVEST methodology framework with the following criteria:\r\n\r\n1. INDEPENDENT - Is the story independent from other stories?\r\n2. NEGOTIABLE - Are the details open to discussion?\r\n3. VALUABLE - Does it deliver clear value to the user/business?\r\n4. ESTIMABLE - Can the work be estimated?\r\n5. SMALL - Can it be completed within one sprint?\r\n6. TESTABLE - Are acceptance criteria clearly testable?\r\n\r\nPlease provide:\r\n1. A brief score (0-10) for each INVEST criterion\r\n2. Current gaps or issues in the user story\r\n3. Specific recommendations for improvement\r\n4. Any missing acceptance criteria that should be added\r\n5. Overall assessment and priority for refinement\r\n\r\nFormat your response in a clear, structured manner with sections for each criterion.`;\r\n\r\n      let url = '';\r\n      let headers: Record<string, string> = {\r\n        'Content-Type': 'application/json',\r\n      };\r\n\r\n      if (provider === 'azure-openai') {\r\n        const endpoint = config.endpoint.endsWith('/') ? config.endpoint : `${config.endpoint}/`;\r\n        const deploymentName = (config as any).deploymentName || config.model;\r\n        const apiVersion = (config as any).apiVersion || '2024-02-15-preview';\r\n        url = `${endpoint}openai/deployments/${deploymentName}/chat/completions?api-version=${apiVersion}`;\r\n        headers['api-key'] = config.apiKey;\r\n      } else if (provider === 'openai') {\r\n        url = 'https://api.openai.com/v1/chat/completions';\r\n        headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      } else if (provider === 'groq') {\r\n        const baseEndpoint = config.endpoint.endsWith('/chat/completions')\r\n          ? config.endpoint\r\n          : `${config.endpoint}/chat/completions`;\r\n        url = baseEndpoint;\r\n        headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      } else if (provider === 'claude') {\r\n        url = 'https://api.anthropic.com/v1/messages';\r\n        headers['x-api-key'] = config.apiKey;\r\n        headers['anthropic-version'] = '2023-06-01';\r\n      } else if (provider === 'testleaf') {\r\n        const endpoint = config.endpoint.endsWith('/') ? config.endpoint : `${config.endpoint}/`;\r\n        url = `${endpoint}chat/completions`;\r\n        headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      } else {\r\n        throw new Error(`Unknown provider: ${provider}`);\r\n      }\r\n\r\n      let body: any;\r\n\r\n      if (provider === 'claude') {\r\n        body = JSON.stringify({\r\n          model: config.model,\r\n          max_tokens: 2048,\r\n          messages: [\r\n            {\r\n              role: 'user',\r\n              content: prompt,\r\n            },\r\n          ],\r\n        });\r\n      } else {\r\n        body = JSON.stringify({\r\n          model: config.model,\r\n          messages: [\r\n            {\r\n              role: 'system',\r\n              content: 'You are an expert QA analyst specializing in user story quality assessment using INVEST methodology.',\r\n            },\r\n            {\r\n              role: 'user',\r\n              content: prompt,\r\n            },\r\n          ],\r\n          temperature: 0.7,\r\n          max_tokens: 2048,\r\n        });\r\n      }\r\n\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers,\r\n        body,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.text();\r\n        throw new Error(`LLM API error: ${response.statusText} - ${errorData}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      let analysis = '';\r\n\r\n      if (provider === 'claude') {\r\n        analysis = data.content[0].text;\r\n      } else {\r\n        analysis = data.choices[0].message.content;\r\n      }\r\n\r\n      setAnalysisResult(analysis);\r\n      setSuccess('User story analysis completed successfully');\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : 'Analysis failed';\r\n      setError(message);\r\n      console.error('Error analyzing user story:', err);\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const parseAcceptanceCriteria = (html: string): string[] => {\r\n    if (!html) return [];\r\n    \r\n    const tempDiv = document.createElement('div');\r\n    tempDiv.innerHTML = html;\r\n    \r\n    const listItems = tempDiv.querySelectorAll('li');\r\n    const items: string[] = [];\r\n    \r\n    listItems.forEach((li) => {\r\n      const text = li.textContent?.trim() || '';\r\n      if (text) {\r\n        items.push(text);\r\n      }\r\n    });\r\n    \r\n    if (items.length === 0) {\r\n      const cleanText = html\r\n        .replace(/<[^>]*>/g, '')\r\n        .replace(/&#\\d+;/g, (match) => {\r\n          const code = parseInt(match.substring(2, match.length - 1));\r\n          return String.fromCharCode(code);\r\n        })\r\n        .replace(/&quot;/g, '\"')\r\n        .replace(/&amp;/g, '&')\r\n        .replace(/&lt;/g, '<')\r\n        .replace(/&gt;/g, '>')\r\n        .trim();\r\n      \r\n      return [cleanText].filter((text) => text.length > 0);\r\n    }\r\n    \r\n    return items;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <Sparkles className=\"w-8 h-8 text-blue-600\" />\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-slate-900\">Requirement Analysis</h2>\r\n          <p className=\"text-slate-600 mt-1\">Analyze user stories from Jira & ServiceNow using AI</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4\">\r\n          <h3 className=\"font-semibold text-slate-900 text-lg\">Stories</h3>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Search Stories</label>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search by Story ID or text...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <Loader className=\"w-5 h-5 animate-spin text-blue-600\" />\r\n            </div>\r\n          ) : filteredStories.length === 0 ? (\r\n            <div className=\"text-center py-4\">\r\n              <p className=\"text-sm text-slate-600\">No stories found</p>\r\n              <p className=\"text-xs text-slate-500 mt-2\">Configure Jira or ServiceNow credentials</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n              {filteredStories.map((story) => (\r\n                <button\r\n                  key={`${story.source}-${story.id}`}\r\n                  onClick={() => setSelectedStory(story)}\r\n                  className={`w-full text-left p-3 rounded-lg border-2 transition-all ${\r\n                    selectedStory?.id === story.id && selectedStory?.source === story.source\r\n                      ? 'border-blue-500 bg-blue-50'\r\n                      : 'border-slate-200 hover:border-blue-300'\r\n                  }`}\r\n                >\r\n                  <div className=\"text-sm font-semibold text-slate-900 truncate\">{story.key}</div>\r\n                  <div className=\"text-xs text-slate-600 mt-1 line-clamp-2\">{story.title}</div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6\">\r\n          {selectedStory ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"font-semibold text-slate-900\">Selected Story</h3>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n                  <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n                  <div>{error}</div>\r\n                </div>\r\n              )}\r\n\r\n              {success && (\r\n                <div className=\"flex gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm\">\r\n                  <Check className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n                  <div>{success}</div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div>\r\n                  <span className=\"font-semibold text-slate-700\">Key:</span>\r\n                  <p className=\"text-slate-600 mt-1\">{selectedStory.key}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-semibold text-slate-700\">Title:</span>\r\n                  <p className=\"text-slate-600 mt-1\">{selectedStory.title}</p>\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Status:</span>\r\n                    <span className=\"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs\">\r\n                      {selectedStory.status}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Priority:</span>\r\n                    <span className=\"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs\">\r\n                      {selectedStory.priority}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                {selectedStory.assignee && (\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Assignee:</span>\r\n                    <p className=\"text-slate-600 mt-1\">{selectedStory.assignee}</p>\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <span className=\"font-semibold text-slate-700\">Description:</span>\r\n                  <p className=\"text-slate-600 mt-1 bg-slate-50 p-2 rounded max-h-24 overflow-y-auto\">\r\n                    {selectedStory.description}\r\n                  </p>\r\n                </div>\r\n                {selectedStory.acceptanceCriteria && (\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Acceptance Criteria:</span>\r\n                    <ul className=\"text-slate-600 mt-2 bg-slate-50 p-3 rounded max-h-32 overflow-y-auto space-y-2 list-disc list-inside text-sm\">\r\n                      {parseAcceptanceCriteria(selectedStory.acceptanceCriteria).map((criterion, idx) => (\r\n                        <li key={idx} className=\"text-slate-700\">\r\n                          {criterion}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {selectedStory && (selectedStory.epicKey || selectedStory.epicTitle) && (\r\n                  <div className=\"space-y-2 pt-3 border-t border-slate-200\">\r\n                    <h4 className=\"font-semibold text-slate-900\">Epic Information</h4>\r\n                    <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                      <div>\r\n                        <span className=\"font-semibold text-slate-700\">Epic Number:</span>\r\n                        <p className=\"text-slate-600 mt-1\">{selectedStory.epicKey || '-'}</p>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-semibold text-slate-700\">Epic Short Description:</span>\r\n                        <p className=\"text-slate-600 mt-1 truncate\" title={selectedStory.epicTitle}>\r\n                          {selectedStory.epicTitle || '-'}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleUserStoryAnalysis}\r\n                disabled={isAnalyzing || !selectedStory}\r\n                className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2 mt-6\"\r\n              >\r\n                {isAnalyzing ? (\r\n                  <>\r\n                    <Loader className=\"w-4 h-4 animate-spin\" />\r\n                    Analyzing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Sparkles className=\"w-4 h-4\" />\r\n                    User Story Analysis\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-slate-600 text-center py-8\">Select a story to view details and perform analysis</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {analysisResult && (\r\n        <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4\">\r\n          <h3 className=\"font-semibold text-slate-900\">Analysis Results</h3>\r\n          <div className=\"bg-slate-50 p-4 rounded-lg whitespace-pre-wrap text-slate-700 max-h-96 overflow-y-auto text-sm border border-slate-200\">\r\n            {analysisResult}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h4 className=\"font-semibold text-blue-900 mb-2\"> How it works</h4>\r\n        <ul className=\"text-sm text-blue-800 space-y-1\">\r\n          <li> Stories are automatically fetched from configured Jira and ServiceNow instances</li>\r\n          <li> Search and select a story to view its complete details</li>\r\n          <li> Click \"User Story Analysis\" to analyze the requirement using AI</li>\r\n          <li> Review the comprehensive analysis results including acceptance criteria validation</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export type LLMProvider = 'openai' | 'groq' | 'azure-openai' | 'claude' | 'testleaf';\r\n\r\nexport interface LLMModel {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  contextWindow?: number; // tokens\r\n  costPer1kTokens?: {\r\n    input: number;\r\n    output: number;\r\n  };\r\n}\r\n\r\nexport interface LLMConfig {\r\n  provider: LLMProvider;\r\n  apiKey: string;\r\n  endpoint: string;\r\n  model: string;\r\n  deploymentName?: string;\r\n  apiVersion?: string;\r\n}\r\n\r\nexport interface LLMProviderConfig {\r\n  id: LLMProvider;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  models: LLMModel[];\r\n  defaultModel: string;\r\n  endpoint: string;\r\n  apiKeyLabel: string;\r\n  docLink: string;\r\n  additionalFields?: {\r\n    name: string;\r\n    label: string;\r\n    placeholder: string;\r\n    required: boolean;\r\n  }[];\r\n}\r\n\r\nexport const LLM_MODELS: Record<LLMProvider, LLMModel[]> = {\r\n  openai: [\r\n    {\r\n      id: 'gpt-4-turbo',\r\n      name: 'GPT-4 Turbo',\r\n      description: 'Latest GPT-4 with improved instruction following',\r\n      contextWindow: 128000,\r\n      costPer1kTokens: { input: 0.01, output: 0.03 },\r\n    },\r\n    {\r\n      id: 'gpt-4',\r\n      name: 'GPT-4',\r\n      description: 'Most capable model for complex reasoning',\r\n      contextWindow: 8192,\r\n      costPer1kTokens: { input: 0.03, output: 0.06 },\r\n    },\r\n    {\r\n      id: 'gpt-3.5-turbo',\r\n      name: 'GPT-3.5 Turbo',\r\n      description: 'Fast and efficient for most tasks',\r\n      contextWindow: 4096,\r\n      costPer1kTokens: { input: 0.0015, output: 0.002 },\r\n    },\r\n    {\r\n      id: 'gpt-4o',\r\n      name: 'GPT-4o',\r\n      description: 'Omni model - multimodal capabilities',\r\n      contextWindow: 128000,\r\n      costPer1kTokens: { input: 0.005, output: 0.015 },\r\n    },\r\n  ],\r\n  groq: [\r\n    {\r\n      id: 'openai/gpt-oss-120b',\r\n      name: 'openai/gpt-oss-120b',\r\n      description: 'Open-source reasoning model by OpenAI',\r\n      contextWindow: 8192,\r\n    },\r\n    {\r\n      id: 'qwen/qwen3-32b',\r\n      name: 'qwen/qwen3-32b',\r\n      description: 'Fast, open-source mixture of experts model',\r\n      contextWindow: 32768,\r\n    },\r\n    {\r\n      id: 'llama-3.1-8b-instant',\r\n      name: 'Llama 3.1 8B Instant',\r\n      description: 'Lightweight and fast Llama 3.1 model',\r\n      contextWindow: 131072,\r\n    },\r\n  ],\r\n  'azure-openai': [\r\n    {\r\n      id: 'gpt-4',\r\n      name: 'GPT-4',\r\n      description: 'Azure-hosted GPT-4 model',\r\n      contextWindow: 8192,\r\n    },\r\n    {\r\n      id: 'gpt-4-32k',\r\n      name: 'GPT-4 32K',\r\n      description: 'GPT-4 with extended context',\r\n      contextWindow: 32768,\r\n    },\r\n    {\r\n      id: 'gpt-35-turbo',\r\n      name: 'GPT-3.5 Turbo',\r\n      description: 'Azure-hosted GPT-3.5 Turbo',\r\n      contextWindow: 4096,\r\n    },\r\n    {\r\n      id: 'gpt-4-turbo',\r\n      name: 'GPT-4 Turbo',\r\n      description: 'Azure-hosted GPT-4 Turbo with vision',\r\n      contextWindow: 128000,\r\n    },\r\n  ],\r\n  claude: [\r\n    {\r\n      id: 'claude-3-opus-20240229',\r\n      name: 'Claude 3 Opus',\r\n      description: 'Most intelligent model - best for complex tasks',\r\n      contextWindow: 200000,\r\n      costPer1kTokens: { input: 0.015, output: 0.075 },\r\n    },\r\n    {\r\n      id: 'claude-3-sonnet-20240229',\r\n      name: 'Claude 3 Sonnet',\r\n      description: 'Balanced performance and speed',\r\n      contextWindow: 200000,\r\n      costPer1kTokens: { input: 0.003, output: 0.015 },\r\n    },\r\n    {\r\n      id: 'claude-3-haiku-20240307',\r\n      name: 'Claude 3 Haiku',\r\n      description: 'Fastest and most compact',\r\n      contextWindow: 200000,\r\n      costPer1kTokens: { input: 0.00025, output: 0.00125 },\r\n    },\r\n    {\r\n      id: 'claude-2.1',\r\n      name: 'Claude 2.1',\r\n      description: 'Previous version with 100k context',\r\n      contextWindow: 100000,\r\n      costPer1kTokens: { input: 0.008, output: 0.024 },\r\n    },\r\n  ],\r\n  testleaf: [\r\n    {\r\n      id: 'testleaf-sft',\r\n      name: 'TestLeaf SFT',\r\n      description: 'Specialized fine-tuned model for QA automation',\r\n      contextWindow: 8192,\r\n    },\r\n    {\r\n      id: 'testleaf-pro',\r\n      name: 'TestLeaf Pro',\r\n      description: 'Enhanced model with better test case generation',\r\n      contextWindow: 16384,\r\n    },\r\n    {\r\n      id: 'testleaf-enterprise',\r\n      name: 'TestLeaf Enterprise',\r\n      description: 'Enterprise model with advanced analytics',\r\n      contextWindow: 32768,\r\n    },\r\n  ],\r\n};\r\n\r\nexport const LLM_PROVIDERS: Record<LLMProvider, LLMProviderConfig> = {\r\n  openai: {\r\n    id: 'openai',\r\n    name: 'OpenAI',\r\n    description: 'GPT-4, GPT-3.5 Turbo, and other OpenAI models',\r\n    icon: '',\r\n    models: LLM_MODELS.openai,\r\n    defaultModel: 'gpt-4-turbo',\r\n    endpoint: 'https://api.openai.com/v1',\r\n    apiKeyLabel: 'OpenAI API Key (sk-...)',\r\n    docLink: 'https://platform.openai.com/docs',\r\n  },\r\n  groq: {\r\n    id: 'groq',\r\n    name: 'Groq',\r\n    description: 'Fast inference with Mixtral, Llama, and other open models',\r\n    icon: '',\r\n    models: LLM_MODELS.groq,\r\n    defaultModel: 'mixtral-8x7b-32768',\r\n    endpoint: 'https://api.groq.com/openai/v1',\r\n    apiKeyLabel: 'Groq API Key',\r\n    docLink: 'https://console.groq.com/docs',\r\n  },\r\n  'azure-openai': {\r\n    id: 'azure-openai',\r\n    name: 'Azure OpenAI',\r\n    description: 'Enterprise OpenAI models hosted on Azure',\r\n    icon: '',\r\n    models: LLM_MODELS['azure-openai'],\r\n    defaultModel: 'gpt-4',\r\n    endpoint: 'https://your-resource.openai.azure.com/',\r\n    apiKeyLabel: 'Azure API Key',\r\n    docLink: 'https://learn.microsoft.com/azure/ai-services/openai/',\r\n    additionalFields: [\r\n      {\r\n        name: 'deploymentName',\r\n        label: 'Deployment Name',\r\n        placeholder: 'your-deployment-name',\r\n        required: true,\r\n      },\r\n      {\r\n        name: 'apiVersion',\r\n        label: 'API Version',\r\n        placeholder: '2024-02-15-preview',\r\n        required: true,\r\n      },\r\n    ],\r\n  },\r\n  claude: {\r\n    id: 'claude',\r\n    name: 'Claude',\r\n    description: 'Anthropic Claude models - Claude 3 Opus, Sonnet, Haiku',\r\n    icon: '',\r\n    models: LLM_MODELS.claude,\r\n    defaultModel: 'claude-3-opus-20240229',\r\n    endpoint: 'https://api.anthropic.com',\r\n    apiKeyLabel: 'Claude API Key (sk-ant-...)',\r\n    docLink: 'https://docs.anthropic.com',\r\n  },\r\n  testleaf: {\r\n    id: 'testleaf',\r\n    name: 'TestLeaf',\r\n    description: 'TestLeaf SFT - Specialized for QA test automation',\r\n    icon: '',\r\n    models: LLM_MODELS.testleaf,\r\n    defaultModel: 'testleaf-sft',\r\n    endpoint: 'https://api.testleaf.com/v1',\r\n    apiKeyLabel: 'TestLeaf API Key',\r\n    docLink: 'https://testleaf.com/docs',\r\n  },\r\n};\r\n\r\n/**\r\n * Get provider configuration by provider ID\r\n * @param provider - The LLM provider ID\r\n * @returns Provider configuration\r\n */\r\nexport function getLLMProviderConfig(provider: LLMProvider): LLMProviderConfig {\r\n  return LLM_PROVIDERS[provider];\r\n}\r\n\r\n/**\r\n * Get array of model IDs for a specific provider\r\n * @param provider - The LLM provider ID\r\n * @returns Array of available models for the provider\r\n */\r\nexport function getModelsByProvider(provider: LLMProvider): LLMModel[] {\r\n  return LLM_MODELS[provider] || [];\r\n}\r\n\r\n/**\r\n * Get model information by provider and model ID\r\n * @param provider - The LLM provider ID\r\n * @param modelId - The model ID\r\n * @returns Model information or undefined\r\n */\r\nexport function getModelInfo(provider: LLMProvider, modelId: string): LLMModel | undefined {\r\n  const models = LLM_MODELS[provider];\r\n  return models?.find(m => m.id === modelId);\r\n}\r\n\r\n/**\r\n * Check if a model is valid for a provider\r\n * @param provider - The LLM provider ID\r\n * @param modelId - The model ID\r\n * @returns True if model is valid for provider\r\n */\r\nexport function isValidModel(provider: LLMProvider, modelId: string): boolean {\r\n  const models = LLM_MODELS[provider];\r\n  return models?.some(m => m.id === modelId) ?? false;\r\n}\r\n\r\n/**\r\n * Get LLM configuration from environment variables\r\n * @returns Configuration object with providers found in environment\r\n */\r\nexport function getLLMConfigFromEnv(): Record<LLMProvider, LLMConfig | null> {\r\n  const configs: Record<LLMProvider, LLMConfig | null> = {\r\n    openai: null,\r\n    groq: null,\r\n    'azure-openai': null,\r\n    claude: null,\r\n    testleaf: null,\r\n  };\r\n\r\n  // Check for OpenAI\r\n  const openaiKey = import.meta.env.VITE_OPENAI_API_KEY;\r\n  if (openaiKey) {\r\n    configs.openai = {\r\n      provider: 'openai',\r\n      apiKey: openaiKey,\r\n      endpoint: 'https://api.openai.com/v1',\r\n      model: 'gpt-4-turbo',\r\n    };\r\n  }\r\n\r\n  // Check for Groq\r\n  const groqKey = import.meta.env.VITE_GROQ_API_KEY;\r\n  if (groqKey) {\r\n    configs.groq = {\r\n      provider: 'groq',\r\n      apiKey: groqKey,\r\n      endpoint: import.meta.env.VITE_GROQ_API_ENDPOINT || 'https://api.groq.com/openai/v1',\r\n      model: import.meta.env.VITE_GROQ_DEFAULT_MODEL || 'mixtral-8x7b-32768',\r\n    };\r\n  }\r\n\r\n  // Check for Azure OpenAI\r\n  const azureKey = import.meta.env.VITE_AZURE_OPENAI_API_KEY;\r\n  if (azureKey) {\r\n    configs['azure-openai'] = {\r\n      provider: 'azure-openai',\r\n      apiKey: azureKey,\r\n      endpoint: import.meta.env.VITE_AZURE_OPENAI_API_ENDPOINT || '',\r\n      model: import.meta.env.VITE_AZURE_OPENAI_DEFAULT_MODEL || 'gpt-4',\r\n      deploymentName: import.meta.env.VITE_AZURE_OPENAI_DEPLOYMENT_NAME,\r\n      apiVersion: import.meta.env.VITE_AZURE_OPENAI_API_VERSION || '2024-02-15-preview',\r\n    };\r\n  }\r\n\r\n  // Check for Claude\r\n  const claudeKey = import.meta.env.VITE_CLAUDE_API_KEY;\r\n  if (claudeKey) {\r\n    configs.claude = {\r\n      provider: 'claude',\r\n      apiKey: claudeKey,\r\n      endpoint: import.meta.env.VITE_CLAUDE_API_ENDPOINT || 'https://api.anthropic.com',\r\n      model: import.meta.env.VITE_CLAUDE_DEFAULT_MODEL || 'claude-3-opus-20240229',\r\n    };\r\n  }\r\n\r\n  // Check for TestLeaf\r\n  const testleafKey = import.meta.env.VITE_TESTLEAF_API_KEY;\r\n  if (testleafKey) {\r\n    configs.testleaf = {\r\n      provider: 'testleaf',\r\n      apiKey: testleafKey,\r\n      endpoint: import.meta.env.VITE_TESTLEAF_API_ENDPOINT || 'https://api.testleaf.com/v1',\r\n      model: import.meta.env.VITE_TESTLEAF_DEFAULT_MODEL || 'testleaf-sft',\r\n    };\r\n  }\r\n\r\n  return configs;\r\n}\r\n","import { LLMProvider, LLMConfig } from '../config/llmConfig';\r\n\r\n/**\r\n * Production-grade LLM Service for managing multiple LLM provider configurations\r\n * Supports connection testing, configuration storage, and provider management\r\n */\r\nexport class LLMService {\r\n  private configs: Map<LLMProvider, LLMConfig> = new Map();\r\n  private connectionCache: Map<LLMProvider, { timestamp: number; result: boolean }> = new Map();\r\n  private readonly CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\r\n\r\n  /**\r\n   * Add or update a provider configuration\r\n   * @param provider - LLM provider ID\r\n   * @param config - Provider configuration\r\n   * @throws Error if configuration is invalid\r\n   */\r\n  addConfig(provider: LLMProvider, config: LLMConfig): void {\r\n    if (!config.apiKey || !config.apiKey.trim()) {\r\n      throw new Error('API Key is required and cannot be empty');\r\n    }\r\n    if (!config.endpoint || !config.endpoint.trim()) {\r\n      throw new Error('Endpoint is required and cannot be empty');\r\n    }\r\n    if (!config.model || !config.model.trim()) {\r\n      throw new Error('Model is required and cannot be empty');\r\n    }\r\n\r\n    this.configs.set(provider, {\r\n      ...config,\r\n      apiKey: config.apiKey.trim(),\r\n      endpoint: config.endpoint.trim(),\r\n      model: config.model.trim(),\r\n    });\r\n\r\n    // Clear cache when config changes\r\n    this.connectionCache.delete(provider);\r\n  }\r\n\r\n  /**\r\n   * Get configuration for a specific provider\r\n   * @param provider - LLM provider ID\r\n   * @returns Provider configuration or undefined\r\n   */\r\n  getConfig(provider: LLMProvider): LLMConfig | undefined {\r\n    return this.configs.get(provider);\r\n  }\r\n\r\n  /**\r\n   * Get all configured providers\r\n   * @returns Array of configurations\r\n   */\r\n  getAllConfigs(): LLMConfig[] {\r\n    return Array.from(this.configs.values());\r\n  }\r\n\r\n  /**\r\n   * Get all provider IDs that are configured\r\n   * @returns Array of provider IDs\r\n   */\r\n  getConfiguredProviders(): LLMProvider[] {\r\n    return Array.from(this.configs.keys());\r\n  }\r\n\r\n  /**\r\n   * Remove a provider configuration\r\n   * @param provider - LLM provider ID\r\n   */\r\n  removeConfig(provider: LLMProvider): void {\r\n    this.configs.delete(provider);\r\n    this.connectionCache.delete(provider);\r\n  }\r\n\r\n  /**\r\n   * Check if a provider is configured\r\n   * @param provider - LLM provider ID\r\n   * @returns true if provider is configured\r\n   */\r\n  isConfigured(provider: LLMProvider): boolean {\r\n    return this.configs.has(provider);\r\n  }\r\n\r\n  /**\r\n   * Test connection to a provider with caching\r\n   * @param provider - LLM provider ID\r\n   * @returns Connection result\r\n   */\r\n  async testConnection(provider: LLMProvider): Promise<{ success: boolean; message: string }> {\r\n    const config = this.getConfig(provider);\r\n    if (!config) {\r\n      return { success: false, message: 'Provider not configured' };\r\n    }\r\n\r\n    // Check cache\r\n    const cached = this.connectionCache.get(provider);\r\n    if (cached && Date.now() - cached.timestamp < this.CACHE_DURATION) {\r\n      return {\r\n        success: cached.result,\r\n        message: cached.result ? 'Connection successful (cached)' : 'Last connection failed (cached)',\r\n      };\r\n    }\r\n\r\n    try {\r\n      const timeoutPromise = new Promise<never>((_, reject) =>\r\n        setTimeout(() => reject(new Error('Connection timeout')), 10000)\r\n      );\r\n\r\n      const response = await Promise.race([\r\n        this.makeTestRequest(config),\r\n        timeoutPromise,\r\n      ]);\r\n\r\n      const success = response.ok;\r\n      this.connectionCache.set(provider, { timestamp: Date.now(), result: success });\r\n\r\n      if (success) {\r\n        return { success: true, message: 'Connection successful' };\r\n      } else {\r\n        return { success: false, message: `Connection failed: ${response.statusText}` };\r\n      }\r\n    } catch (error) {\r\n      this.connectionCache.set(provider, { timestamp: Date.now(), result: false });\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      return { success: false, message: `Connection error: ${errorMessage}` };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Make test request to provider API\r\n   * @param config - Provider configuration\r\n   * @returns Fetch response\r\n   */\r\n  private async makeTestRequest(config: LLMConfig): Promise<Response> {\r\n    const headers: Record<string, string> = {\r\n      'Content-Type': 'application/json',\r\n    };\r\n\r\n    let url: string;\r\n    let method = 'GET';\r\n    let body: string | undefined;\r\n\r\n    // Set appropriate authorization headers and URL based on provider\r\n    if (config.provider === 'openai') {\r\n      headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      url = 'https://api.openai.com/v1/models';\r\n    } else if (config.provider === 'groq') {\r\n      headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      url = 'https://api.groq.com/openai/v1/models';\r\n    } else if (config.provider === 'azure-openai') {\r\n      // Azure OpenAI requires POST request with message body for testing\r\n      headers['api-key'] = config.apiKey;\r\n      const apiVersion = config.apiVersion || '2024-02-15-preview';\r\n      const endpoint = config.endpoint.endsWith('/') ? config.endpoint : `${config.endpoint}/`;\r\n      url = `${endpoint}openai/deployments/${config.deploymentName || 'test'}/chat/completions?api-version=${apiVersion}`;\r\n      method = 'POST';\r\n      body = JSON.stringify({\r\n        messages: [{ role: 'user', content: 'test' }],\r\n        max_tokens: 1,\r\n      });\r\n    } else if (config.provider === 'claude') {\r\n      headers['x-api-key'] = config.apiKey;\r\n      headers['anthropic-version'] = '2023-06-01';\r\n      url = 'https://api.anthropic.com/v1/models';\r\n    } else if (config.provider === 'testleaf') {\r\n      headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      const endpoint = config.endpoint.endsWith('/') ? config.endpoint : `${config.endpoint}/`;\r\n      url = `${endpoint}models`;\r\n    } else {\r\n      throw new Error('Unknown provider');\r\n    }\r\n\r\n    const fetchOptions: RequestInit = {\r\n      method,\r\n      headers,\r\n    };\r\n\r\n    if (body) {\r\n      fetchOptions.body = body;\r\n    }\r\n\r\n    return fetch(url, fetchOptions);\r\n  }\r\n\r\n  /**\r\n   * Clear all cached connection tests\r\n   */\r\n  clearCache(): void {\r\n    this.connectionCache.clear();\r\n  }\r\n\r\n  /**\r\n   * Export configurations (without API keys for security)\r\n   * @returns Safe configuration export\r\n   */\r\n  exportConfigSummary(): Array<{\r\n    provider: LLMProvider;\r\n    isConfigured: boolean;\r\n    model: string | null;\r\n    endpoint: string | null;\r\n  }> {\r\n    return Array.from(this.configs.entries()).map(([provider, config]) => ({\r\n      provider,\r\n      isConfigured: true,\r\n      model: config.model,\r\n      endpoint: config.endpoint,\r\n    }));\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const llmService = new LLMService();\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { Brain, Check, X, Plus, Trash2, Link2, ExternalLink, ChevronDown, AlertCircle, Loader } from 'lucide-react';\r\nimport {\r\n  LLM_PROVIDERS,\r\n  LLMProvider,\r\n  LLMConfig,\r\n  getModelsByProvider,\r\n  isValidModel,\r\n  getLLMConfigFromEnv,\r\n} from '../config/llmConfig';\r\nimport { llmService } from '../services/llmService';\r\n\r\ninterface LLMIntegrationState {\r\n  provider: LLMProvider;\r\n  config: LLMConfig | null;\r\n  hasConfig: boolean;\r\n  isConnected: boolean;\r\n  isTesting: boolean;\r\n  testResult: { success: boolean; message: string } | null;\r\n  error: string | null;\r\n}\r\n\r\nexport function LLMSettings() {\r\n  const [integrations, setIntegrations] = useState<LLMIntegrationState[]>([]);\r\n  const [editingProvider, setEditingProvider] = useState<LLMProvider | null>(null);\r\n  const [tempConfig, setTempConfig] = useState<Partial<LLMConfig>>({});\r\n  const [expandedModel, setExpandedModel] = useState<LLMProvider | null>(null);\r\n  const [formErrors, setFormErrors] = useState<Record<string, string>>({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [selectedProvider, setSelectedProvider] = useState<LLMProvider | null>(null);\r\n\r\n  useEffect(() => {\r\n    const envConfigs = getLLMConfigFromEnv();\r\n    const providers: LLMIntegrationState[] = Object.keys(LLM_PROVIDERS).map((key) => {\r\n      const provider = key as LLMProvider;\r\n      const config = envConfigs[provider] || null;\r\n      return {\r\n        provider,\r\n        config,\r\n        hasConfig: !!config?.apiKey,\r\n        isConnected: false,\r\n        isTesting: false,\r\n        testResult: null,\r\n        error: null,\r\n      };\r\n    });\r\n    setIntegrations(providers);\r\n    llmService.clearCache();\r\n  }, []);\r\n\r\n  const validateForm = useCallback((provider: LLMProvider): boolean => {\r\n    const errors: Record<string, string> = {};\r\n\r\n    if (!tempConfig.apiKey || !tempConfig.apiKey.trim()) {\r\n      errors.apiKey = 'API Key is required';\r\n    }\r\n\r\n    if (!tempConfig.endpoint || !tempConfig.endpoint.trim()) {\r\n      errors.endpoint = 'Endpoint is required';\r\n    } else {\r\n      try {\r\n        new URL(tempConfig.endpoint);\r\n      } catch {\r\n        errors.endpoint = 'Invalid URL format';\r\n      }\r\n    }\r\n\r\n    if (!tempConfig.model || !tempConfig.model.trim()) {\r\n      errors.model = 'Model selection is required';\r\n    } else if (!isValidModel(provider, tempConfig.model)) {\r\n      errors.model = 'Invalid model for this provider';\r\n    }\r\n\r\n    const providerConfig = LLM_PROVIDERS[provider];\r\n    if (providerConfig.additionalFields) {\r\n      for (const field of providerConfig.additionalFields) {\r\n        const value = (tempConfig as Record<string, string | undefined>)[field.name];\r\n        if (field.required && (!value || !value.trim())) {\r\n          errors[field.name] = `${field.label} is required`;\r\n        }\r\n      }\r\n    }\r\n\r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  }, [tempConfig]);\r\n\r\n  const handleEdit = useCallback((provider: LLMProvider) => {\r\n    if (selectedProvider && selectedProvider !== provider) {\r\n      return;\r\n    }\r\n\r\n    const integration = integrations.find((i) => i.provider === provider);\r\n    if (integration?.config) {\r\n      setTempConfig({ ...integration.config });\r\n    } else {\r\n      const providerConfig = LLM_PROVIDERS[provider];\r\n      setTempConfig({\r\n        provider,\r\n        apiKey: '',\r\n        endpoint: providerConfig.endpoint,\r\n        model: providerConfig.defaultModel,\r\n      });\r\n    }\r\n    setEditingProvider(provider);\r\n    setFormErrors({});\r\n  }, [integrations, selectedProvider]);\r\n\r\n  const handleSave = useCallback(\r\n    async (provider: LLMProvider) => {\r\n      if (selectedProvider && selectedProvider !== provider) {\r\n        return;\r\n      }\r\n      if (!validateForm(provider)) {\r\n        return;\r\n      }\r\n\r\n      setIsSaving(true);\r\n      try {\r\n        const newConfig: LLMConfig = {\r\n          provider: tempConfig.provider || provider,\r\n          apiKey: tempConfig.apiKey!,\r\n          endpoint: tempConfig.endpoint!,\r\n          model: tempConfig.model!,\r\n          deploymentName: tempConfig.deploymentName,\r\n          apiVersion: tempConfig.apiVersion,\r\n        };\r\n\r\n        llmService.addConfig(provider, newConfig);\r\n\r\n        setIntegrations((prev) =>\r\n          prev.map((i) =>\r\n            i.provider === provider\r\n              ? { ...i, config: newConfig, isConnected: true, hasConfig: true, testResult: null, error: null }\r\n              : i\r\n          )\r\n        );\r\n\r\n        setEditingProvider(null);\r\n        setFormErrors({});\r\n      } catch (error) {\r\n        setFormErrors({\r\n          submit: error instanceof Error ? error.message : 'Failed to save configuration',\r\n        });\r\n      } finally {\r\n        setIsSaving(false);\r\n      }\r\n    },\r\n    [tempConfig, validateForm, selectedProvider]\r\n  );\r\n\r\n  const handleTestConnection = useCallback(async (provider: LLMProvider) => {\r\n    if (!selectedProvider || selectedProvider !== provider) {\r\n      return;\r\n    }\r\n\r\n    setIntegrations((prev) =>\r\n      prev.map((i) =>\r\n        i.provider === provider ? { ...i, isTesting: true, testResult: null } : i\r\n      )\r\n    );\r\n\r\n    const result = await llmService.testConnection(provider);\r\n\r\n    setIntegrations((prev) =>\r\n      prev.map((i) =>\r\n        i.provider === provider ? { ...i, isTesting: false, testResult: result, isConnected: result.success } : i\r\n      )\r\n    );\r\n  }, [selectedProvider]);\r\n\r\n  const handleDisconnect = useCallback((provider: LLMProvider) => {\r\n    if (!selectedProvider || selectedProvider !== provider) {\r\n      return;\r\n    }\r\n    llmService.removeConfig(provider);\r\n    setIntegrations((prev) =>\r\n      prev.map((i) =>\r\n        i.provider === provider\r\n          ? { ...i, config: null, hasConfig: false, isConnected: false, testResult: null, error: null }\r\n          : i\r\n      )\r\n    );\r\n    setEditingProvider(null);\r\n    setFormErrors({});\r\n  }, [selectedProvider]);\r\n\r\n  const handleModelChange = useCallback((modelId: string) => {\r\n    setTempConfig((prev) => ({ ...prev, model: modelId }));\r\n    setFormErrors((prev) => {\r\n      const updated = { ...prev };\r\n      delete updated.model;\r\n      return updated;\r\n    });\r\n  }, []);\r\n\r\n  const providerOptions = Object.keys(LLM_PROVIDERS) as LLMProvider[];\r\n\r\n  const getModelInfo = (provider: LLMProvider, modelId: string) => {\r\n    const models = getModelsByProvider(provider);\r\n    return models.find((m) => m.id === modelId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h3 className=\"text-2xl font-bold text-slate-900 mb-2\">\r\n          <Brain className=\"w-6 h-6 inline-block mr-2 text-blue-600\" />\r\n          LLM Model Integration\r\n        </h3>\r\n        <p className=\"text-slate-600\">Select one provider to enable editing and connection. Other providers will be disabled.</p>\r\n      </div>\r\n\r\n      <div className=\"max-w-md\">\r\n        <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Select LLM Provider to enable</label>\r\n        <select\r\n          value={selectedProvider || ''}\r\n          onChange={(e) => setSelectedProvider((e.target.value as LLMProvider) || null)}\r\n          className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all border-slate-300 focus:ring-blue-500 bg-white\"\r\n        >\r\n          <option value=\"\">-- Choose provider to enable --</option>\r\n          {providerOptions.map((p) => (\r\n            <option key={p} value={p}>\r\n              {LLM_PROVIDERS[p].name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <p className=\"text-xs text-slate-500 mt-2\">Only the selected provider can be configured and connected.</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {integrations.map((integration) => {\r\n          const providerConfig = LLM_PROVIDERS[integration.provider];\r\n          const isEditing = editingProvider === integration.provider;\r\n          const models = getModelsByProvider(integration.provider);\r\n          const currentModel = integration.config\r\n            ? getModelInfo(integration.provider, integration.config.model)\r\n            : null;\r\n\r\n          const disabled = !!selectedProvider && selectedProvider !== integration.provider;\r\n\r\n          return (\r\n            <div\r\n              key={integration.provider}\r\n              className={`relative bg-white border border-slate-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow ${disabled ? 'opacity-60 pointer-events-none' : ''}`}\r\n            >\r\n              {disabled && (\r\n                <div className=\"absolute inset-0 pointer-events-none\" />\r\n              )}\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"text-3xl\">{providerConfig.icon}</div>\r\n                  <div>\r\n                    <h4 className=\"text-lg font-bold text-slate-900\">{providerConfig.name}</h4>\r\n                    <p className=\"text-sm text-slate-600 mt-1\">{providerConfig.description}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  {integration.isConnected ? (\r\n                    <div className=\"flex items-center gap-1 bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-semibold\">\r\n                      <Check className=\"w-3 h-3\" />\r\n                      Connected\r\n                    </div>\r\n                  ) : integration.hasConfig ? (\r\n                    <div className=\"flex items-center gap-1 bg-yellow-50 text-yellow-800 px-3 py-1 rounded-full text-xs font-semibold\">\r\n                       Configured\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n\r\n              {isEditing ? (\r\n                <div className=\"space-y-4 border-t border-slate-200 pt-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                      {providerConfig.apiKeyLabel}\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={tempConfig.apiKey || ''}\r\n                      onChange={(e) => {\r\n                        setTempConfig({ ...tempConfig, apiKey: e.target.value });\r\n                        setFormErrors((prev) => {\r\n                          const updated = { ...prev };\r\n                          delete updated.apiKey;\r\n                          return updated;\r\n                        });\r\n                      }}\r\n                      placeholder=\"Enter your API key\"\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${\r\n                        formErrors.apiKey\r\n                          ? 'border-red-300 focus:ring-red-500'\r\n                          : 'border-slate-300 focus:ring-blue-500'\r\n                      }`}\r\n                    />\r\n                    {formErrors.apiKey && (\r\n                      <p className=\"text-red-600 text-xs mt-1 flex items-center gap-1\">\r\n                        <AlertCircle className=\"w-3 h-3\" /> {formErrors.apiKey}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                      API Endpoint\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={tempConfig.endpoint || ''}\r\n                      onChange={(e) => {\r\n                        setTempConfig({ ...tempConfig, endpoint: e.target.value });\r\n                        setFormErrors((prev) => {\r\n                          const updated = { ...prev };\r\n                          delete updated.endpoint;\r\n                          return updated;\r\n                        });\r\n                      }}\r\n                      placeholder=\"https://api.example.com\"\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${\r\n                        formErrors.endpoint\r\n                          ? 'border-red-300 focus:ring-red-500'\r\n                          : 'border-slate-300 focus:ring-blue-500'\r\n                      }`}\r\n                    />\r\n                    {formErrors.endpoint && (\r\n                      <p className=\"text-red-600 text-xs mt-1 flex items-center gap-1\">\r\n                        <AlertCircle className=\"w-3 h-3\" /> {formErrors.endpoint}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                      Select Model\r\n                    </label>\r\n                    <select\r\n                      value={tempConfig.model || ''}\r\n                      onChange={(e) => handleModelChange(e.target.value)}\r\n                      className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all bg-white ${\r\n                        formErrors.model\r\n                          ? 'border-red-300 focus:ring-red-500'\r\n                          : 'border-slate-300 focus:ring-blue-500'\r\n                      }`}\r\n                    >\r\n                      <option value=\"\">Choose a model...</option>\r\n                      {models.map((model) => (\r\n                        <option key={model.id} value={model.id}>\r\n                          {model.name}\r\n                          {model.contextWindow ? ` (${model.contextWindow.toLocaleString()} tokens)` : ''}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {formErrors.model && (\r\n                      <p className=\"text-red-600 text-xs mt-1 flex items-center gap-1\">\r\n                        <AlertCircle className=\"w-3 h-3\" /> {formErrors.model}\r\n                      </p>\r\n                    )}\r\n\r\n                    {tempConfig.model && isValidModel(integration.provider, tempConfig.model) && (\r\n                      <div className=\"mt-2 p-3 bg-blue-50 rounded-lg text-sm text-slate-700\">\r\n                        <p className=\"font-semibold\">\r\n                          {getModelInfo(integration.provider, tempConfig.model)?.name}\r\n                        </p>\r\n                        <p className=\"text-slate-600 mt-1\">\r\n                          {getModelInfo(integration.provider, tempConfig.model)?.description}\r\n                        </p>\r\n                        {getModelInfo(integration.provider, tempConfig.model)?.contextWindow && (\r\n                          <p className=\"text-xs text-slate-500 mt-2\">\r\n                             Context:{' '}\r\n                            {getModelInfo(integration.provider, tempConfig.model)?.contextWindow?.toLocaleString()}{' '}\r\n                            tokens\r\n                          </p>\r\n                        )}\r\n                        {getModelInfo(integration.provider, tempConfig.model)?.costPer1kTokens && (\r\n                          <p className=\"text-xs text-slate-500 mt-1\">\r\n                             Cost: $\r\n                            {getModelInfo(integration.provider, tempConfig.model)?.costPer1kTokens?.input}/1k input, $\r\n                            {getModelInfo(integration.provider, tempConfig.model)?.costPer1kTokens?.output}/1k output\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {providerConfig.additionalFields?.map((field) => (\r\n                    <div key={field.name}>\r\n                      <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                        {field.label}\r\n                        {field.required && <span className=\"text-red-500\">*</span>}\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={(tempConfig as Record<string, string | undefined>)[field.name] || ''}\r\n                        onChange={(e) => {\r\n                          setTempConfig({\r\n                            ...tempConfig,\r\n                            [field.name]: e.target.value,\r\n                          });\r\n                          setFormErrors((prev) => {\r\n                            const updated = { ...prev };\r\n                            delete updated[field.name];\r\n                            return updated;\r\n                          });\r\n                        }}\r\n                        placeholder={field.placeholder}\r\n                        className={`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all ${\r\n                          formErrors[field.name]\r\n                            ? 'border-red-300 focus:ring-red-500'\r\n                            : 'border-slate-300 focus:ring-blue-500'\r\n                        }`}\r\n                      />\r\n                      {formErrors[field.name] && (\r\n                        <p className=\"text-red-600 text-xs mt-1 flex items-center gap-1\">\r\n                          <AlertCircle className=\"w-3 h-3\" /> {formErrors[field.name]}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n\r\n                  {formErrors.submit && (\r\n                    <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm flex items-start gap-2\">\r\n                      <AlertCircle className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\r\n                      <span>{formErrors.submit}</span>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex gap-3\">\r\n                    <button\r\n                      onClick={() => handleSave(integration.provider)}\r\n                      disabled={isSaving}\r\n                      className=\"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2\"\r\n                    >\r\n                      {isSaving && <Loader className=\"w-4 h-4 animate-spin\" />}\r\n                      Save Configuration\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        setEditingProvider(null);\r\n                        setFormErrors({});\r\n                      }}\r\n                      className=\"flex-1 bg-slate-300 text-slate-700 py-2 rounded-lg hover:bg-slate-400 transition-colors font-semibold\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3 border-t border-slate-200 pt-4\">\r\n                  {integration.config && (\r\n                    <>\r\n                      <div className=\"text-sm text-slate-600 space-y-2\">\r\n                        <div>\r\n                          <span className=\"font-semibold\">Model:</span>{' '}\r\n                          {currentModel?.name || integration.config.model}\r\n                        </div>\r\n                        {currentModel?.contextWindow && (\r\n                          <div>\r\n                            <span className=\"font-semibold\">Context:</span>{' '}\r\n                            {currentModel.contextWindow.toLocaleString()} tokens\r\n                          </div>\r\n                        )}\r\n                        <div>\r\n                          <span className=\"font-semibold\">Endpoint:</span> {integration.config.endpoint}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"mt-3\">\r\n                        <button\r\n                          onClick={() =>\r\n                            setExpandedModel(expandedModel === integration.provider ? null : integration.provider)\r\n                          }\r\n                          className=\"w-full flex items-center justify-between px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors\"\r\n                        >\r\n                          <span className=\"text-sm font-semibold text-slate-700\">View available models</span>\r\n                          <ChevronDown\r\n                            className={`w-4 h-4 transition-transform ${\r\n                              expandedModel === integration.provider ? 'rotate-180' : ''\r\n                            }`}\r\n                          />\r\n                        </button>\r\n\r\n                        {expandedModel === integration.provider && (\r\n                          <div className=\"mt-2 border border-slate-200 rounded-lg overflow-hidden max-h-96 overflow-y-auto\">\r\n                            {models.map((model) => (\r\n                              <div\r\n                                key={model.id}\r\n                                className={`p-3 border-b border-slate-100 last:border-b-0 ${\r\n                                  integration.config?.model === model.id ? 'bg-blue-50' : 'bg-white'\r\n                                } hover:bg-slate-50 transition-colors cursor-pointer`}\r\n                              >\r\n                                <div className=\"flex items-start justify-between\">\r\n                                  <div className=\"flex-1\">\r\n                                    <p className=\"font-semibold text-slate-900 text-sm\">\r\n                                      {model.name}\r\n                                      {integration.config?.model === model.id && (\r\n                                        <Check className=\"w-3 h-3 inline-block ml-2 text-green-600\" />\r\n                                      )}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-slate-600 mt-1\">{model.description}</p>\r\n                                    <div className=\"flex gap-3 mt-2 text-xs text-slate-500 flex-wrap\">\r\n                                      {model.contextWindow && (\r\n                                        <span> {model.contextWindow.toLocaleString()} tokens</span>\r\n                                      )}\r\n                                      {model.costPer1kTokens && (\r\n                                        <span>\r\n                                           ${model.costPer1kTokens.input}/${model.costPer1kTokens.output} per 1k\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {integration.testResult && (\r\n                        <div\r\n                          className={`flex items-center gap-2 p-3 rounded-lg text-sm font-semibold ${\r\n                            integration.testResult.success\r\n                              ? 'bg-green-50 text-green-700'\r\n                              : 'bg-red-50 text-red-700'\r\n                          }`}\r\n                        >\r\n                          {integration.testResult.success ? (\r\n                            <Check className=\"w-4 h-4\" />\r\n                          ) : (\r\n                            <X className=\"w-4 h-4\" />\r\n                          )}\r\n                          {integration.testResult.message}\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n\r\n                  <div className=\"flex gap-2 flex-wrap\">\r\n                    <button\r\n                      onClick={() => handleEdit(integration.provider)}\r\n                      disabled={!!selectedProvider && selectedProvider !== integration.provider}\r\n                      className={`flex-1 flex items-center justify-center gap-2 bg-blue-600 text-white py-2 rounded-lg transition-colors font-semibold text-sm ${!!selectedProvider && selectedProvider !== integration.provider ? 'opacity-70 cursor-not-allowed' : 'hover:bg-blue-700'}`}\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      {integration.isConnected ? 'Edit' : 'Configure'}\r\n                    </button>\r\n\r\n                    {integration.isConnected && (\r\n                      <>\r\n                        <button\r\n                          onClick={() => handleTestConnection(integration.provider)}\r\n                          disabled={integration.isTesting || !!selectedProvider && selectedProvider !== integration.provider}\r\n                          className=\"flex-1 flex items-center justify-center gap-2 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors font-semibold text-sm\"\r\n                        >\r\n                          {integration.isTesting ? (\r\n                            <>\r\n                              <Loader className=\"w-4 h-4 animate-spin\" />\r\n                              Testing...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <Link2 className=\"w-4 h-4\" />\r\n                              Test\r\n                            </>\r\n                          )}\r\n                        </button>\r\n\r\n                        <button\r\n                          onClick={() => handleDisconnect(integration.provider)}\r\n                          disabled={!!selectedProvider && selectedProvider !== integration.provider}\r\n                          className=\"flex items-center justify-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors font-semibold text-sm\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </>\r\n                    )}\r\n\r\n                    <a\r\n                      href={providerConfig.docLink}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"flex items-center justify-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors font-semibold text-sm\"\r\n                    >\r\n                      <ExternalLink className=\"w-4 h-4\" />\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h4 className=\"font-semibold text-blue-900 mb-2\"> Configuration Guide</h4>\r\n        <ul className=\"text-sm text-blue-800 space-y-2\">\r\n          <li> Store API keys in your `.env.local` file using the `VITE_*` prefix</li>\r\n          <li> Never commit `.env.local` to version control - add it to `.gitignore`</li>\r\n          <li> Each provider supports multiple models with different capabilities</li>\r\n          <li> Test connections to verify API credentials before using in production</li>\r\n          <li> Model pricing and context window information is displayed for reference</li>\r\n          <li> Only the selected provider will be used by the app; others remain disabled</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div className=\"bg-slate-50 border border-slate-200 rounded-lg p-4\">\r\n        <h4 className=\"font-semibold text-slate-900 mb-2\">Active Integrations</h4>\r\n        <div className=\"text-sm text-slate-700\">\r\n          {integrations.filter((i) => i.isConnected).length === 0 ? (\r\n            <p className=\"text-slate-500\">No integrations connected yet. Select a provider, configure it, and save to connect.</p>\r\n          ) : (\r\n            <ul className=\"space-y-1\">\r\n              {integrations\r\n                .filter((i) => i.isConnected)\r\n                .map((i) => (\r\n                  <li key={i.provider}>\r\n                     {LLM_PROVIDERS[i.provider].name} - Model: {i.config?.model}\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { Figma, Settings2, ExternalLink, Loader, CheckCircle } from 'lucide-react';\r\nimport { LLMSettings } from './LLMSettings';\r\nimport { connectJira, connectServiceNow } from '../services/integrationService';\r\nimport { getIntegrationConfigFromEnv } from '../config/integrationConfig';\r\n\r\ninterface Integration {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  icon: React.ReactNode;\r\n  isConnected: boolean;\r\n  isConnecting: boolean;\r\n  endpoint?: string;\r\n  username?: string;\r\n  apiKey?: string;\r\n  password?: string;\r\n  docLink?: string;\r\n  testResult?: { success: boolean; message: string };\r\n}\r\n\r\nexport function Settings() {\r\n  const [selectedTab, setSelectedTab] = useState<'llm' | 'other'>('llm');\r\n\r\n  const [integrations, setIntegrations] = useState<Integration[]>([\r\n    {\r\n      id: 'jira',\r\n      title: 'Jira Integration',\r\n      description: 'Sync with Jira for issue tracking and project management',\r\n      icon: <Figma className=\"w-8 h-8\" />,\r\n      isConnected: false,\r\n      isConnecting: false,\r\n      endpoint: '',\r\n      username: '',\r\n      apiKey: '',\r\n      docLink: 'https://developer.atlassian.com/cloud/jira/rest/v3/',\r\n    },\r\n    {\r\n      id: 'servicenow',\r\n      title: 'ServiceNow Integration',\r\n      description: 'Connect to ServiceNow for incident and change management',\r\n      icon: <Settings2 className=\"w-8 h-8\" />,\r\n      isConnected: false,\r\n      isConnecting: false,\r\n      endpoint: '',\r\n      username: '',\r\n      password: '',\r\n      docLink: 'https://developer.servicenow.com/dev_portal_landing.do',\r\n    },\r\n  ]);\r\n\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [tempConfig, setTempConfig] = useState<Partial<Integration>>({});\r\n\r\n  // Load integration configurations from environment variables on mount\r\n  useEffect(() => {\r\n    const envConfig = getIntegrationConfigFromEnv();\r\n    \r\n    if (envConfig.jira || envConfig.servicenow) {\r\n      setIntegrations((prevIntegrations) =>\r\n        prevIntegrations.map((integration) => {\r\n          if (integration.id === 'jira' && envConfig.jira) {\r\n            return {\r\n              ...integration,\r\n              endpoint: envConfig.jira.endpoint,\r\n              username: envConfig.jira.username,\r\n              apiKey: envConfig.jira.apiKey,\r\n            };\r\n          }\r\n          if (integration.id === 'servicenow' && envConfig.servicenow) {\r\n            return {\r\n              ...integration,\r\n              endpoint: envConfig.servicenow.endpoint,\r\n              username: envConfig.servicenow.username,\r\n              password: envConfig.servicenow.password,\r\n            };\r\n          }\r\n          return integration;\r\n        })\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const serviceNowIntegration = integrations.find((i) => i.id === 'servicenow');\r\n    if (serviceNowIntegration?.isConnected) {\r\n      localStorage.setItem('servicenow_config', JSON.stringify({\r\n        endpoint: serviceNowIntegration.endpoint,\r\n        username: serviceNowIntegration.username,\r\n        isConnected: true,\r\n      }));\r\n    } else {\r\n      localStorage.removeItem('servicenow_config');\r\n    }\r\n  }, [integrations]);\r\n\r\n  const handleEdit = (id: string) => {\r\n    const integration = integrations.find((i) => i.id === id);\r\n    if (integration) {\r\n      setTempConfig({ ...integration });\r\n    }\r\n    setEditingId(id);\r\n  };\r\n\r\n  const handleConnect = async (id: string) => {\r\n    const integration = integrations.find((i) => i.id === id);\r\n    if (!integration) return;\r\n\r\n    if (id === 'jira') {\r\n      if (!integration.endpoint?.trim() || !integration.username?.trim() || !integration.apiKey?.trim()) {\r\n        alert('Please fill in all required fields for Jira');\r\n        return;\r\n      }\r\n    } else if (id === 'servicenow') {\r\n      if (!integration.endpoint?.trim() || !integration.username?.trim() || !integration.password?.trim()) {\r\n        alert('Please fill in all required fields for ServiceNow');\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIntegrations(\r\n      integrations.map((i) =>\r\n        i.id === id ? { ...i, isConnecting: true } : i\r\n      )\r\n    );\r\n\r\n    try {\r\n      let testResult: { success: boolean; message: string } | undefined;\r\n      if (id === 'jira') {\r\n        const result = await connectJira(\r\n          integration.endpoint || '',\r\n          integration.username || '',\r\n          integration.apiKey || ''\r\n        );\r\n        testResult = { success: result.success, message: result.message };\r\n      } else if (id === 'servicenow') {\r\n        const result = await connectServiceNow(\r\n          integration.endpoint || '',\r\n          integration.username || '',\r\n          integration.password || ''\r\n        );\r\n        testResult = { success: result.success, message: result.message };\r\n      }\r\n\r\n      if (testResult) {\r\n        setIntegrations(\r\n          integrations.map((i) =>\r\n            i.id === id\r\n              ? {\r\n                  ...i,\r\n                  isConnecting: false,\r\n                  isConnected: testResult.success,\r\n                  testResult,\r\n                }\r\n              : i\r\n          )\r\n        );\r\n\r\n        if (!testResult.success) {\r\n          alert(testResult.message);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n      setIntegrations(\r\n        integrations.map((i) =>\r\n          i.id === id\r\n            ? {\r\n                ...i,\r\n                isConnecting: false,\r\n                isConnected: false,\r\n                testResult: { success: false, message: errorMessage },\r\n              }\r\n            : i\r\n        )\r\n      );\r\n      alert(`Connection error: ${errorMessage}`);\r\n    }\r\n  };\r\n\r\n  const handleSave = (id: string) => {\r\n    if (id === 'jira') {\r\n      if (!tempConfig.endpoint?.trim() || !tempConfig.username?.trim() || !tempConfig.apiKey?.trim()) {\r\n        alert('Please fill in all required fields for Jira');\r\n        return;\r\n      }\r\n    } else if (id === 'servicenow') {\r\n      if (!tempConfig.endpoint?.trim() || !tempConfig.username?.trim() || !tempConfig.password?.trim()) {\r\n        alert('Please fill in all required fields for ServiceNow');\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIntegrations(\r\n      integrations.map((i) =>\r\n        i.id === id\r\n          ? {\r\n              ...i,\r\n              ...tempConfig,\r\n            }\r\n          : i\r\n      )\r\n    );\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleDisconnect = (id: string) => {\r\n    setIntegrations(\r\n      integrations.map((i) =>\r\n        i.id === id\r\n          ? {\r\n              ...i,\r\n              isConnected: false,\r\n              isConnecting: false,\r\n              testResult: undefined,\r\n            }\r\n          : i\r\n      )\r\n    );\r\n    setEditingId(null);\r\n  };\r\n\r\n  const updateTempConfig = (field: string, value: string) => {\r\n    setTempConfig((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  if (selectedTab === 'llm') {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex gap-2 border-b border-slate-200\">\r\n          <button\r\n            onClick={() => setSelectedTab('llm')}\r\n            className=\"px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600\"\r\n          >\r\n            LLM Integration\r\n          </button>\r\n          <button\r\n            onClick={() => setSelectedTab('other')}\r\n            className=\"px-4 py-2 font-semibold text-slate-600 hover:text-slate-900\"\r\n          >\r\n            Other Integrations\r\n          </button>\r\n        </div>\r\n        <LLMSettings />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex gap-2 border-b border-slate-200\">\r\n        <button\r\n          onClick={() => setSelectedTab('llm')}\r\n          className=\"px-4 py-2 font-semibold text-slate-600 hover:text-slate-900\"\r\n        >\r\n          LLM Integration\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedTab('other')}\r\n          className=\"px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600\"\r\n        >\r\n          Other Integrations\r\n        </button>\r\n      </div>\r\n\r\n      <div>\r\n        <h3 className=\"text-2xl font-bold text-slate-900 mb-2\">Other Integrations</h3>\r\n        <p className=\"text-slate-600\">Configure and manage your external service integrations. Credentials are securely stored in your session.</p>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {integrations.map((integration) => (\r\n          <div\r\n            key={integration.id}\r\n            className=\"bg-white border border-slate-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n          >\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"text-blue-600 bg-blue-50 p-3 rounded-lg\">\r\n                  {integration.icon}\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"text-lg font-bold text-slate-900\">{integration.title}</h4>\r\n                  <p className=\"text-sm text-slate-600 mt-1\">{integration.description}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {editingId === integration.id ? (\r\n              <div className=\"space-y-4 border-t border-slate-200 pt-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                    {integration.id === 'jira' ? 'Jira Instance URL' : 'ServiceNow Instance URL'}\r\n                    <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={tempConfig.endpoint || ''}\r\n                    onChange={(e) => updateTempConfig('endpoint', e.target.value)}\r\n                    placeholder={\r\n                      integration.id === 'jira'\r\n                        ? 'https://your-domain.atlassian.net'\r\n                        : 'https://your-instance.service-now.com'\r\n                    }\r\n                    className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                    Username / Email\r\n                    <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={tempConfig.username || ''}\r\n                    onChange={(e) => updateTempConfig('username', e.target.value)}\r\n                    placeholder=\"your-username@email.com\"\r\n                    className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                </div>\r\n\r\n                {integration.id === 'jira' ? (\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                      API Token\r\n                      <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={tempConfig.apiKey || ''}\r\n                      onChange={(e) => updateTempConfig('apiKey', e.target.value)}\r\n                      placeholder=\"Enter your Jira API token\"\r\n                      className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                    <p className=\"text-xs text-slate-500 mt-1\">\r\n                      Get your API token from{' '}\r\n                      <a href=\"https://id.atlassian.com/manage-profile/security/api-tokens\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">\r\n                        Atlassian API Tokens\r\n                      </a>\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <label className=\"block text-sm font-semibold text-slate-700 mb-2\">\r\n                      Password\r\n                      <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"password\"\r\n                      value={tempConfig.password || ''}\r\n                      onChange={(e) => updateTempConfig('password', e.target.value)}\r\n                      placeholder=\"Enter your ServiceNow password\"\r\n                      className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <button\r\n                    onClick={() => handleSave(integration.id)}\r\n                    className=\"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold\"\r\n                  >\r\n                    Save\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setEditingId(null)}\r\n                    className=\"flex-1 bg-slate-300 text-slate-700 py-2 rounded-lg hover:bg-slate-400 transition-colors font-semibold\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3 border-t border-slate-200 pt-4\">\r\n                {integration.endpoint && (\r\n                  <div className=\"text-sm space-y-2 bg-slate-50 p-3 rounded-lg border border-slate-200\">\r\n                    <div>\r\n                      <span className=\"font-semibold text-slate-700\">URL:</span>\r\n                      <p className=\"text-slate-600 break-all text-xs\">{integration.endpoint}</p>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-semibold text-slate-700\">Username:</span>\r\n                      <p className=\"text-slate-600\">{integration.username}</p>\r\n                    </div>\r\n                    {integration.id === 'jira' && integration.apiKey && (\r\n                      <div>\r\n                        <span className=\"font-semibold text-slate-700\">API Key:</span>\r\n                        <p className=\"text-slate-600\">{''.repeat(20)}</p>\r\n                      </div>\r\n                    )}\r\n                    {integration.id === 'servicenow' && integration.password && (\r\n                      <div>\r\n                        <span className=\"font-semibold text-slate-700\">Password:</span>\r\n                        <p className=\"text-slate-600\">{''.repeat(20)}</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {integration.testResult && (\r\n                  <div className={`flex gap-2 p-3 rounded-lg border text-sm ${\r\n                    integration.testResult.success\r\n                      ? 'bg-green-50 border-green-200 text-green-700'\r\n                      : 'bg-red-50 border-red-200 text-red-700'\r\n                  }`}>\r\n                    <CheckCircle className={`w-5 h-5 flex-shrink-0 mt-0.5 ${integration.testResult.success ? 'text-green-600' : 'text-red-600'}`} />\r\n                    <div>{integration.testResult.message}</div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center gap-2\">\r\n                  {integration.isConnecting && <Loader className=\"w-5 h-5 text-blue-600 animate-spin\" />}\r\n                  {integration.isConnected && !integration.isConnecting && (\r\n                    <>\r\n                      <span className=\"w-3 h-3 bg-green-500 rounded-full\"></span>\r\n                      <span className=\"text-sm font-semibold text-green-700\">Connected</span>\r\n                    </>\r\n                  )}\r\n                  {!integration.isConnected && !integration.isConnecting && (\r\n                    <>\r\n                      <span className=\"w-3 h-3 bg-slate-400 rounded-full\"></span>\r\n                      <span className=\"text-sm font-semibold text-slate-600\">Not Connected</span>\r\n                    </>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex gap-3 flex-wrap\">\r\n                  {integration.isConnected ? (\r\n                    <>\r\n                      <button\r\n                        onClick={() => handleEdit(integration.id)}\r\n                        className=\"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-semibold text-sm\"\r\n                      >\r\n                        Update\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDisconnect(integration.id)}\r\n                        className=\"flex-1 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-colors font-semibold text-sm\"\r\n                      >\r\n                        Disconnect\r\n                      </button>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <button\r\n                        onClick={() => handleEdit(integration.id)}\r\n                        className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm\"\r\n                      >\r\n                        Configure\r\n                      </button>\r\n                      {integration.endpoint && integration.username && (\r\n                        <button\r\n                          onClick={() => handleConnect(integration.id)}\r\n                          disabled={integration.isConnecting}\r\n                          className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors font-semibold text-sm flex items-center justify-center gap-2\"\r\n                        >\r\n                          {integration.isConnecting ? (\r\n                            <>\r\n                              <Loader className=\"w-4 h-4 animate-spin\" />\r\n                              Connecting...\r\n                            </>\r\n                          ) : (\r\n                            'Connect'\r\n                          )}\r\n                        </button>\r\n                      )}\r\n                    </>\r\n                  )}\r\n\r\n                  {integration.docLink && (\r\n                    <a\r\n                      href={integration.docLink}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"flex items-center justify-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors font-semibold text-sm\"\r\n                    >\r\n                      <ExternalLink className=\"w-4 h-4\" />\r\n                      Docs\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8\">\r\n        <h4 className=\"font-semibold text-slate-900 mb-2\">How It Works</h4>\r\n        <ul className=\"text-sm text-slate-700 space-y-2\">\r\n          <li>\r\n            <strong>Jira:</strong> Enter your Jira instance URL, email, and API token. Click \"Connect\" to establish a secure session-based connection.\r\n          </li>\r\n          <li>\r\n            <strong>ServiceNow:</strong> Enter your ServiceNow instance URL, username, and password. Click \"Connect\" to establish a secure session-based connection.\r\n          </li>\r\n          <li>\r\n            <strong>Secure Session Storage:</strong> Your credentials are validated once and stored securely in your session (not in the browser or .env). No repeated prompts!\r\n          </li>\r\n          <li>\r\n            <strong>Test Cases Generator:</strong> Once connected, you can select stories from Jira or ServiceNow and generate test cases using AI.\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Integration Configuration\r\n * Loads Jira and ServiceNow settings from environment variables\r\n */\r\n\r\nexport interface IntegrationConfig {\r\n  jira?: {\r\n    endpoint: string;\r\n    username: string;\r\n    apiKey: string;\r\n  };\r\n  servicenow?: {\r\n    endpoint: string;\r\n    username: string;\r\n    password: string;\r\n  };\r\n}\r\n\r\n/**\r\n * Load integration configurations from environment variables\r\n * Returns only configured integrations (those with API keys/passwords)\r\n */\r\nexport function getIntegrationConfigFromEnv(): IntegrationConfig {\r\n  const configs: IntegrationConfig = {};\r\n\r\n  // Check for Jira\r\n  const jiraKey = import.meta.env.VITE_JIRA_API_KEY;\r\n  if (jiraKey) {\r\n    configs.jira = {\r\n      endpoint: import.meta.env.VITE_JIRA_API_ENDPOINT || '',\r\n      username: import.meta.env.VITE_JIRA_USERNAME || '',\r\n      apiKey: jiraKey,\r\n    };\r\n  }\r\n\r\n  // Check for ServiceNow\r\n  const serviceNowPassword = import.meta.env.VITE_SERVICENOW_PASSWORD;\r\n  if (serviceNowPassword) {\r\n    configs.servicenow = {\r\n      endpoint: import.meta.env.VITE_SERVICENOW_API_ENDPOINT || '',\r\n      username: import.meta.env.VITE_SERVICENOW_USERNAME || '',\r\n      password: serviceNowPassword,\r\n    };\r\n  }\r\n\r\n  return configs;\r\n}\r\n\r\n/**\r\n * Get Jira config from environment\r\n */\r\nexport function getJiraConfigFromEnv() {\r\n  const config = getIntegrationConfigFromEnv();\r\n  return config.jira;\r\n}\r\n\r\n/**\r\n * Get ServiceNow config from environment\r\n */\r\nexport function getServiceNowConfigFromEnv() {\r\n  const config = getIntegrationConfigFromEnv();\r\n  return config.servicenow;\r\n}\r\n\r\n/**\r\n * Check if Jira is configured\r\n */\r\nexport function isJiraConfigured(): boolean {\r\n  return !!getJiraConfigFromEnv();\r\n}\r\n\r\n/**\r\n * Check if ServiceNow is configured\r\n */\r\nexport function isServiceNowConfigured(): boolean {\r\n  return !!getServiceNowConfigFromEnv();\r\n}\r\n","import { useState } from 'react';\r\n\r\ninterface TestCase {\r\n  id: string;\r\n  testCaseId: string;\r\n  module: string;\r\n  testCaseTitle: string;\r\n  testCaseDescription: string;\r\n  preconditions: string;\r\n  testSteps: string;\r\n  expectedResults: string;\r\n  priority: 'P1' | 'P2' | 'P3';\r\n  testType: 'Integration' | 'Functional';\r\n  riskLevel: 'Critical' | 'High' | 'Medium' | 'Low';\r\n  linkedUserStories: string[];\r\n  sourceCitations: string[];\r\n  complianceNotes: string;\r\n  estimatedExecutionTime: string;\r\n}\r\n\r\nconst mockTestCases: TestCase[] = [\r\n  {\r\n    id: '1',\r\n    testCaseId: 'TC-001',\r\n    module: 'Authentication',\r\n    testCaseTitle: 'User Login with Valid Credentials',\r\n    testCaseDescription: 'Verify that users can successfully login with valid email and password',\r\n    preconditions: 'User account must exist in the system',\r\n    testSteps: '1. Navigate to login page\\n2. Enter valid email\\n3. Enter valid password\\n4. Click Login button\\n5. Verify redirect to dashboard',\r\n    expectedResults: 'User is logged in successfully and redirected to dashboard',\r\n    priority: 'P1',\r\n    testType: 'Functional',\r\n    riskLevel: 'Critical',\r\n    linkedUserStories: ['US-001', 'US-002'],\r\n    sourceCitations: ['REQ-AUTH-001'],\r\n    complianceNotes: 'Must comply with OWASP authentication standards',\r\n    estimatedExecutionTime: '5 minutes',\r\n  },\r\n  {\r\n    id: '2',\r\n    testCaseId: 'TC-002',\r\n    module: 'Authentication',\r\n    testCaseTitle: 'User Login with Invalid Credentials',\r\n    testCaseDescription: 'Verify that login fails with invalid credentials',\r\n    preconditions: 'User account must exist in the system',\r\n    testSteps: '1. Navigate to login page\\n2. Enter invalid email\\n3. Enter invalid password\\n4. Click Login button\\n5. Verify error message',\r\n    expectedResults: 'Error message is displayed, user is not logged in',\r\n    priority: 'P1',\r\n    testType: 'Functional',\r\n    riskLevel: 'Critical',\r\n    linkedUserStories: ['US-001'],\r\n    sourceCitations: ['REQ-AUTH-002'],\r\n    complianceNotes: 'Must provide security warnings',\r\n    estimatedExecutionTime: '5 minutes',\r\n  },\r\n];\r\n\r\nexport function TestCases() {\r\n  const [testCases] = useState<TestCase[]>(mockTestCases);\r\n  const [selectedTestCase, setSelectedTestCase] = useState<TestCase | null>(null);\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'P1': return 'bg-red-100 text-red-700 border-red-300';\r\n      case 'P2': return 'bg-yellow-100 text-yellow-700 border-yellow-300';\r\n      case 'P3': return 'bg-green-100 text-green-700 border-green-300';\r\n      default: return 'bg-slate-100 text-slate-700 border-slate-300';\r\n    }\r\n  };\r\n\r\n  const getRiskLevelColor = (riskLevel: string) => {\r\n    switch (riskLevel) {\r\n      case 'Critical': return 'bg-red-100 text-red-700 border-red-300';\r\n      case 'High': return 'bg-orange-100 text-orange-700 border-orange-300';\r\n      case 'Medium': return 'bg-yellow-100 text-yellow-700 border-yellow-300';\r\n      case 'Low': return 'bg-green-100 text-green-700 border-green-300';\r\n      default: return 'bg-slate-100 text-slate-700 border-slate-300';\r\n    }\r\n  };\r\n\r\n  if (testCases.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-xl shadow-md p-12 border border-slate-200 text-center\">\r\n        <div className=\"text-slate-400 mb-4\">\r\n          <svg className=\"w-16 h-16 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n          </svg>\r\n        </div>\r\n        <h3 className=\"text-xl font-bold text-slate-900 mb-2\">No Test Cases Found</h3>\r\n        <p className=\"text-slate-600\">Generate test cases from the Test Cases Generator module to see them here.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h3 className=\"text-2xl font-bold text-slate-900\">Test Cases</h3>\r\n          <p className=\"text-slate-600 mt-1\">Total: {testCases.length} test cases</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow-md border border-slate-200 overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Test Case ID</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Module</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Title</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Priority</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Test Type</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Risk Level</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Est. Time</th>\r\n                <th className=\"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-slate-200\">\r\n              {testCases.map((testCase) => (\r\n                <tr key={testCase.id} className=\"hover:bg-slate-50 transition-colors\">\r\n                  <td className=\"px-4 py-3 text-sm font-mono text-slate-900\">{testCase.testCaseId}</td>\r\n                  <td className=\"px-4 py-3 text-sm text-slate-700\">{testCase.module}</td>\r\n                  <td className=\"px-4 py-3 text-sm text-slate-900 font-medium max-w-xs truncate\">{testCase.testCaseTitle}</td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span className={`px-2 py-1 text-xs font-semibold rounded border ${getPriorityColor(testCase.priority)}`}>\r\n                      {testCase.priority}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm text-slate-700\">{testCase.testType}</td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span className={`px-2 py-1 text-xs font-semibold rounded border ${getRiskLevelColor(testCase.riskLevel)}`}>\r\n                      {testCase.riskLevel}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-sm text-slate-700\">{testCase.estimatedExecutionTime || 'N/A'}</td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <button\r\n                      onClick={() => setSelectedTestCase(testCase)}\r\n                      className=\"text-blue-600 hover:text-blue-800 text-sm font-semibold\"\r\n                    >\r\n                      View Details\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedTestCase && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between\">\r\n              <h3 className=\"text-xl font-bold text-slate-900\">Test Case Details</h3>\r\n              <button\r\n                onClick={() => setSelectedTestCase(null)}\r\n                className=\"text-slate-400 hover:text-slate-600\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Test Case ID</label>\r\n                  <p className=\"text-sm font-mono text-slate-900 mt-1\">{selectedTestCase.testCaseId}</p>\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Module</label>\r\n                  <p className=\"text-sm text-slate-900 mt-1\">{selectedTestCase.module}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Title</label>\r\n                <p className=\"text-base font-semibold text-slate-900 mt-1\">{selectedTestCase.testCaseTitle}</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Description</label>\r\n                <p className=\"text-sm text-slate-700 mt-1 leading-relaxed\">{selectedTestCase.testCaseDescription}</p>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Priority</label>\r\n                  <span className={`inline-block px-3 py-1 text-sm font-semibold rounded border mt-2 ${getPriorityColor(selectedTestCase.priority)}`}>\r\n                    {selectedTestCase.priority}\r\n                  </span>\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Test Type</label>\r\n                  <p className=\"text-sm text-slate-900 mt-2\">{selectedTestCase.testType}</p>\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Risk Level</label>\r\n                  <span className={`inline-block px-3 py-1 text-sm font-semibold rounded border mt-2 ${getRiskLevelColor(selectedTestCase.riskLevel)}`}>\r\n                    {selectedTestCase.riskLevel}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Preconditions</label>\r\n                <p className=\"text-sm text-slate-700 mt-1 whitespace-pre-wrap\">{selectedTestCase.preconditions}</p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Test Steps</label>\r\n                <div className=\"text-sm text-slate-700 mt-1 whitespace-pre-wrap bg-slate-50 p-4 rounded border border-slate-200\">\r\n                  {selectedTestCase.testSteps}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Expected Results</label>\r\n                <p className=\"text-sm text-slate-700 mt-1 whitespace-pre-wrap\">{selectedTestCase.expectedResults}</p>\r\n              </div>\r\n\r\n              {selectedTestCase.linkedUserStories.length > 0 && (\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Linked User Stories</label>\r\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\r\n                    {selectedTestCase.linkedUserStories.map((story, idx) => (\r\n                      <span key={idx} className=\"px-3 py-1 bg-blue-50 text-blue-700 text-sm rounded border border-blue-200\">\r\n                        {story}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedTestCase.complianceNotes && (\r\n                <div>\r\n                  <label className=\"text-xs font-semibold text-slate-500 uppercase\">Compliance Notes</label>\r\n                  <p className=\"text-sm text-slate-700 mt-1\">{selectedTestCase.complianceNotes}</p>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-slate-500 uppercase\">Estimated Execution Time</label>\r\n                <p className=\"text-sm text-slate-900 mt-1\">{selectedTestCase.estimatedExecutionTime || 'Not specified'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import type { Story } from './integrationService';\r\n\r\nexport interface GeneratedTestCase {\r\n  id: string;\r\n  name: string;\r\n  short_description: string;\r\n  description: string;\r\n  test_type: string;\r\n  priority: string;\r\n  state: string;\r\n  version?: string;\r\n  steps: Array<{ order: number; step: string; expected_result: string; test_data: string }>;\r\n}\r\n\r\nexport interface FeatureFileOptions {\r\n  testCases: GeneratedTestCase[];\r\n  story: Story | null;\r\n  featureName?: string;\r\n}\r\n\r\nexport interface FeatureFileResponse {\r\n  featureFile: string;\r\n  stats: {\r\n    lines: number;\r\n    scenarios: number;\r\n    examplesCount: number;\r\n  };\r\n}\r\n\r\nclass FeatureFileService {\r\n  /**\r\n   * Generate Scenario Outline Feature File (Bulk test cases with Examples table)\r\n   */\r\n  generateScenarioOutline(options: FeatureFileOptions): string {\r\n    const featureName = options.featureName || options.story?.title || 'Generated Feature';\r\n    const description = options.story?.description || '';\r\n    const epicTitle = options.story?.epicTitle ? `Epic: ${options.story.epicTitle}` : '';\r\n\r\n    let content = `Feature: ${featureName}\\n`;\r\n    \r\n    if (epicTitle) {\r\n      content += `  ${epicTitle}\\n`;\r\n    }\r\n    \r\n    if (description) {\r\n      content += `  ${description}\\n`;\r\n    }\r\n    \r\n    content += '\\n';\r\n\r\n    // Create a single scenario outline from all test cases\r\n    if (options.testCases.length > 0) {\r\n      // Extract Given/When/Then steps from the first test case\r\n      const firstTestCase = options.testCases[0];\r\n      const steps = firstTestCase.steps || [];\r\n      \r\n      // Generate scenario name from first test case description\r\n      const scenarioName = this.generateScenarioName(options.testCases);\r\n      content += `  Scenario Outline: ${scenarioName}\\n`;\r\n\r\n      // Extract steps and organize by Given/When/Then\r\n      const givenSteps: string[] = [];\r\n      const whenSteps: string[] = [];\r\n      const thenSteps: Array<{ step: string; assertion?: string }> = [];\r\n      const testDataKeys = new Set<string>();\r\n\r\n      // Process steps to extract Given/When/Then\r\n      steps.forEach((step, index) => {\r\n        const stepText = step.step.trim();\r\n        const ratio = steps.length > 1 ? index / (steps.length - 1) : 0;\r\n\r\n        // Extract potential test data parameters from step text\r\n        const dataMatches = step.test_data?.match(/:\\s*(.+?)(?:$|,)/);\r\n        if (dataMatches && dataMatches[1]) {\r\n          const keyMatch = step.test_data.match(/^([^:]+):/);\r\n          if (keyMatch) {\r\n            testDataKeys.add(keyMatch[1].trim());\r\n          }\r\n        }\r\n\r\n        // Distribute steps across Given/When/Then based on position\r\n        if (ratio < 0.33) {\r\n          givenSteps.push(stepText);\r\n        } else if (ratio < 0.67) {\r\n          whenSteps.push(stepText);\r\n        } else {\r\n          // For Then steps, include assertion from expected_result\r\n          thenSteps.push({\r\n            step: stepText,\r\n            assertion: step.expected_result?.trim(),\r\n          });\r\n        }\r\n      });\r\n\r\n      // Output Given steps\r\n      givenSteps.forEach((step) => {\r\n        content += `    Given ${step}\\n`;\r\n      });\r\n\r\n      // Output When steps\r\n      whenSteps.forEach((step) => {\r\n        content += `    When ${step}\\n`;\r\n      });\r\n\r\n      // Output Then steps with split assertions\r\n      thenSteps.forEach((stepObj, idx) => {\r\n        if (idx === 0) {\r\n          content += `    Then ${stepObj.step}\\n`;\r\n        } else {\r\n          content += `    And ${stepObj.step}\\n`;\r\n        }\r\n        \r\n        // Split and output each assertion as a separate step\r\n        if (stepObj.assertion) {\r\n          const assertions = this.splitAndFormatAssertions(stepObj.assertion);\r\n          assertions.forEach((assertion) => {\r\n            content += `    And ${assertion}\\n`;\r\n          });\r\n        }\r\n      });\r\n\r\n      // Build Examples table with dynamic columns\r\n      const exampleColumns = this.extractExampleColumns(options.testCases);\r\n      const columnHeaders = Array.from(exampleColumns.keys());\r\n\r\n      if (columnHeaders.length > 0) {\r\n        content += '\\n    Examples:\\n';\r\n        content += `      | ${columnHeaders.join(' | ')} |\\n`;\r\n\r\n        options.testCases.forEach((testCase) => {\r\n          const values = columnHeaders.map((header) => exampleColumns.get(header)?.get(testCase.id) || '-');\r\n          content += `      | ${values.join(' | ')} |\\n`;\r\n        });\r\n      }\r\n    }\r\n\r\n    return content;\r\n  }\r\n\r\n  /**\r\n   * Extract example columns from test cases\r\n   */\r\n  private extractExampleColumns(\r\n    testCases: GeneratedTestCase[]\r\n  ): Map<string, Map<string, string>> {\r\n    const columns = new Map<string, Map<string, string>>();\r\n\r\n    testCases.forEach((testCase) => {\r\n      if (!testCase.steps || testCase.steps.length === 0) return;\r\n\r\n      // Extract test data from steps\r\n      testCase.steps.forEach((step) => {\r\n        if (!step.test_data) return;\r\n\r\n        // Parse test_data format: \"field_name: value\" or just \"value\"\r\n        const parts = step.test_data.split(':');\r\n        if (parts.length === 2) {\r\n          const key = this.sanitizeForTable(parts[0].trim());\r\n          const value = this.sanitizeForTable(parts[1].trim());\r\n\r\n          if (!columns.has(key)) {\r\n            columns.set(key, new Map());\r\n          }\r\n          columns.get(key)!.set(testCase.id, value);\r\n        }\r\n      });\r\n\r\n      // Add test case metadata columns\r\n      if (!columns.has('test_case')) {\r\n        columns.set('test_case', new Map());\r\n      }\r\n      columns.get('test_case')!.set(testCase.id, this.sanitizeForTable(testCase.name));\r\n\r\n      if (!columns.has('expected_result')) {\r\n        columns.set('expected_result', new Map());\r\n      }\r\n      const lastStep = testCase.steps[testCase.steps.length - 1];\r\n      columns.get('expected_result')!.set(testCase.id, this.sanitizeForTable(lastStep?.expected_result || ''));\r\n\r\n      if (!columns.has('priority')) {\r\n        columns.set('priority', new Map());\r\n      }\r\n      columns.get('priority')!.set(testCase.id, testCase.priority);\r\n\r\n      if (!columns.has('type')) {\r\n        columns.set('type', new Map());\r\n      }\r\n      columns.get('type')!.set(testCase.id, testCase.test_type);\r\n    });\r\n\r\n    return columns;\r\n  }\r\n\r\n  /**\r\n   * Generate feature file via LLM backend\r\n   */\r\n  async generateViaLLM(options: FeatureFileOptions, llmProvider: string): Promise<FeatureFileResponse> {\r\n    const response = await fetch('/api/feature-file/generate', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        testCases: options.testCases,\r\n        story: options.story,\r\n        featureName: options.featureName,\r\n        llmProvider,\r\n      }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json();\r\n      throw new Error(error.error || 'Failed to generate feature file via LLM');\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Generate scenario name based on test cases\r\n   */\r\n  private splitAndFormatAssertions(assertionText: string): string[] {\r\n    if (!assertionText) return [];\r\n\r\n    // Split by common assertion delimiters: semicolon, \"and\", period\r\n    const assertions = assertionText\r\n      .split(/[;]|(?:\\s+and\\s+)|(?:\\s*\\.\\s*)/)\r\n      .map(s => s.trim())\r\n      .filter(s => s.length > 0);\r\n\r\n    return assertions.map((assertion) => {\r\n      // Add action verb if missing\r\n      const actionVerbs = ['Verify', 'Check', 'Validate', 'Ensure', 'Confirm', 'Assert', 'Should'];\r\n      const startsWithVerb = actionVerbs.some(verb => \r\n        assertion.toLowerCase().startsWith(verb.toLowerCase())\r\n      );\r\n\r\n      if (!startsWithVerb) {\r\n        // Determine appropriate verb based on assertion content\r\n        if (assertion.toLowerCase().includes('disabled') || assertion.toLowerCase().includes('hidden') || assertion.toLowerCase().includes('not ')) {\r\n          return `Verify ${assertion}`;\r\n        } else if (assertion.toLowerCase().includes('show') || assertion.toLowerCase().includes('display') || assertion.toLowerCase().includes('appear')) {\r\n          return `Verify ${assertion}`;\r\n        } else if (assertion.toLowerCase().includes('error') || assertion.toLowerCase().includes('message')) {\r\n          return `Check ${assertion}`;\r\n        } else {\r\n          return `Verify ${assertion}`;\r\n        }\r\n      }\r\n\r\n      return assertion;\r\n    });\r\n  }\r\n\r\n  private generateScenarioName(testCases: GeneratedTestCase[]): string {\r\n    if (testCases.length === 1) {\r\n      return `Verify ${testCases[0].name}`;\r\n    }\r\n    const types = [...new Set(testCases.map((tc) => tc.test_type))];\r\n    const typesStr = types.join(' and ');\r\n    return `Execute ${types.length === 1 ? typesStr : 'multiple'} test scenarios`;\r\n  }\r\n\r\n  /**\r\n   * Sanitize text for table display\r\n   */\r\n  private sanitizeForTable(text: string): string {\r\n    return text.replace(/\\|/g, ' ').replace(/\\n/g, ' ').substring(0, 50);\r\n  }\r\n\r\n  /**\r\n   * Download feature file\r\n   */\r\n  downloadFeatureFile(content: string, filename: string = 'features.feature'): void {\r\n    const element = document.createElement('a');\r\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));\r\n    element.setAttribute('download', filename);\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n    element.click();\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  /**\r\n   * Copy to clipboard\r\n   */\r\n  async copyToClipboard(content: string): Promise<void> {\r\n    await navigator.clipboard.writeText(content);\r\n  }\r\n\r\n  /**\r\n   * Get file statistics\r\n   */\r\n  getFileStats(content: string): { lines: number; size: string; scenarios: number } {\r\n    const lines = content.split('\\n').length;\r\n    const scenarios = (content.match(/Scenario Outline:/g) || []).length;\r\n    const bytes = new Blob([content]).size;\r\n    const size =\r\n      bytes < 1024\r\n        ? `${bytes}B`\r\n        : bytes < 1024 * 1024\r\n          ? `${(bytes / 1024).toFixed(2)}KB`\r\n          : `${(bytes / (1024 * 1024)).toFixed(2)}MB`;\r\n\r\n    return { lines, size, scenarios };\r\n  }\r\n}\r\n\r\nexport const featureFileService = new FeatureFileService();\r\n","import { useState } from 'react';\r\nimport { FileText, Download, Copy, Check, X, AlertCircle, Loader, Sparkles } from 'lucide-react';\r\nimport { featureFileService } from '../services/featureFileService';\r\nimport type { Story } from '../services/integrationService';\r\nimport type { LLMProvider } from '../config/llmConfig';\r\n\r\ninterface GeneratedTestCase {\r\n  id: string;\r\n  name: string;\r\n  short_description: string;\r\n  description: string;\r\n  test_type: string;\r\n  priority: string;\r\n  state: string;\r\n  version?: string;\r\n  steps: Array<{ order: number; step: string; expected_result: string; test_data: string }>;\r\n}\r\n\r\ninterface FeatureFileGeneratorProps {\r\n  testCases: GeneratedTestCase[];\r\n  story: Story | null;\r\n  onClose: () => void;\r\n  currentLLMProvider: LLMProvider;\r\n}\r\n\r\nexport function FeatureFileGenerator({\r\n  testCases,\r\n  story,\r\n  onClose,\r\n  currentLLMProvider,\r\n}: FeatureFileGeneratorProps) {\r\n  const [featureName, setFeatureName] = useState(story?.title || 'Feature');\r\n  const [generatedContent, setGeneratedContent] = useState<string | null>(null);\r\n  const [copied, setCopied] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleGenerate = async () => {\r\n    try {\r\n      setError(null);\r\n      setLoading(true);\r\n\r\n      try {\r\n        // Always try LLM-powered generation first\r\n        const response = await featureFileService.generateViaLLM(\r\n          {\r\n            testCases,\r\n            story,\r\n            featureName,\r\n          },\r\n          currentLLMProvider\r\n        );\r\n        setGeneratedContent(response.featureFile);\r\n      } catch (llmError) {\r\n        // Fallback to local generation if LLM fails\r\n        console.warn('LLM generation failed, falling back to local generation:', llmError);\r\n        const content = featureFileService.generateScenarioOutline({\r\n          testCases,\r\n          story,\r\n          featureName,\r\n        });\r\n        setGeneratedContent(content);\r\n      }\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to generate feature file');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownload = () => {\r\n    if (generatedContent) {\r\n      const filename = `${featureName.toLowerCase().replace(/\\s+/g, '_')}.feature`;\r\n      featureFileService.downloadFeatureFile(generatedContent, filename);\r\n    }\r\n  };\r\n\r\n  const handleCopy = async () => {\r\n    if (generatedContent) {\r\n      try {\r\n        await featureFileService.copyToClipboard(generatedContent);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n      } catch (err) {\r\n        setError('Failed to copy to clipboard');\r\n      }\r\n    }\r\n  };\r\n\r\n  const stats = generatedContent ? featureFileService.getFileStats(generatedContent) : null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 bg-slate-100 border-b border-slate-300 p-6 flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <FileText className=\"w-6 h-6 text-blue-600\" />\r\n            <h2 className=\"text-xl font-bold text-slate-900\">Generate Gherkin Feature File</h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-200 rounded-lg transition-colors\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Configuration */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Feature Name</label>\r\n              <input\r\n                type=\"text\"\r\n                value={featureName}\r\n                onChange={(e) => setFeatureName(e.target.value)}\r\n                placeholder=\"e.g., User Authentication\"\r\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n                <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n                <div>{error}</div>\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              onClick={handleGenerate}\r\n              disabled={loading}\r\n              className=\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <Loader className=\"w-4 h-4 animate-spin\" />\r\n                  Generating...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Sparkles className=\"w-4 h-4\" />\r\n                  Generate Feature File\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* AI Generation Info */}\r\n          <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n            <div className=\"flex items-center gap-2 mb-1\">\r\n              <Sparkles className=\"w-4 h-4 text-blue-600\" />\r\n              <span className=\"font-semibold text-slate-900\">AI-Powered Generation</span>\r\n            </div>\r\n            <div className=\"text-sm text-slate-700\">\r\n              Generating with <span className=\"font-semibold\">{currentLLMProvider.toUpperCase()}</span> provider\r\n            </div>\r\n            <div className=\"text-xs text-slate-600 mt-2\">\r\n              Enhanced scenarios using LLM provider. Falls back to local generation if needed.\r\n            </div>\r\n          </div>\r\n\r\n          {/* Generated Content */}\r\n          {generatedContent && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-slate-900\">Generated Feature File</h3>\r\n                  <p className=\"text-sm text-slate-600 mt-1\">\r\n                    {stats?.lines} lines  {stats?.size}  {stats?.scenarios} scenario(s)\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={handleCopy}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-slate-200 text-slate-900 rounded-lg hover:bg-slate-300 transition-colors text-sm font-medium\"\r\n                  >\r\n                    {copied ? (\r\n                      <>\r\n                        <Check className=\"w-4 h-4\" />\r\n                        Copied!\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Copy className=\"w-4 h-4\" />\r\n                        Copy\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDownload}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n                  >\r\n                    <Download className=\"w-4 h-4\" />\r\n                    Download\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-slate-900 text-slate-50 rounded-lg p-4 overflow-x-auto font-mono text-sm\">\r\n                <pre className=\"whitespace-pre-wrap break-words\">{generatedContent}</pre>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { TestTubes, Sparkles, Copy, Check, AlertCircle, Loader, RefreshCw, ChevronDown, Send, Download, FileText } from 'lucide-react';\r\nimport { llmService } from '../services/llmService';\r\nimport { fetchAllStories, type Story } from '../services/integrationService';\r\nimport { getModelsByProvider, type LLMProvider } from '../config/llmConfig';\r\nimport { FeatureFileGenerator } from './FeatureFileGenerator';\r\n\r\ninterface StepData {\r\n  order: number;\r\n  step: string;\r\n  expected_result: string;\r\n  test_data: string;\r\n}\r\n\r\ninterface GeneratedTestCase {\r\n  id: string;\r\n  name: string;\r\n  short_description: string;\r\n  description: string;\r\n  test_type: string;\r\n  priority: string;\r\n  state: string;\r\n  version?: string;\r\n  steps: StepData[];\r\n}\r\n\r\nexport function TestCasesGenerator() {\r\n  const [stories, setStories] = useState<Story[]>([]);\r\n  const [selectedStory, setSelectedStory] = useState<Story | null>(null);\r\n  const [loadingStories, setLoadingStories] = useState(false);\r\n  const [storiesError, setStoriesError] = useState<string | null>(null);\r\n\r\n  const getPersistentProvider = (): LLMProvider => {\r\n    const saved = localStorage.getItem('selected_llm_provider');\r\n    const configuredProviders = llmService.getConfiguredProviders();\r\n    \r\n    if (saved && configuredProviders.includes(saved as LLMProvider)) {\r\n      return saved as LLMProvider;\r\n    }\r\n    return configuredProviders.length > 0 ? configuredProviders[0] : 'openai';\r\n  };\r\n\r\n  const getPersistentModel = (provider: LLMProvider): string => {\r\n    const saved = localStorage.getItem(`selected_llm_model_${provider}`);\r\n    const availableModels = getModelsByProvider(provider);\r\n    \r\n    if (saved && availableModels.some(m => m.id === saved)) {\r\n      return saved;\r\n    }\r\n    return availableModels[0]?.id || 'gpt-4-turbo';\r\n  };\r\n\r\n  const [selectedProvider, _setSelectedProvider] = useState<LLMProvider>(getPersistentProvider());\r\n  const [selectedModel, _setSelectedModel] = useState(getPersistentModel(selectedProvider));\r\n  const [generatedTestCases, setGeneratedTestCases] = useState<GeneratedTestCase[]>([]);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [numTestCases, setNumTestCases] = useState(3);\r\n  const [copiedId, setCopiedId] = useState<string | null>(null);\r\n  const [expandedTestCaseId, setExpandedTestCaseId] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const [selectedTestCaseIds, setSelectedTestCaseIds] = useState<Set<string>>(new Set());\r\n  const [showFeatureFileModal, setShowFeatureFileModal] = useState(false);\r\n\r\n  const configuredProviders = llmService.getConfiguredProviders();\r\n\r\n  useEffect(() => {\r\n    loadStories();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('selected_llm_provider', selectedProvider);\r\n  }, [selectedProvider]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(`selected_llm_model_${selectedProvider}`, selectedModel);\r\n  }, [selectedModel, selectedProvider]);\r\n\r\n  const handleSelectTestCase = (testCaseId: string) => {\r\n    const newSelected = new Set(selectedTestCaseIds);\r\n    if (newSelected.has(testCaseId)) {\r\n      newSelected.delete(testCaseId);\r\n    } else {\r\n      newSelected.add(testCaseId);\r\n    }\r\n    setSelectedTestCaseIds(newSelected);\r\n  };\r\n\r\n  const handleSelectAllTestCases = () => {\r\n    if (selectedTestCaseIds.size === generatedTestCases.length) {\r\n      setSelectedTestCaseIds(new Set());\r\n    } else {\r\n      setSelectedTestCaseIds(new Set(generatedTestCases.map(tc => tc.id)));\r\n    }\r\n  };\r\n\r\n  const handleSendToServiceNow = () => {\r\n    const selectedCases = generatedTestCases.filter(tc => selectedTestCaseIds.has(tc.id));\r\n    console.log('[TestCases] Send to ServiceNow:', selectedCases);\r\n    setSuccess(`Ready to send ${selectedCases.length} test case(s) to ServiceNow`);\r\n    setTimeout(() => setSuccess(null), 3000);\r\n  };\r\n\r\n  const handleExportCSVExcel = () => {\r\n    const selectedCases = generatedTestCases.filter(tc => selectedTestCaseIds.has(tc.id));\r\n    console.log('[TestCases] Export to CSV/Excel:', selectedCases);\r\n    setSuccess(`Ready to export ${selectedCases.length} test case(s) to CSV/Excel`);\r\n    setTimeout(() => setSuccess(null), 3000);\r\n  };\r\n\r\n  const handleGenerateFeatureFile = () => {\r\n    const selectedCases = generatedTestCases.filter(tc => selectedTestCaseIds.has(tc.id));\r\n    if (selectedCases.length === 0) {\r\n      setError('Please select at least one test case');\r\n      setTimeout(() => setError(null), 3000);\r\n      return;\r\n    }\r\n    setShowFeatureFileModal(true);\r\n  };\r\n\r\n  const loadStories = async () => {\r\n    setLoadingStories(true);\r\n    setStoriesError(null);\r\n\r\n    try {\r\n      const fetchedStories = await fetchAllStories();\r\n      setStories(fetchedStories);\r\n      if (fetchedStories.length > 0) {\r\n        setSelectedStory(fetchedStories[0]);\r\n      }\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to load stories';\r\n      setStoriesError(errorMessage);\r\n    } finally {\r\n      setLoadingStories(false);\r\n    }\r\n  };\r\n\r\n  const generateTestCases = async () => {\r\n    if (!selectedStory) {\r\n      setError('Please select a story to generate test cases');\r\n      return;\r\n    }\r\n\r\n    if (configuredProviders.length === 0) {\r\n      setError('No LLM providers configured. Please configure at least one provider in Settings.');\r\n      return;\r\n    }\r\n\r\n    const provider = configuredProviders.includes(selectedProvider) ? selectedProvider : configuredProviders[0];\r\n    const config = llmService.getConfig(provider);\r\n\r\n    if (!config) {\r\n      setError(`Provider ${provider} is not properly configured`);\r\n      return;\r\n    }\r\n\r\n    setIsGenerating(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const prompt = `You are a QA test case generation expert. Generate ${numTestCases} comprehensive test cases based on the following user story:\r\n\r\nSTORY ID: ${selectedStory.key}\r\nTITLE: ${selectedStory.title}\r\nDESCRIPTION: ${selectedStory.description}\r\n${selectedStory.acceptanceCriteria ? `ACCEPTANCE CRITERIA:\\n${selectedStory.acceptanceCriteria}` : ''}\r\nSTATUS: ${selectedStory.status}\r\nPRIORITY: ${selectedStory.priority}\r\nSOURCE: ${selectedStory.source.toUpperCase()}\r\n\r\nIMPORTANT: Return ONLY valid JSON with NO markdown formatting, NO code blocks, NO \\`\\`\\` markers. Just raw JSON.\r\n\r\nGenerate test cases in the following FLAT JSON format (NO NESTED OBJECTS):\r\n\r\n{\r\n  \"test_cases\": [\r\n    {\r\n      \"name\": \"Test Case Name\",\r\n      \"short_description\": \"Brief description\",\r\n      \"description\": \"Detailed test case description\",\r\n      \"test_type\": \"Positive\",\r\n      \"priority\": \"High\",\r\n      \"state\": \"draft\",\r\n      \"version\": \"1.0\",\r\n      \"steps\": [\r\n        {\r\n          \"order\": 100,\r\n          \"step\": \"Step description\",\r\n          \"expected_result\": \"Expected outcome\",\r\n          \"test_data\": \"Test data if applicable\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n\r\nRequirements:\r\n- Each test case MUST have: name, short_description, description, test_type, priority, state, version, steps\r\n- short_description and description MUST start with an action verb (Verify, Check, Validate, Test, Ensure, Confirm, etc.)\r\n- Examples: \"Verify user can login with valid credentials\", \"Check that error message displays\", \"Validate page loads successfully\"\r\n- NO nested testData or versionData objects - use flat properties only\r\n- Include steps array with ordered steps (order field: 100, 200, 300, etc.)\r\n- Each step must have: order, step, expected_result, and test_data fields\r\n- Priority values: \"Critical\", \"High\", \"Medium\", \"Low\"\r\n- test_type values: \"Positive\", \"Negative\", \"End to End\", \"Edge Cases\"\r\n- Return valid JSON object with a \"test_cases\" array containing exactly ${numTestCases} test cases\r\n- DO NOT wrap the JSON in markdown code blocks (no \\`\\`\\`json)\r\n- DO NOT add any text before or after the JSON\r\n- Return ONLY the JSON object`;\r\n\r\n      let url = '';\r\n      let headers: Record<string, string> = {\r\n        'Content-Type': 'application/json',\r\n      };\r\n\r\n      if (provider === 'azure-openai') {\r\n        const endpoint = config.endpoint.endsWith('/') ? config.endpoint : `${config.endpoint}/`;\r\n        const deploymentName = (config as any).deploymentName || selectedModel;\r\n        const apiVersion = (config as any).apiVersion || '2024-02-15-preview';\r\n        url = `${endpoint}openai/deployments/${deploymentName}/chat/completions?api-version=${apiVersion}`;\r\n        headers['api-key'] = config.apiKey;\r\n      } else {\r\n        const baseEndpoint = config.endpoint.endsWith('/chat/completions')\r\n          ? config.endpoint\r\n          : `${config.endpoint}/chat/completions`;\r\n        url = baseEndpoint;\r\n        headers['Authorization'] = `Bearer ${config.apiKey}`;\r\n      }\r\n\r\n      const requestBody = {\r\n        model: selectedModel,\r\n        messages: [\r\n          {\r\n            role: 'user',\r\n            content: prompt,\r\n          },\r\n        ],\r\n        temperature: 0.7,\r\n        max_tokens: provider === 'groq' ? 4096 : 2048,\r\n      };\r\n\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(requestBody),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        let errorDetail = response.statusText;\r\n        try {\r\n          const errorBody = await response.json();\r\n          errorDetail = errorBody.error?.message || errorBody.message || JSON.stringify(errorBody).substring(0, 200);\r\n        } catch {\r\n          try {\r\n            errorDetail = await response.text();\r\n          } catch {}\r\n        }\r\n        throw new Error(`LLM API error (${response.status}): ${errorDetail}`);\r\n      }\r\n\r\n      const data = await response.json() as { choices: Array<{ message: { content: string } }> };\r\n      const content = data.choices[0]?.message?.content || '';\r\n\r\n      if (!content) {\r\n        throw new Error('Empty response from LLM - no content generated');\r\n      }\r\n\r\n      const extractAndParseJSON = (text: string) => {\r\n        let cleanText = text.replace(/^```[\\w]*\\n/m, '').replace(/\\n```\\s*$/m, '').trim();\r\n        try {\r\n          const parsed = JSON.parse(cleanText);\r\n          if (parsed.test_cases && Array.isArray(parsed.test_cases) && parsed.test_cases.length > 0) {\r\n            return parsed;\r\n          }\r\n        } catch {}\r\n\r\n        try {\r\n          const match = cleanText.match(/\"test_cases\"\\s*:\\s*(\\[[\\s\\S]*\\])/);\r\n          if (match && match[1]) {\r\n            const arrayStr = match[1];\r\n            const testCasesArray = JSON.parse(arrayStr);\r\n            if (Array.isArray(testCasesArray) && testCasesArray.length > 0) {\r\n              return { test_cases: testCasesArray };\r\n            }\r\n          }\r\n        } catch {}\r\n\r\n        throw new Error('Could not extract valid JSON with test_cases from response');\r\n      };\r\n\r\n      const parsedResponse = extractAndParseJSON(content);\r\n      const testCases = parsedResponse.test_cases;\r\n      \r\n      if (!Array.isArray(testCases) || testCases.length === 0) {\r\n        throw new Error('No test cases found in response');\r\n      }\r\n\r\n      console.log('[TestCases] Successfully extracted test cases:', testCases.length);\r\n      console.log('[TestCases] First test case structure:', JSON.stringify(testCases[0], null, 2));\r\n\r\n      const formattedTestCases = testCases.map((tc, idx) => ({\r\n        ...tc,\r\n        id: `gen-${Date.now()}-${idx}`,\r\n      }));\r\n\r\n      setGeneratedTestCases(formattedTestCases);\r\n      setSuccess(`Successfully generated ${formattedTestCases.length} test cases!`);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error occurred';\r\n      setError(`Failed to generate test cases: ${errorMessage}`);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = (testCase: GeneratedTestCase) => {\r\n    const text = JSON.stringify(testCase, null, 2);\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedId(testCase.id);\r\n    setTimeout(() => setCopiedId(null), 2000);\r\n  };\r\n\r\n  const parseAcceptanceCriteria = (html: string): string[] => {\r\n    if (!html) return [];\r\n    const tempDiv = document.createElement('div');\r\n    tempDiv.innerHTML = html;\r\n    const listItems = tempDiv.querySelectorAll('li');\r\n    const items: string[] = [];\r\n    listItems.forEach((li) => {\r\n      const text = li.textContent?.trim() || '';\r\n      if (text) items.push(text);\r\n    });\r\n    if (items.length === 0) {\r\n      const cleanText = html\r\n        .replace(/<[^>]*>/g, '')\r\n        .replace(/&#\\d+;/g, (match) => {\r\n          const code = parseInt(match.substring(2, match.length - 1));\r\n          return String.fromCharCode(code);\r\n        })\r\n        .replace(/&quot;/g, '\"')\r\n        .replace(/&amp;/g, '&')\r\n        .replace(/&lt;/g, '<')\r\n        .replace(/&gt;/g, '>')\r\n        .split('\\n')\r\n        .map(line => line.trim())\r\n        .filter(line => line.length > 0);\r\n      return cleanText;\r\n    }\r\n    return items;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <TestTubes className=\"w-8 h-8 text-blue-600\" />\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-slate-900\">Test Cases Generator</h2>\r\n          <p className=\"text-slate-600 mt-1\">Generate test cases from Jira & ServiceNow stories using AI</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"lg:col-span-1 space-y-4\">\r\n          <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"font-semibold text-slate-900\">Stories</h3>\r\n              <button\r\n                onClick={loadStories}\r\n                disabled={loadingStories}\r\n                className=\"p-2 text-slate-600 hover:text-slate-900 disabled:text-gray-400\"\r\n                title=\"Refresh stories\"\r\n              >\r\n                <RefreshCw className={`w-4 h-4 ${loadingStories ? 'animate-spin' : ''}`} />\r\n              </button>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Number of Test Cases</label>\r\n              <select\r\n                value={numTestCases}\r\n                onChange={(e) => setNumTestCases(parseInt(e.target.value))}\r\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n              >\r\n                {[1, 2, 3, 5, 10].map((num) => (\r\n                  <option key={num} value={num}>\r\n                    {num} test case{num !== 1 ? 's' : ''}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Search Stories</label>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by Story ID or text...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\r\n              />\r\n            </div>\r\n\r\n            {storiesError && (\r\n              <div className=\"flex gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-700 text-sm\">\r\n                <AlertCircle className=\"w-4 h-4 flex-shrink-0 mt-0.5\" />\r\n                <div>{storiesError}</div>\r\n              </div>\r\n            )}\r\n\r\n            {loadingStories ? (\r\n              <div className=\"flex items-center justify-center py-8\">\r\n                <Loader className=\"w-5 h-5 animate-spin text-blue-600\" />\r\n              </div>\r\n            ) : stories.length === 0 ? (\r\n              <div className=\"text-center py-4\">\r\n                <p className=\"text-sm text-slate-600\">No stories found</p>\r\n                <p className=\"text-xs text-slate-500 mt-2\">Configure Jira or ServiceNow credentials</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                {stories\r\n                  .filter((story) => {\r\n                    const searchLower = searchTerm.toLowerCase();\r\n                    return (\r\n                      story.key.toLowerCase().includes(searchLower) ||\r\n                      story.title.toLowerCase().includes(searchLower) ||\r\n                      story.description.toLowerCase().includes(searchLower)\r\n                    );\r\n                  })\r\n                  .map((story) => (\r\n                  <button\r\n                    key={`${story.source}-${story.id}`}\r\n                    onClick={() => setSelectedStory(story)}\r\n                    className={`w-full text-left p-3 rounded-lg border-2 transition-all ${\r\n                      selectedStory?.id === story.id && selectedStory?.source === story.source\r\n                        ? 'border-blue-500 bg-blue-50'\r\n                        : 'border-slate-200 hover:border-blue-300'\r\n                    }`}\r\n                  >\r\n                    <div className=\"text-sm font-semibold text-slate-900 truncate\">{story.key}</div>\r\n                    <div className=\"text-xs text-slate-600 mt-1 line-clamp-2\">{story.title}</div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"lg:col-span-1 space-y-4\">\r\n          <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"font-semibold text-slate-900\">Selected Story</h3>\r\n              {generatedTestCases.length > 0 && (\r\n                <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold\">\r\n                  {generatedTestCases.length} Test Case{generatedTestCases.length !== 1 ? 's' : ''}\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            {selectedStory ? (\r\n              <div className=\"space-y-4\">\r\n                {error && (\r\n                  <div className=\"flex gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\r\n                    <AlertCircle className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n                    <div>{error}</div>\r\n                  </div>\r\n                )}\r\n\r\n                {success && (\r\n                  <div className=\"flex gap-2 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm\">\r\n                    <Check className=\"w-5 h-5 flex-shrink-0 mt-0.5\" />\r\n                    <div>{success}</div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"space-y-3 text-sm\">\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Key:</span>\r\n                    <p className=\"text-slate-600 mt-1\">{selectedStory.key}</p>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Title:</span>\r\n                    <p className=\"text-slate-600 mt-1\">{selectedStory.title}</p>\r\n                  </div>\r\n                  <div className=\"flex gap-4\">\r\n                    <div>\r\n                      <span className=\"font-semibold text-slate-700\">Status:</span>\r\n                      <span className=\"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs\">\r\n                        {selectedStory.status}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-semibold text-slate-700\">Priority:</span>\r\n                      <span className=\"ml-2 px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs\">\r\n                        {selectedStory.priority}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  {selectedStory.assignee && (\r\n                    <div>\r\n                      <span className=\"font-semibold text-slate-700\">Assignee:</span>\r\n                      <p className=\"text-slate-600 mt-1\">{selectedStory.assignee}</p>\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Description:</span>\r\n                    <p className=\"text-slate-600 mt-1 bg-slate-50 p-2 rounded max-h-32 overflow-y-auto\">\r\n                      {selectedStory.description}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"font-semibold text-slate-700\">Acceptance Criteria:</span>\r\n                    {selectedStory.acceptanceCriteria ? (\r\n                      <ul className=\"text-slate-600 mt-2 bg-slate-50 p-4 rounded max-h-40 overflow-y-auto space-y-2 list-disc list-inside\">\r\n                        {parseAcceptanceCriteria(selectedStory.acceptanceCriteria).map((criterion, idx) => (\r\n                          <li key={idx} className=\"text-sm text-slate-700\">\r\n                            {criterion}\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    ) : (\r\n                      <p className=\"text-slate-500 italic mt-1\">No acceptance criteria provided</p>\r\n                    )}\r\n                  </div>\r\n                  {(selectedStory.epicKey || selectedStory.epicTitle) && (\r\n                    <div className=\"border-t pt-4 mt-4\">\r\n                      <h4 className=\"font-semibold text-slate-900 mb-3\">Epic Information</h4>\r\n                      <div className=\"space-y-2\">\r\n                        {selectedStory.epicKey && (\r\n                          <div>\r\n                            <span className=\"font-semibold text-slate-700\">Epic Number:</span>\r\n                            <p className=\"text-slate-600 mt-1\">{selectedStory.epicKey}</p>\r\n                          </div>\r\n                        )}\r\n                        {selectedStory.epicTitle && (\r\n                          <div>\r\n                            <span className=\"font-semibold text-slate-700\">Epic Short Description:</span>\r\n                            <p className=\"text-slate-600 mt-1\">{selectedStory.epicTitle}</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <button\r\n                  onClick={generateTestCases}\r\n                  disabled={isGenerating || !selectedStory || configuredProviders.length === 0}\r\n                  className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-semibold flex items-center justify-center gap-2 mt-6\"\r\n                >\r\n                  {isGenerating ? (\r\n                    <>\r\n                      <Loader className=\"w-4 h-4 animate-spin\" />\r\n                      Generating...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Sparkles className=\"w-4 h-4\" />\r\n                      Generate Test Cases\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-slate-600 text-center py-8\">Select a story to view details and generate test cases</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {generatedTestCases.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-md border border-slate-200 p-6 space-y-4\">\r\n          <h3 className=\"font-semibold text-slate-900\">Generated Test Cases ({generatedTestCases.length})</h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-slate-100 border-b border-slate-300\">\r\n                <tr>\r\n                  <th className=\"px-4 py-3 text-center w-10\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedTestCaseIds.size === generatedTestCases.length && generatedTestCases.length > 0}\r\n                      onChange={handleSelectAllTestCases}\r\n                      className=\"w-4 h-4 cursor-pointer accent-blue-600\"\r\n                    />\r\n                  </th>\r\n                  <th className=\"px-4 py-3 text-center w-10\"></th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Test Case Name</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Description</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Type</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Priority</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Story ID</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\">Epic Number</th>\r\n                  <th className=\"px-4 py-3 text-left font-semibold text-slate-700\" title=\"Epic Short Description\">Epic Description</th>\r\n                  <th className=\"px-4 py-3 text-center font-semibold text-slate-700\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-slate-200\">\r\n                {generatedTestCases.map((testCase) => (\r\n                  <React.Fragment key={testCase.id}>\r\n                    <tr className=\"hover:bg-slate-50 transition-colors\">\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedTestCaseIds.has(testCase.id)}\r\n                          onChange={() => handleSelectTestCase(testCase.id)}\r\n                          className=\"w-4 h-4 cursor-pointer accent-blue-600\"\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center cursor-pointer\">\r\n                        <ChevronDown\r\n                          className={`w-5 h-5 text-slate-400 transition-transform inline ${\r\n                            expandedTestCaseId === testCase.id ? 'rotate-180' : ''\r\n                          }`}\r\n                          onClick={() => setExpandedTestCaseId(expandedTestCaseId === testCase.id ? null : testCase.id)}\r\n                        />\r\n                      </td>\r\n                      <td className=\"px-4 py-3 font-semibold text-slate-900 max-w-xs truncate\">{testCase.name}</td>\r\n                      <td className=\"px-4 py-3 text-slate-600 max-w-sm truncate\">{testCase.short_description}</td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded bg-blue-100 text-blue-700 border border-blue-300 inline-block\">\r\n                          {testCase.test_type}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded bg-orange-100 text-orange-700 border border-orange-300 inline-block\">\r\n                          {testCase.priority}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-slate-600 font-mono text-sm\" title={selectedStory?.key}>\r\n                        {selectedStory?.key || ''}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-slate-600 max-w-xs truncate\" title={selectedStory?.epicKey}>\r\n                        {selectedStory?.epicKey || ''}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-slate-600 max-w-sm truncate\" title={selectedStory?.epicTitle}>\r\n                        {selectedStory?.epicTitle || ''}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-center\">\r\n                        <button\r\n                          onClick={() => copyToClipboard(testCase)}\r\n                          className=\"text-slate-400 hover:text-slate-600 transition-colors\"\r\n                          title=\"Copy to clipboard\"\r\n                        >\r\n                          {copiedId === testCase.id ? (\r\n                            <Check className=\"w-4 h-4 text-green-600\" />\r\n                          ) : (\r\n                            <Copy className=\"w-4 h-4\" />\r\n                          )}\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n\r\n                    {/* Expandable Row - Full Test Case Details */}\r\n                    {expandedTestCaseId === testCase.id && (\r\n                      <tr className=\"bg-slate-50 border-l-4 border-blue-500\">\r\n                        <td colSpan={6} className=\"px-4 py-4\">\r\n                          <div className=\"space-y-6\">\r\n                            {testCase.description ? (\r\n                              <div className=\"space-y-2\">\r\n                                <h4 className=\"font-bold text-slate-900\">Description</h4>\r\n                                <p className=\"text-sm text-slate-700 bg-white p-3 rounded border border-slate-200\">\r\n                                  {String(testCase.description)}\r\n                                </p>\r\n                              </div>\r\n                            ) : null}\r\n\r\n                            {(testCase.steps && testCase.steps.length > 0) ? (\r\n                              <div className=\"space-y-3\">\r\n                                <h4 className=\"font-bold text-slate-900 text-md border-b-2 border-purple-500 pb-2\">Test Steps ({testCase.steps.length})</h4>\r\n                                <div className=\"overflow-x-auto\">\r\n                                  <table className=\"w-full text-xs border-collapse\">\r\n                                    <thead className=\"bg-slate-200 border border-slate-300\">\r\n                                      <tr>\r\n                                        <th className=\"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300 w-16\">Step #</th>\r\n                                        <th className=\"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300\">Step Description</th>\r\n                                        <th className=\"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300\">Expected Result</th>\r\n                                        <th className=\"px-3 py-2 text-left font-semibold text-slate-800 border border-slate-300 w-32\">Test Data</th>\r\n                                      </tr>\r\n                                    </thead>\r\n                                    <tbody className=\"divide-y divide-slate-300\">\r\n                                      {testCase.steps\r\n                                        .sort((a, b) => a.order - b.order)\r\n                                        .map((step, idx) => (\r\n                                          <tr key={idx} className=\"bg-white hover:bg-slate-50 border border-slate-300\">\r\n                                            <td className=\"px-3 py-2 text-slate-700 font-bold border border-slate-300 bg-slate-50\">{step.order}</td>\r\n                                            <td className=\"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal\">{step.step}</td>\r\n                                            <td className=\"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal\">{step.expected_result}</td>\r\n                                            <td className=\"px-3 py-2 text-slate-600 border border-slate-300 whitespace-normal text-xs bg-slate-50 font-mono\">\r\n                                              {step.test_data || ''}\r\n                                            </td>\r\n                                          </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                  </table>\r\n                                </div>\r\n                              </div>\r\n                            ) : (\r\n                              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800\">\r\n                                No test steps available. The LLM did not include step details in the response.\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          {generatedTestCases.length > 0 && (\r\n            <div className=\"mt-4 p-4 bg-slate-50 rounded-lg border border-slate-200\">\r\n              <div className=\"flex items-center justify-between gap-4\">\r\n                <div className=\"text-sm font-medium text-slate-700\">\r\n                  {selectedTestCaseIds.size > 0 ? (\r\n                    <>\r\n                      <span className=\"font-semibold text-blue-600\">{selectedTestCaseIds.size}</span>\r\n                      {' '}test case{selectedTestCaseIds.size !== 1 ? 's' : ''} selected\r\n                    </>\r\n                  ) : (\r\n                    <span className=\"text-slate-500\">Select test cases to perform bulk actions</span>\r\n                  )}\r\n                </div>\r\n                {selectedTestCaseIds.size > 0 && (\r\n                  <div className=\"flex gap-3\">\r\n                    <button\r\n                      onClick={handleSendToServiceNow}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <Send className=\"w-4 h-4\" />\r\n                      Send to ServiceNow\r\n                    </button>\r\n                    <button\r\n                      onClick={handleExportCSVExcel}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <Download className=\"w-4 h-4\" />\r\n                      Export CSV/Excel\r\n                    </button>\r\n                    <button\r\n                      onClick={handleGenerateFeatureFile}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium\"\r\n                    >\r\n                      <FileText className=\"w-4 h-4\" />\r\n                      Generate Feature File\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h4 className=\"font-semibold text-blue-900 mb-2\"> How it works</h4>\r\n        <ul className=\"text-sm text-blue-800 space-y-1\">\r\n          <li> Stories are automatically fetched from configured Jira and ServiceNow instances</li>\r\n          <li> Select a story from the list to view its details</li>\r\n          <li> Choose an LLM provider and model for test case generation</li>\r\n          <li> AI generates comprehensive test cases with structured steps and test data</li>\r\n          <li> Select test cases and export them to CSV, Excel, or generate Gherkin Feature files</li>\r\n        </ul>\r\n      </div>\r\n\r\n      {showFeatureFileModal && (\r\n        <FeatureFileGenerator\r\n          testCases={Array.from(selectedTestCaseIds)\r\n            .map((id) => generatedTestCases.find((tc) => tc.id === id))\r\n            .filter((tc): tc is GeneratedTestCase => tc !== undefined)}\r\n          story={selectedStory}\r\n          onClose={() => setShowFeatureFileModal(false)}\r\n          currentLLMProvider={selectedProvider}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","const BASE_URL = 'http://localhost:3001/api';\r\n\r\nclass RagApiService {\r\n  // Test Generation Methods\r\n  async generateTests(endpoint: string, count: number = 2, type: string = 'both') {\r\n    const response = await fetch(`${BASE_URL}/tests/generate-rag`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ endpoint, count, type })\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async generateTestsFromDocument(content: string, endpoint?: string, count: number = 2, type: string = 'both') {\r\n    const response = await fetch(`${BASE_URL}/tests/generate-document`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ content, endpoint, count, type })\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async generateTestsFromFile(file: File, endpoint?: string, count: number = 2, type: string = 'both') {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n    if (endpoint) formData.append('endpoint', endpoint);\r\n    formData.append('count', count.toString());\r\n    formData.append('type', type);\r\n\r\n    const response = await fetch(`${BASE_URL}/tests/generate-file`, {\r\n      method: 'POST',\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async generateTestsFromUrl(url: string, endpoint?: string, count: number = 2, type: string = 'both') {\r\n    const response = await fetch(`${BASE_URL}/tests/generate-url`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ url, endpoint, count, type })\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async generateTestsFromPrompt(prompt: string, endpoint?: string, count: number = 2, type: string = 'both') {\r\n    const response = await fetch(`${BASE_URL}/tests/generate-prompt`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ prompt, endpoint, count, type })\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  // Document Management Methods\r\n  async ingestDocument(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    const response = await fetch(`${BASE_URL}/documents/ingest`, {\r\n      method: 'POST',\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  async searchRAG(query: string, mode: string = 'hybrid', limit: number = 5) {\r\n    const response = await fetch(`${BASE_URL}/rag/search`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ query, mode, limit })\r\n    });\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport const ragApiService = new RagApiService();\r\n","import { useState } from 'react';\r\nimport { Upload, Search, FileText, Globe, MessageSquare, Database, Loader2, X } from 'lucide-react';\r\nimport { ragApiService } from '../services/ragApiService';\r\n\r\nexport function SwaggerAPI() {\r\n  const [ragEndpoint, setRagEndpoint] = useState('');\r\n  const [ragTestCount, setRagTestCount] = useState(2);\r\n  const [ragTestType, setRagTestType] = useState('both');\r\n\r\n  const [docEndpoint, setDocEndpoint] = useState('');\r\n  const [docTestCount, setDocTestCount] = useState(2);\r\n  const [docTestType, setDocTestType] = useState('both');\r\n  const [documentContent, setDocumentContent] = useState('');\r\n  const [selectedTestFile, setSelectedTestFile] = useState<File | null>(null);\r\n  const [url, setUrl] = useState('');\r\n\r\n  const [query, setQuery] = useState('');\r\n  const [searchMode, setSearchMode] = useState('hybrid');\r\n  const [searchLimit, setSearchLimit] = useState(5);\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n\r\n  const [loadingRAG, setLoadingRAG] = useState(false);\r\n  const [loadingDocument, setLoadingDocument] = useState(false);\r\n  const [loadingFile, setLoadingFile] = useState(false);\r\n  const [loadingUrl, setLoadingUrl] = useState(false);\r\n  const [loadingPrompt, setLoadingPrompt] = useState(false);\r\n  const [loadingSearch, setLoadingSearch] = useState(false);\r\n  const [loadingIngest, setLoadingIngest] = useState(false);\r\n\r\n  const [results, setResults] = useState<any>(null);\r\n\r\n  const handleGenerateTests = async () => {\r\n    if (!ragEndpoint) return;\r\n    setLoadingRAG(true);\r\n    try {\r\n      const result = await ragApiService.generateTests(ragEndpoint, ragTestCount, ragTestType);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'Failed to generate tests' });\r\n    }\r\n    setLoadingRAG(false);\r\n  };\r\n\r\n  const handleGenerateFromDocument = async () => {\r\n    if (!documentContent) return;\r\n    setLoadingDocument(true);\r\n    try {\r\n      const result = await ragApiService.generateTestsFromDocument(documentContent, docEndpoint, docTestCount, docTestType);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'Document test generation failed' });\r\n    }\r\n    setLoadingDocument(false);\r\n  };\r\n\r\n  const handleGenerateFromFile = async () => {\r\n    if (!selectedTestFile) return;\r\n    setLoadingFile(true);\r\n    try {\r\n      const result = await ragApiService.generateTestsFromFile(selectedTestFile, docEndpoint, docTestCount, docTestType);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'File test generation failed' });\r\n    }\r\n    setLoadingFile(false);\r\n  };\r\n\r\n  const handleGenerateFromUrl = async () => {\r\n    if (!url) return;\r\n    setLoadingUrl(true);\r\n    try {\r\n      const result = await ragApiService.generateTestsFromUrl(url, docEndpoint, docTestCount, docTestType);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'URL test generation failed' });\r\n    }\r\n    setLoadingUrl(false);\r\n  };\r\n\r\n  const handleGenerateFromPrompt = async () => {\r\n    const prompt = window.prompt('Enter custom prompt for test generation:');\r\n    if (!prompt) return;\r\n    setLoadingPrompt(true);\r\n    try {\r\n      const result = await ragApiService.generateTestsFromPrompt(prompt, docEndpoint, docTestCount, docTestType);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'Prompt test generation failed' });\r\n    }\r\n    setLoadingPrompt(false);\r\n  };\r\n\r\n  const handleSearchRAG = async () => {\r\n    if (!query) return;\r\n    setLoadingSearch(true);\r\n    try {\r\n      const result = await ragApiService.searchRAG(query, searchMode, searchLimit);\r\n      setResults(result);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'Search failed' });\r\n    }\r\n    setLoadingSearch(false);\r\n  };\r\n\r\n  const handleIngestDocument = async () => {\r\n    if (!selectedFile) return;\r\n    setLoadingIngest(true);\r\n    try {\r\n      const result = await ragApiService.ingestDocument(selectedFile);\r\n      setResults(result);\r\n      setSelectedFile(null);\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setResults({ error: 'Document ingestion failed' });\r\n    }\r\n    setLoadingIngest(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"bg-white rounded-xl shadow-md p-6 border border-slate-200\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <Database className=\"w-6 h-6 text-blue-600\" />\r\n          <h3 className=\"text-xl font-semibold text-slate-900\">Generate Tests from RAG</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Endpoint</label>\r\n            <input\r\n              type=\"text\"\r\n              value={ragEndpoint}\r\n              onChange={(e) => setRagEndpoint(e.target.value)}\r\n              placeholder=\"GET /users\"\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Test Count</label>\r\n            <select\r\n              value={ragTestCount}\r\n              onChange={(e) => setRagTestCount(Number(e.target.value))}\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              {[1,2,3,4,5,6,7,8,9,10].map(n => (\r\n                <option key={n} value={n}>{n}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Test Type</label>\r\n            <select\r\n              value={ragTestType}\r\n              onChange={(e) => setRagTestType(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"both\">Both</option>\r\n              <option value=\"positive\">Positive</option>\r\n              <option value=\"negative\">Negative</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        <button\r\n          onClick={handleGenerateTests}\r\n          disabled={!ragEndpoint || loadingRAG}\r\n          className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n        >\r\n          {loadingRAG ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Database className=\"w-4 h-4\" />}\r\n          Generate from RAG\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md p-6 border border-slate-200\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <FileText className=\"w-6 h-6 text-green-600\" />\r\n          <h3 className=\"text-xl font-semibold text-slate-900\">Generate Tests from Document</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Endpoint (Optional)</label>\r\n            <input\r\n              type=\"text\"\r\n              value={docEndpoint}\r\n              onChange={(e) => setDocEndpoint(e.target.value)}\r\n              placeholder=\"GET /users\"\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Test Count</label>\r\n            <select\r\n              value={docTestCount}\r\n              onChange={(e) => setDocTestCount(Number(e.target.value))}\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              {[1,2,3,4,5,6,7,8,9,10].map(n => (\r\n                <option key={n} value={n}>{n}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Test Type</label>\r\n            <select\r\n              value={docTestType}\r\n              onChange={(e) => setDocTestType(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"both\">Both</option>\r\n              <option value=\"positive\">Positive</option>\r\n              <option value=\"negative\">Negative</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-2\">Document Content</label>\r\n          <textarea\r\n            value={documentContent}\r\n            onChange={(e) => setDocumentContent(e.target.value)}\r\n            placeholder=\"Paste your API specification or documentation here...\"\r\n            rows={6}\r\n            className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-2\">Or Upload File</label>\r\n          <input\r\n            type=\"file\"\r\n            onChange={(e) => setSelectedTestFile(e.target.files?.[0] || null)}\r\n            accept=\".yaml,.yml,.json,.pdf,.xlsx,.xls,.csv,.docx,.doc,.txt,.md\"\r\n            className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-sm font-medium text-slate-700 mb-2\">Or Enter URL</label>\r\n          <input\r\n            type=\"url\"\r\n            value={url}\r\n            onChange={(e) => setUrl(e.target.value)}\r\n            placeholder=\"https://petstore3.swagger.io/\"\r\n            className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={handleGenerateFromDocument}\r\n            disabled={!documentContent || loadingDocument}\r\n            className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {loadingDocument ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <FileText className=\"w-4 h-4\" />}\r\n            Generate from Content\r\n          </button>\r\n          \r\n          <button\r\n            onClick={handleGenerateFromFile}\r\n            disabled={!selectedTestFile || loadingFile}\r\n            className=\"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {loadingFile ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Upload className=\"w-4 h-4\" />}\r\n            Generate from File\r\n          </button>\r\n          \r\n          <button\r\n            onClick={handleGenerateFromUrl}\r\n            disabled={!url || loadingUrl}\r\n            className=\"px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {loadingUrl ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Globe className=\"w-4 h-4\" />}\r\n            Generate from URL\r\n          </button>\r\n          \r\n          <button\r\n            onClick={handleGenerateFromPrompt}\r\n            disabled={loadingPrompt}\r\n            className=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n          >\r\n            {loadingPrompt ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <MessageSquare className=\"w-4 h-4\" />}\r\n            Generate from Prompt\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-xl shadow-md p-6 border border-slate-200\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <Search className=\"w-6 h-6 text-purple-600\" />\r\n          <h3 className=\"text-xl font-semibold text-slate-900\">RAG Management</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div>\r\n            <h4 className=\"text-lg font-medium text-slate-800 mb-3\">Add Document to Knowledge Base</h4>\r\n            <input\r\n              type=\"file\"\r\n              onChange={(e) => setSelectedFile(e.target.files?.[0] || null)}\r\n              accept=\".yaml,.yml,.json,.pdf,.xlsx,.xls,.csv,.docx,.doc,.txt,.md\"\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-3\"\r\n            />\r\n            <button\r\n              onClick={handleIngestDocument}\r\n              disabled={!selectedFile || loadingIngest}\r\n              className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              {loadingIngest ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Upload className=\"w-4 h-4\" />}\r\n              Ingest Document\r\n            </button>\r\n          </div>\r\n\r\n          <div>\r\n            <h4 className=\"text-lg font-medium text-slate-800 mb-3\">Search Knowledge Base</h4>\r\n            <input\r\n              type=\"text\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n              placeholder=\"Search query...\"\r\n              className=\"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-2\"\r\n            />\r\n            <div className=\"flex gap-2 mb-3\">\r\n              <select\r\n                value={searchMode}\r\n                onChange={(e) => setSearchMode(e.target.value)}\r\n                className=\"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"hybrid\">Hybrid</option>\r\n                <option value=\"vector\">Vector</option>\r\n                <option value=\"keyword\">Keyword</option>\r\n              </select>\r\n              <select\r\n                value={searchLimit}\r\n                onChange={(e) => setSearchLimit(Number(e.target.value))}\r\n                className=\"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                {[1,2,3,4,5,10,15,20].map(n => (\r\n                  <option key={n} value={n}>{n}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <button\r\n              onClick={handleSearchRAG}\r\n              disabled={!query || loadingSearch}\r\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n            >\r\n              {loadingSearch ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Search className=\"w-4 h-4\" />}\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {results && (\r\n        <div className=\"bg-white rounded-xl shadow-md p-6 border border-slate-200\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-xl font-semibold text-slate-900\">Results</h3>\r\n            <button\r\n              onClick={() => setResults(null)}\r\n              className=\"p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded-lg\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"bg-slate-50 rounded-lg p-4 max-h-96 overflow-auto\">\r\n            <pre className=\"text-sm text-slate-800 whitespace-pre-wrap\">\r\n              {JSON.stringify(results, null, 2)}\r\n            </pre>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { CircleDot } from 'lucide-react';\r\n\r\ninterface StatusBadgeProps {\r\n  provider: string;\r\n  isConnected: boolean;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport function StatusBadge({ provider, isConnected, isLoading = false }: StatusBadgeProps) {\r\n  const statusColor = isLoading ? 'text-yellow-500' : isConnected ? 'text-green-500' : 'text-red-500';\r\n  const backgroundColor = isLoading ? 'bg-yellow-50' : isConnected ? 'bg-green-50' : 'bg-red-50';\r\n\r\n  return (\r\n    <div className={`flex items-center gap-2 px-3 py-1 rounded-full ${backgroundColor} border ${\r\n      isLoading ? 'border-yellow-200' : isConnected ? 'border-green-200' : 'border-red-200'\r\n    }`}>\r\n      <CircleDot className={`w-2 h-2 ${statusColor}`} fill=\"currentColor\" />\r\n      <span className={`text-xs font-semibold ${\r\n        isLoading ? 'text-yellow-700' : isConnected ? 'text-green-700' : 'text-red-700'\r\n      }`}>\r\n        {provider}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport {\r\n  FileText,\r\n  TestTubes,\r\n  Database,\r\n  Menu,\r\n  X,\r\n  Settings as SettingsIcon,\r\n} from 'lucide-react';\r\nimport { RequirementAnalysis } from './components/RequirementAnalysis';\r\nimport { Settings } from './components/Settings';\r\nimport { TestCases } from './components/TestCases';\r\nimport { TestCasesGenerator } from './components/TestCasesGenerator';\r\nimport { SwaggerAPI } from './components/SwaggerAPI';\r\nimport { StatusBadge } from './components/StatusBadge';\r\nimport { llmService } from './services/llmService';\r\nimport { LLM_PROVIDERS, type LLMProvider } from './config/llmConfig';\r\n\r\ninterface MenuItem {\r\n  id: number;\r\n  title: string;\r\n  icon: React.ReactNode;\r\n}\r\n\r\nconst menuItems: MenuItem[] = [\r\n  {\r\n    id: 1,\r\n    title: 'Requirement Analysis',\r\n    icon: <FileText className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 2,\r\n    title: 'Test Cases Generator',\r\n    icon: <TestTubes className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 3,\r\n    title: 'Swagger - API Testcase Generator',\r\n    icon: <Database className=\"w-5 h-5\" />,\r\n  },\r\n /* {\r\n    id: 4,\r\n    title: 'Test Data Generator',\r\n    icon: <Zap className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 5,\r\n    title: 'Regression Testing Identification',\r\n    icon: <TrendingUp className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 6,\r\n    title: 'Chat Bot',\r\n    icon: <MessageSquare className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 7,\r\n    title: 'QA Dashboard',\r\n    icon: <BarChart3 className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 8,\r\n    title: 'Data Testing',\r\n    icon: <CheckSquare className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 9,\r\n    title: 'Visual Testing',\r\n    icon: <Eye className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 10,\r\n    title: 'Generate No Code',\r\n    icon: <Wand2 className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 11,\r\n    title: 'Code Conversion',\r\n    icon: <Code2 className=\"w-5 h-5\" />,\r\n  },\r\n  {\r\n    id: 12,\r\n    title: 'Test Cases',\r\n    icon: <List className=\"w-5 h-5\" />,\r\n  },*/\r\n  {\r\n    id: 13,\r\n    title: 'Settings',\r\n    icon: <SettingsIcon className=\"w-5 h-5\" />,\r\n  },\r\n];\r\n\r\nfunction App() {\r\n  const [selectedMenu, setSelectedMenu] = useState<number>(1);\r\n  const [sidebarOpen, setSidebarOpen] = useState(true);\r\n  const [llmStatus, setLlmStatus] = useState<{ provider: LLMProvider | null; isConnected: boolean; isLoading: boolean }>({\r\n    provider: null,\r\n    isConnected: false,\r\n    isLoading: false,\r\n  });\r\n  const [serviceNowStatus, setServiceNowStatus] = useState<{ isConnected: boolean; isLoading: boolean }>({\r\n    isConnected: false,\r\n    isLoading: false,\r\n  });\r\n\r\n  // Check LLM provider status on component mount and when menu changes\r\n  useEffect(() => {\r\n    const checkStatuses = async () => {\r\n      // Check LLM status\r\n      const configuredProviders = llmService.getConfiguredProviders();\r\n      if (configuredProviders.length > 0) {\r\n        const provider = configuredProviders[0];\r\n        setLlmStatus((prev) => ({ ...prev, provider, isLoading: true }));\r\n        \r\n        const result = await llmService.testConnection(provider);\r\n        setLlmStatus({\r\n          provider,\r\n          isConnected: result.success,\r\n          isLoading: false,\r\n        });\r\n      } else {\r\n        setLlmStatus({ provider: null, isConnected: false, isLoading: false });\r\n      }\r\n\r\n      // Check ServiceNow status from localStorage (settings)\r\n      const serviceNowConfig = localStorage.getItem('servicenow_config');\r\n      const isServiceNowConnected = !!serviceNowConfig;\r\n      setServiceNowStatus({\r\n        isConnected: isServiceNowConnected,\r\n        isLoading: false,\r\n      });\r\n    };\r\n\r\n    checkStatuses();\r\n    \r\n    // Recheck when returning to app (every 30 seconds)\r\n    const interval = setInterval(checkStatuses, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const selectedItem = menuItems.find((item) => item.id === selectedMenu);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 flex\">\r\n      <div\r\n        className={`${\r\n          sidebarOpen ? 'w-64' : 'w-0'\r\n        } bg-gradient-to-b from-blue-900 to-blue-800 transition-all duration-300 overflow-hidden`}\r\n      >\r\n        <div className=\"p-6 border-b border-blue-700\">\r\n          <h1 className=\"text-2xl font-bold text-white\">QA Suite</h1>\r\n          <p className=\"text-blue-100 text-sm mt-1\">Automation Tools</p>\r\n        </div>\r\n\r\n        <nav className=\"mt-6 space-y-1 px-3\">\r\n          {menuItems.map((item) => (\r\n            <button\r\n              key={item.id}\r\n              onClick={() => setSelectedMenu(item.id)}\r\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 text-left group ${\r\n                selectedMenu === item.id\r\n                  ? 'bg-blue-600 text-white shadow-md'\r\n                  : 'text-blue-100 hover:bg-blue-700 hover:text-white'\r\n              }`}\r\n            >\r\n              <div className=\"flex-shrink-0\">{item.icon}</div>\r\n              <span className=\"flex-1 text-sm font-medium truncate\">{item.title}</span>\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <div className=\"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between\">\r\n          <button\r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-700\"\r\n          >\r\n            {sidebarOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\r\n          </button>\r\n          <h2 className=\"text-2xl font-bold text-slate-900\">{selectedItem?.title}</h2>\r\n          <div className=\"flex items-center gap-3\">\r\n            {llmStatus.provider && (\r\n              <StatusBadge\r\n                provider={LLM_PROVIDERS[llmStatus.provider]?.name || llmStatus.provider}\r\n                isConnected={llmStatus.isConnected}\r\n                isLoading={llmStatus.isLoading}\r\n              />\r\n            )}\r\n            {serviceNowStatus.isConnected && (\r\n              <StatusBadge\r\n                provider=\"ServiceNow\"\r\n                isConnected={serviceNowStatus.isConnected}\r\n                isLoading={serviceNowStatus.isLoading}\r\n              />\r\n            )}\r\n            {!llmStatus.provider && !serviceNowStatus.isConnected && (\r\n              <div className=\"text-xs text-slate-500\">No integrations configured</div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 p-8 overflow-auto\">\r\n          <div className=\"max-w-6xl\">\r\n            {selectedMenu === 1 ? (\r\n              <RequirementAnalysis />\r\n            ) : selectedMenu === 2 ? (\r\n              <TestCasesGenerator />\r\n            ) : selectedMenu === 3 ? (\r\n              <SwaggerAPI />\r\n            ) : selectedMenu === 12 ? (\r\n              <TestCases />\r\n            ) : selectedMenu === 13 ? (\r\n              <Settings />\r\n            ) : (\r\n              <div className=\"bg-white rounded-xl shadow-md p-12 border border-slate-200\">\r\n                <div className=\"flex justify-center mb-6 text-blue-600\">\r\n                  <div className=\"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center\">\r\n                    {selectedItem?.icon}\r\n                  </div>\r\n                </div>\r\n                <h3 className=\"text-3xl font-bold text-slate-900 mb-4 text-center\">\r\n                  {selectedItem?.title}\r\n                </h3>\r\n                <p className=\"text-slate-600 text-lg text-center leading-relaxed\">\r\n                  Welcome to the {selectedItem?.title} module. This is where the functionality will be\r\n                  implemented.\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { StrictMode } from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\n\r\ncreateRoot(document.getElementById('root')!).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>\r\n);\r\n"],"file":"assets/index-DUla-V7y.js"}